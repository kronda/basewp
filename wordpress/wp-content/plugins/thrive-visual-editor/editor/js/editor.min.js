/*! Thrive Content Builder - 2015-09-24
* http://www.thrivethemes.com/
* Copyright (c) 2015 Thrive Themes */
function tve_edit_hyperlinks(a){var b=jQuery(a.target);b.is("a")||(b=b.parents("a").first()),b.addClass("tve_active_hyperlink"),jQuery(".tve_link_btns").show(),jQuery(".tve_nolink_btns").hide(),tve_populate_hyperlink_fields()}function tve_populate_hyperlink_fields(){active_link=jQuery(".tve_active_hyperlink"),jQuery("#link_anchor").val(jQuery(active_link).text()),jQuery("#link_url").val(jQuery(active_link).attr("href")),jQuery("#anchor_name").val(jQuery(active_link).attr("name")),"_blank"==jQuery(active_link).attr("target")?jQuery("#link_new_window, .lb_quick_link_target").prop("checked",!0):jQuery("#link_new_window, .lb_quick_link_target").prop("checked",!1),"nofollow"==jQuery(active_link).attr("rel")?jQuery("#link_no_follow, .lb_quick_link_no_follow").prop("checked",!0):jQuery("#link_no_follow, .lb_quick_link_no_follow").prop("checked",!1),jQuery(".tve_quick_link_input").val(jQuery(active_link).attr("href"))}function tve_hide_hyperlink_options(){jQuery(".tve_active_hyperlink").removeClass("tve_active_hyperlink"),jQuery(".tve_link_btns").hide(),jQuery(".tve_nolink_btns").show()}function enable_sortables(){var a=!1,b=null,c=function(c,d){if(jQuery(".edit_mode").length||c.is(".tve_not_editable"))return!1;if(b=c,a){for(var e=c,f=e;!e.is(TVE_Editor_Page.editor)&&!e.is("html");)e.is(right_menu_hover_items)&&(f=e),e=e.parent();c=f}return c.is(elements_with_no_menu_icons)?(hide_element_left_menu(),hide_element_right_menu(),jQuery(".active_highlight").removeClass("active_highlight"),(c.hasClass("tve_p_lb_control")||c.hasClass("tve_p_lb_content"))&&(c=c.closest(".tve_p_lb_content")),c.addClass("active_highlight"),!1):(hide_element_left_menu(),hide_element_right_menu(),shortcode_wrapper=tve_get_shortcode_wrapper_hover(c),c.is(elements_without_delete_button)&&shortcode_wrapper?(element_left_position=jQuery(shortcode_wrapper).offset().left,element_top_position=jQuery(shortcode_wrapper).offset().top,element_width=jQuery(shortcode_wrapper).outerWidth(),display_element_right_menu(shortcode_wrapper,element_left_position,element_top_position,element_width),jQuery(shortcode_wrapper).is(left_menu_hover_items)&&(jQuery(shortcode_wrapper).is(elements_no_left_menu)||display_element_left_menu(shortcode_wrapper,element_left_position,element_top_position)),!1):(element_left_position=c.offset().left,element_top_position=c.offset().top,element_width=c.outerWidth(),display_element_right_menu(c,element_left_position,element_top_position,element_width),c.is(left_menu_hover_items)&&(jQuery(shortcode_wrapper).is(elements_no_left_menu)||display_element_left_menu(c,element_left_position,element_top_position)),!0))};jQuery(TVE_Editor_Page).off("editor.shiftpressed").on("editor.shiftpressed",function(d){a=!0,b&&c(b,d)}),jQuery(TVE_Editor_Page).off("editor.shiftreleased").on("editor.shiftreleased",function(d){return a?(a=!1,void(b&&c(b,d))):!0}),TVE_Editor_Page.editor.on("mouseover",right_menu_hover_items,function(a){if("disabled"===TVE_Editor_Page.STATE)return!1;if(jQuery(a.currentTarget).is(elements_no_highlight))return!0;var b=jQuery(this),d=c(b,a);return d===!1?!1:void a.stopPropagation()}),TVE_Editor_Page.editor.on("mouseleave",right_menu_hover_items,function(a){var c=a||window.event;c.relatedTarget!=document.getElementById("delete_icon")&&c.relatedTarget!=document.getElementById("duplicate_icon")&&(hide_element_right_menu(),hide_element_left_menu(),a.stopPropagation(),b=null,last_context=null)})}function remove_element(a,b){var c=jQuery(a),d=[];c.tve_color_selector()&&d.push(c.tve_color_selector()),c.find("[data-tve-custom-colour]").each(function(){var a=jQuery(this);a.tve_color_selector()&&d.push(a.tve_color_selector())});for(var e,f=0;e=d[f++];)tve_remove_css_rule(e);return c.is(".thrv_tabs_shortcode > .tve_scT > ul li")?(c.parents(".thrv_tabs_shortcode").first().tve_tabs().removeTab(c),!0):(-1!=contains_nested_elements.indexOf(b.get(0).tagName)&&1==jQuery(b).find("li").length&&(jQuery(b).parent().is(".thrv_bullets_shortcode")?jQuery(b).parent().remove():jQuery(b).remove()),jQuery(a).is("img")&&0!=jQuery(a).parents(".tve_image_caption").first().length&&jQuery(a).parents(".tve_image_caption").first().remove(),TVE_Content_Builder.drag.before_remove(a),void a.remove())}function tve_refresh(a){var b=jQuery(".edit_mode");TVE_Editor_Page.editor.find("p:empty").html("&#x200b"),jQuery('[contentEditable="true"]').attr("contentEditable","false"),b.parents(".tve_draggable").filter(":not(body,.tve_no_drag)").attr("draggable","true"),b.removeClass("edit_mode").filter(":not(body,.tve_no_drag)").not(text_elements_inline_only).attr("draggable","true"),jQuery(".edit_light, .edit_dark").removeClass("edit_light").removeClass("edit_dark"),a&&enable_sortables(),hide_control_panel_menu(),jQuery(".thrv_custom_html_shortcode").each(function(){var a=jQuery(this);0==a.height()&&0===a.find("."+custom_html_placeholder_class).length&&a.append(custom_html_default_html)})}function getMouseEventCaretRange(a){var b,c=a.clientX,d=a.clientY;if(document.body.createTextRange)b=document.body.createTextRange(),b.moveToPoint(c,d);else if("undefined"!=typeof document.createRange)if("undefined"!=typeof a.rangeParent)b=document.createRange(),b.setStart(a.rangeParent,a.rangeOffset),b.collapse(!0);else if(document.caretPositionFromPoint){var e=document.caretPositionFromPoint(c,d);b=document.createRange(),b.setStart(e.offsetNode,e.offset),b.collapse(!0)}else document.caretRangeFromPoint&&(b=document.caretRangeFromPoint(c,d));return b}function selectRange(a){if(a)if("undefined"!=typeof a.select)a.select();else if("undefined"!=typeof window.getSelection){var b=window.getSelection();b.removeAllRanges(),b.addRange(a)}}function thrive_open_media(a,b,c,d,e){var f;if(jQuery(".tve_active_image").removeClass("tve_active_image"),a&&("load"==b?a.parent().addClass("tve_active_image"):a.addClass("tve_active_image")),f)return void f.open();f=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1,frame:"post"});var g=!1;a&&jQuery(a).parents().is(".thrv_feature_grid")&&(g=!0);var h=function(a){"save"==b?jQuery(".tve_active_image").tve_image().attach(a):"image_element"!=c||g?"image_element"==c&&g?(data={url:a.url,alt_text:a.alt},jQuery.post(tve_path_params.shortcodes_dir+"thrv_image_load_feature_gallery.php",data,function(a){jQuery(".tve_active_image").replaceWith(a)})):"testimonial_button"==c?d.find("img").attr("src",a.url):"page_section_background"==c?d.tve_page_section().setBgImage(a):"icon_element"===c?d.find("i").removeClass(function(a,b){for(var c,d=b.split(" "),e="",a=0;c=d[a++];)("tve_sc_icon"==c||0===c.indexOf("icon-")||-1!==c.indexOf("-icon")||-1!==c.indexOf("_icon"))&&(e+=" "+c);return jQuery.trim(e)}).css("background-image","url("+a.url+")").css("background-size","cover"):"lightbox_content_background"==c?d.tve_lightbox().setBgImage(a):"lp_background"==c?d.tve_lp().setBgImage(a):"tve_lg_img_submit"===c?(d.html('<input type="image" src="'+a.url+'"/>'),load_button_values(d.find('input[type="image"]'),"lead_generation_image_submit")):"simple_image"===c&&d?(d.show().attr("src",a.url),jQuery.isFunction(e)&&e(a)):TVE_Content_Builder.apply_filters("tcb_media_selected",d,c,a):(data={url:a.url,alt_text:a.alt,caption:a.caption,id:a.id,width:a.width,height:a.height},jQuery.post(tve_path_params.shortcodes_dir+"thrv_image_load.php",data,function(a){tve_set_window_content_before_action();var b=jQuery(a),c=jQuery(".tve_active_image");c.hasClass("fwi")&&b.addClass("fwi"),c.replaceWith(b),TVE_Content_Builder.drag.bind_draggable(b),tve_set_window_content_after_action()}));var f=jQuery("#tve_editor").find(".out").removeClass("out");setTimeout(function(){f.addClass("out")},0)};f.on("select",function(){var a=jQuery.extend({alt:"",caption:"",id:""},f.state().props.toJSON());"image"==f.state().get("type")&&h(a)}),f.on("insert",function(){h(f.state().get("selection").first().toJSON())}),f.open(),f.menu&&f.menu.get&&f.menu.get()._views&&f.menu.get()._views.gallery&&f.menu.get()._views.gallery.$el.remove(),f.menu&&f.menu.get&&f.menu.get()._views&&f.menu.get()._views.playlist&&f.menu.get()._views.playlist.$el.remove()}function convert_element_into_edit_mode(a,b){b.stopPropagation(),tve_refresh(!1),hide_sub_menu(),hide_element_right_menu(),hide_element_left_menu(),a.addClass("edit_mode"),a.hasClass("tve_draggable")&&a.removeAttr("draggable"),a.parents(".tve_draggable").removeAttr("draggable"),TVE_Editor_Page.event=b;var c=a.children(),d=jQuery(b.target);if(a.is(text_elements)){if(a.attr("contenteditable","true"),"click"==b.type&&!d.is(selection_loss_tags)){var e=getMouseEventCaretRange(b);window.setTimeout(function(){selectRange(e)},10)}"click"==b.type&&d.is("a")&&setTimeout(function(){d.click();var a=jQuery("#tve_cpanel_onpage");a.hasClass("tve-after-element")||a.css("top",parseInt(a.css("top"))-30+"px")},10),a.is(text_elements_inline_only)?(a.parent().is("a")&&a.parent().attr("draggable","false").data("remove-draggable",!0),load_control_panel_menu(b.target,"text_inline_only")):a.is(text_element_no_formatting)||load_control_panel_menu(b.target,"text")}else if(a.is("img"))b.preventDefault(),load_control_panel_menu(a,"img"),jQuery(a).parent().is("a")&&jQuery(".tve_link_btns").show();else if(c.is(".tve_btn"))b.preventDefault(),load_control_panel_menu(b.target,"button");else if(c.is(".tve_cb"))b.preventDefault(),load_control_panel_menu(b.target,"contentbox");else if(c.is(".tve_fg"))b.preventDefault(),load_control_panel_menu(b.target,"guarantee");else if(c.is(".tve_ca"))b.preventDefault(),load_control_panel_menu(b.target,"calltoaction");else if(c.is(".tve_ts"))b.preventDefault(),load_control_panel_menu(b.target,"testimonial");else if(c.is(".tve_ul"))b.preventDefault(),load_control_panel_menu(b.target,"bullets");else if(c.is(".tve_scT"))b.preventDefault(),load_control_panel_menu(b.target,"tabs");else if(c.is(".tve_faq"))b.preventDefault(),load_control_panel_menu(b.target,"toggle");else if(a.is(".thrv_custom_html_shortcode"))b.preventDefault(),load_control_panel_menu(b.target,"custom_html");else if(a.is(".thrv_feature_grid"))b.preventDefault(),load_control_panel_menu(b.target,"feature_grid");else if(a.is(".thrv_cc_icons, .thrv_cc_wrapper, .tve_cc_logo"))b.preventDefault(),a=tve_get_shortcode_wrapper_click(b.target),load_control_panel_menu(a,"cc_icons");else if(a.is(".thrv_page_section"))b.preventDefault(),load_control_panel_menu(a,"page_section");else if(a.is(".tve_prt"))b.preventDefault(),load_control_panel_menu(a,"pricing_table");else if(a.is(".thrv_content_container_shortcode"))b.preventDefault(),load_control_panel_menu(a,"content_container");else if(a.is(".thrv_table"))b.preventDefault(),load_control_panel_menu(a,"table");else if(a.is(".tve_table_cell"))b.preventDefault(),load_control_panel_menu(a,"table_cell");else if(a.is(".thrv_thrive_optin"))b.preventDefault(),load_control_panel_menu(a,"thrive_optin");else if(a.is(".thrive_leads_shortcode"))b.preventDefault(),load_control_panel_menu(a,"thrive_leads_shortcode");else if(a.is(".thrv_content_reveal"))b.preventDefault(),load_control_panel_menu(a,"content_reveal");else if(a.is(".thrv_countdown_timer"))b.preventDefault(),a.hasClass("tve_countdown_timer_evergreen")?load_control_panel_menu(a,"countdown_timer_evergreen"):load_control_panel_menu(a,"countdown_timer");else if(a.is(".thrv_posts_list"))b.preventDefault(),load_control_panel_menu(a,"thrive_posts_list");else if(a.is(".thrv_custom_phone"))b.preventDefault(),load_control_panel_menu(a,"thrive_custom_phone");else if(a.is(".thrv_custom_menu"))b.preventDefault(),load_control_panel_menu(a,"thrive_custommenu");else if(a.is(".thrv_responsive_video"))b.preventDefault(),load_control_panel_menu(a,"responsive_video");else if(a.is(".thrv_contents_table"))b.preventDefault(),load_control_panel_menu(a,"contents_table");else if(a.is(".thrv_tw_qs"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".thrv_star_rating"))b.preventDefault(),load_control_panel_menu(a,"rating");else if(a.is(".tve_wp_shortcode"))b.preventDefault(),load_control_panel_menu(a,"shortcode");else if(a.is(".thrv_lead_generation"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_input"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_image_submit"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_submit"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_checkbox"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_dropdown"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_radio"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is(".tve_lg_textarea"))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.is("ul.thrv_wrapper")||a.is("ol.thrv_wrapper"))b.preventDefault(),load_control_panel_menu(a,"lists");else if("widget"===get_shortcode_type_from_edit_mode(a))b.preventDefault(),load_control_panel_menu(a,get_shortcode_type_from_edit_mode(a));else if(a.hasClass("tve_p_lb_control"))b.preventDefault(),load_control_panel_menu(a,"lightbox");else if(a.hasClass("tve_landing_fonts"))b.preventDefault(),load_control_panel_menu(a,"landing_fonts");else if(a.hasClass("tve_wrap_all"))b.preventDefault(),load_control_panel_menu(a,"landing_page");else if(a.hasClass("tve_lp_content"))b.preventDefault(),load_control_panel_menu(a,"landing_page_content");else if(a.hasClass("thrv_post_grid"))b.preventDefault(),load_control_panel_menu(a,"post_grid");else if(a.hasClass("thrv_icon"))b.preventDefault(),load_control_panel_menu(a,"icon"),0==a.find("a").length?tve_hide_hyperlink_options():jQuery(".tve_link_btns").show();else if(a.hasClass("thrv_widget_menu"))b.preventDefault(),load_control_panel_menu(a,"widget_menu");else if(a.is("body"))b.preventDefault(),load_control_panel_menu(a,"landing_fonts");else if(a.hasClass("thrv_social_default"))b.preventDefault(),load_control_panel_menu(a,"social_default");else if(a.hasClass("thrv_social_custom"))b.preventDefault(),load_control_panel_menu(a,"social_custom");else if(a.hasClass("thrv_progress_bar"))b.preventDefault(),load_control_panel_menu(a,"progress_bar");else if(a.hasClass("thrv_fill_counter"))b.preventDefault(),load_control_panel_menu(a,"fill_counter");else if(a.hasClass("thrv_number_counter"))b.preventDefault(),load_control_panel_menu(a,"number_counter");else{var f=TVE_Content_Builder.apply_filters("menu_show",a);f!==!0&&load_control_panel_menu(a,"default_element")}return setTimeout(function(){a.focus()},0),!0}function activate_editmode_keyboard_listener(){jQuery(document).on("keydown.editmode",function(a){var b=jQuery(".edit_mode");if(jQuery(":focus").is(b)){if(b.is(text_elements)){if(13==a.which&&!a.shiftKey){if(a.preventDefault(),block_container=get_parent_block_element(b),block_container_tag_name=block_container.get(0).tagName,"PRE"!=block_container_tag_name)var c=get_text_after_cursor(),d=jQuery(c).text();switch(block_container_tag_name){case"P":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"ADDRESS":remove_contenteditable_true(),jQuery.trim(d)||(block_container_tag_name="P"),add_paragraph_to_dom(b,c,get_cursor_offset(),a,block_container_tag_name);break;case"UL":remove_contenteditable_true(),add_li_to_dom(b,c,"UL",get_cursor_offset(),a);break;case"OL":remove_contenteditable_true(),add_li_to_dom(b,c,"OL",get_cursor_offset(),a);break;case"BLOCKQUOTE":remove_contenteditable_true(),add_blockquote_to_dom(b,c,a);break;case"PRE":add_break_to_dom(b,a)}return!0}if(13==a.which&&a.shiftKey)return a.preventDefault(),add_break_to_dom(b,a),!0;9==a.which&&(document.execCommand("indent",!0,null),a.preventDefault&&a.preventDefault())}b.is("img")&&(46==a.which||8==a.which)&&b.remove()}})}function remove_contenteditable_true(){jQuery("[contenteditable]").removeAttr("contenteditable")}function add_blockquote_to_dom(a,b,c){var d=jQuery('<blockquote contenteditable="true"></blockquote>').append(b);a.after(d),a.next("blockquote").focus(),convert_element_into_edit_mode(a.next("blockquote"),c),TVE_Content_Builder.drag.after_clone(a,d)}function add_li_to_dom(a,b,c,d,e){if(d||a.html("&#x200b"),a.text()){var f=a.clone().empty().append(b).removeClass("edit_mode active_delete active_duplicate tve_draggable").removeAttr("draggable");a.after(f),f.focus(),convert_element_into_edit_mode(f,e)}else a.replaceWith("</"+c+">"),add_paragraph_to_dom(a,b,e)}function add_paragraph_to_dom(a,b,c,d,e){c||a.html("&#x200b");var f=jQuery("<"+e+"></"+e+">").append(b);a.after(f),TVE_Content_Builder.drag.after_clone(a,f),tve_copy_style(a,f),f.focus(),d.target=f,convert_element_into_edit_mode(f,d)}function add_break_to_dom(a,b){var c=rangy.getSelection();if(c.getRangeAt&&c.rangeCount){range=c.getRangeAt(0);var d=document.createElement("br");range.insertNode(d),c.collapse(d.parentNode,1+tve_get_node_index(d)),range.setStart(d.parentNode,1+tve_get_node_index(d)),range.setEnd(d.parentNode,1+tve_get_node_index(d)),tve_is_empty_line_break(d)&&(range.insertNode(document.createElement("br")),c.collapse(d.parentNode,1+tve_get_node_index(d)),range.setStart(d.parentNode,1+tve_get_node_index(d)),range.setEnd(d.parentNode,1+tve_get_node_index(d)))}}function get_parent_block_element(a){return tag_name=jQuery(a).get(0).tagName,-1!=block_tags.indexOf(tag_name)?a:a.parents(block_tags).first()}function load_control_panel_menu(a,b){hide_control_panel_menu();var c,d,e=jQuery(".edit_mode"),f=e.offset(),g=e.outerHeight(),h=jQuery(".tve_secondLayer, #"+b+"_menu,.tve_secondLayer .tve_clear"),i=jQuery("body").offset().top,j=jQuery(".tve_cpanel_onpage").removeClass(function(a,b){var c=b.split(" "),d="";return jQuery.each(c,function(a,b){("tve-after-element"===b||0===b.indexOf("menu_elem_")||"tve_menu_visible"==b)&&(d+=(d?" ":"")+b)}),d}).addClass("menu_elem_"+b).attr("style","");isNaN(i)&&(i=0),"landing_page"==b&&setTimeout(function(){j.addClass("tve_menu_visible")},100),"img"===b?(h.find(".tve_hidden_feature_grid")[e.parents(".thrv_feature_grid .tve_gri").length?"hide":"show"](),h.find(".tve_hidden_borderless")[e.parents(".fwi").length?"hide":"show"]()):"icon"===b?(h.find(".tve_hide_cb")[e.parent().hasClass("tve_cb_symbol")?"hide":"show"](),e.find("> .tve_sc_text").length?(h.find(".tve_text_ctrl").show(),h.find(".tve_icon_ctrl").hide()):(h.find(".tve_icon_ctrl").show(),h.find(".tve_text_ctrl").hide())):"contentbox"===b?h.find(".tve_symbol_ctrl")[e.find("> .tve_cb_symbol").length?"show":"hide"]():"testimonial"===b&&h.find("#testimonial_image_btn")[e.find(".tve_ts_o img").length?"show":"hide"](),tve_upgrade_element(b),jQuery.when(j.show(),h.show()).done(function(){if("landing_page"!=b)if(c=j.outerHeight(),"lightbox"==b)d=jQuery(".tve_p_lb_content").position().top-10-c,j.css("top",(i>d?i:d)+"px");else{d=f.top-10-c-i,"landing_page_content"==b&&(d=f.top-i),i>d&&(d=f.top+g-i+10,j.addClass("tve-after-element"));var h=TVE_Editor_Page.getViewPort(),k=jQuery(window);g+c+i>=h.height&&(d=k.scrollTop()+TVE_Editor_Page.mouseClickAt().y-f.top,d=f.top+d),j.css("top",d+"px"),k.scrollTop()>d&&jQuery("html,body").animate({scrollTop:d-20})}if(load_button_values(e,b),"text"===b&&e.text()===e.data("default")?setTimeout(function(){var b=rangy.createRange();b.selectNodeContents(a),rangy.getSelection().setSingleRange(b)},1):"tabs"===b&&(e.find("> .tve_vtabs").length?jQuery("#vtabs_menu_width").show():jQuery("#vtabs_menu_width").hide()),"text"===b){var l=0;e.on("keyup",function(){clearTimeout(l),l=setTimeout(function(){var a,b=rangy.getSelection();b&&b.anchorNode&&(a=b.anchorNode.parentNode)&&(jQuery(a).is("a")?tve_edit_hyperlinks({target:a}):tve_hide_hyperlink_options())},200)}),e.is("li")?jQuery("#"+b+"_menu").find(".tve_margin_control").hide():jQuery("#"+b+"_menu").find(".tve_margin_control").show()}}),TVE_Content_Builder.colors.on_menu_show(b,tve_get_shortcode_wrapper_click(a))}function hide_control_panel_menu(){jQuery(".tve_cpanel_onpage, .tve_secondLayer, .tve_secondLayer>div").removeClass("tve_menu_visible").hide(),jQuery("html,body").tve_css("overflow-x","")}function display_element_right_menu(a,b,c,d){jQuery(".active_delete, .active_duplicate").removeClass("active_delete active_highlight"),jQuery(a).addClass("active_delete");var e=jQuery("#delete_icon");delete_icon_width=20,delete_icon_height=20,e.css("left",b+d-delete_icon_width+"px"),e.css("top",c+"px"),40>d&&e.css("left",b+d-10+"px"),e.show()}function display_element_left_menu(a,b,c){jQuery(".active_duplicate, .active_highlight").removeClass("active_duplicate active_highlight"),jQuery(a).addClass("active_duplicate");var d=jQuery("#duplicate_icon");duplicate_icon_height=20,d.css("left",b+"px"),d.css("top",c+"px"),element_width<40&&d.css("left",b-10+"px"),d.show()}function hide_element_right_menu(){jQuery("#delete_icon").hide(),jQuery(".active_delete,.active_highlight").removeClass("active_delete active_highlight")}function hide_element_left_menu(){jQuery("#duplicate_icon").hide(),jQuery(".active_duplicate,.active_highlight").removeClass("active_duplicate active_highlight")}function add_element_menu_icons(){jQuery("html").prepend("<div id='delete_icon' class='tve_icm tve-ic-close'></div>").prepend("<div id='duplicate_icon' class='tve_icm tve-ic-copy'></div>")}function getBlockContainer(a){for(;a;){if(1==a.nodeType&&/^(A|P|H[1-6]|DIV|OL|UL|LI|PRE|ADDRESS|BLOCKQUOTE)$/i.test(a.nodeName))return a;a=a.parentNode}}function get_text_after_cursor(){var a=rangy.getSelection();if(a.rangeCount){var b=a.getRangeAt(0),c=getBlockContainer(b.endContainer);if(c){var d=b.cloneRange();return d.selectNodeContents(c),d.setStart(b.endContainer,b.endOffset),d.extractContents()}}}function get_cursor_offset(){return sel=rangy.getSelection(),sel.rangeCount?(selRange=sel.getRangeAt(0),selRange.startOffset):void 0}function tve_get_shortcode_wrapper_hover(a){if(jQuery(a).is(".thrv_wrapper"))return a;var b=jQuery(a).parents(".thrv_wrapper, .tve_faq").first();return 0!==b.length?b:!1}function tve_get_shortcode_wrapper_click(a){if(a=jQuery(a),a.is(".thrv_wrapper,img")||a.hasClass("tve_p_lb_control")||a.hasClass("tve_wrap_all"))return a;var b=jQuery(a).parents(".thrv_wrapper").first();return 0!==b.length?b:!1}function duplicate_element(a){var b=a.clone();a.after(b),tve_clone_custom_styles(a,b),tve_clone_remove_id(b),TVE_Content_Builder.drag.after_clone(a,b)}function hide_menu_icons(){jQuery("#delete_icon, #duplicate_icon").hide()}function tve_add_notification(a,b,c){error_box=jQuery("#tve_notification_box").show(0),-1===b?jQuery(error_box).addClass("tve_warning_box"):b?jQuery(error_box).addClass("tve_error_box"):jQuery(error_box).removeClass("tve_error_box tve_warning_box"),"undefined"==typeof c&&(c=2e3),-1===b?jQuery(error_box).html(a):jQuery(error_box).text(a),jQuery(error_box).animate({left:100},700),setTimeout(function(){jQuery(error_box).animate({left:-950},700)},c)}function tve_editor_init(a,b){a.preventDefault();var c=rangy.getSelection();if(c.toString().length||b.is(".tve_not_editable"))return!1;var d,e,f=jQuery(a.target),g=jQuery(a.currentTarget);if(TVE_Editor_Page.SHIFT_KEY){for(d=e=b;!e.is(TVE_Editor_Page.editor)&&!e.is("html");)e.is(editable_elements)&&(d=e),e=e.parent();d.is(b)||(f=g=b=d)}if(f.is(block_editing_elements)&&g.is(block_editing_elements)){if(!f.is(".tve_cc_logo")&&!f.is(".thrv_custom_html_shortcode *"))return!1;b=tve_get_shortcode_wrapper_click(a.target),a.target=b}a.preventDefault(),f.hasClass("edit_mode")?(f.is("a")||tve_hide_hyperlink_options(),a.stopPropagation()):(convert_element_into_edit_mode(b,a),jQuery(document).on("click.clearFocus",document,clearFocus),jQuery(".edit_mode").on("click.editHyperlinks","a",tve_edit_hyperlinks)),TVE_Editor_Page.restoreMenu(),TVE_Editor_Page.CPANEL_OPEN=!0}function tve_filter_paste(a){function b(a){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(a)||/class="OutlineElement/.test(a)||/id="?docs\-internal\-guid\-/.test(a)}var c=a.html().replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"");if(c=c.replace(/<br class="?Apple-interchange-newline"?>/gi,""),b(c)){var d=[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}]];jQuery.each(d,function(a,b){c=b.constructor==RegExp?c.replace(b,""):c.replace(b[0],b[1])})}return jQuery.htmlClean(c,{removeTags:["span","div"],removeAttrs:["class","style"]})}function tve_get_window_editor_content(){var a=jQuery("<div></div>").html(TVE_Editor_Page.editor.html());return a.find(".tve_placeholder, .tve-ui-helper, .rangySelectionBoundary").remove(),a.html()}function tve_set_window_content_before_action(){window.beforeMove=tve_get_window_editor_content()}function tve_set_window_content_after_action(a){"undefined"==typeof a&&(a=!1),tve_add_undo_action(window.beforeMove,tve_get_window_editor_content(),a)}function tve_add_undo_action(a,b,c){a!=b&&tve_undoManager.add({undo:function(){tve_restore_editor_content(a,c)},redo:function(){tve_restore_editor_content(b,c)}})}function tve_restore_editor_content(a,b){TVE_Editor_Page.editor.html(a),jQuery(TVE_Editor_Page).trigger("editor.onundo"),"undefined"!=typeof b&&b&&(clearFocus({forceExit:!0}),hide_control_panel_menu())}function tve_copy_style(a,b){b.attr("style",a.attr("style"))}function tve_is_empty_line_break(a){for(var b=a.parentNode;"inline"==jQuery.getComputedStyle(b).display;)b=b.parentNode;var c={height:b.style.height,maxHeight:b.style.maxHeight,minHeight:b.style.minHeight};b.style.height="auto",b.style.maxHeight="none",jQuery.browser.msie&&jQuery.browser.version<8||(b.style.minHeight="0");var d=document.createTextNode("​"),e=b.offsetHeight;if(0==e)throw"isCollapsedLineBreak: original height is zero, bug?";a.parentNode.insertBefore(d,a.nextSibling);var f=b.offsetHeight;return d.parentNode.removeChild(d),b.style.height=c.height,b.style.maxHeight=c.maxHeight,jQuery.browser.msie&&jQuery.browser.version<8||(b.style.minHeight=c.minHeight),f-5>e}function tve_get_node_index(a){for(var b=0;a=a.previousSibling;)b++;return b}function tve_add_css_rule(a,b,c){try{var d,e=tve_stylesheet.cssRules?tve_stylesheet.cssRules:tve_stylesheet.rules,f="",g=!1;for(d=0;d<e.length;d++)e[d].selectorText===a&&(f+=e[d].style.cssText,g=!0);g&&(tve_remove_css_rule(a),b=f+b),tve_stylesheet.insertRule?tve_stylesheet.insertRule(a+"{"+b+"}",c):tve_stylesheet.addRule(a,b,c)}catch(h){txt=tve_path_params.translations.ErrorOnThisPage+"\n\n",txt+=tve_path_params.translations.ErrorDescription+": "+h.message+"\n\n",txt+=tve_path_params.translations.ClickOkToContinue+"\n\n",alert(txt)}}function tve_direct_css_insert(a){tve_stylesheet.insertRule?tve_stylesheet.insertRule(a,0):tve_stylesheet.addRule(a,0)}function tve_clone_custom_styles(a,b){var c=new Array;b.find("[data-tve-custom-colour]").each(function(){if(css_id=jQuery(this).attr("data-tve-custom-colour"),!css_id)return!0;if(-1==c.indexOf(css_id)){css_rules=new Array,css_rules=tve_return_css_rule(css_id),new_unique_id=tve_get_unique_css_identifier(jQuery(this),!1);for(var a=0;a<css_rules.length;a++)new_css_rule=css_rules[a].replace(css_id,new_unique_id),tve_direct_css_insert(new_css_rule);jQuery(b).find("[data-tve-custom-colour='"+css_id+"']").each(function(){-1==c.indexOf(jQuery(this).attr("data-tve-custom-colour"))&&jQuery(this).attr("data-tve-custom-colour",new_unique_id)}),c.push(css_id)}})}function tve_clone_remove_id(a){a.attr("id","")}function tve_remove_css_rule(a,b,c,d){"undefined"==typeof c&&(c=""),"undefined"==typeof d&&(d="");var e=tve_stylesheet.cssRules?tve_stylesheet.cssRules:tve_stylesheet.rules,f='[data-tve-custom-colour="'+a+'"]'+c,g="[data-tve-custom-colour='"+a+"']"+c;for(f=d+f,g=d+g,tve_stylesheet.crossdelete=tve_stylesheet.deleteRule?tve_stylesheet.deleteRule:tve_stylesheet.removeRule,i=0;i<e.length;i++)-1!==e[i].selectorText.indexOf(a)&&(e[i].selectorText==f||e[i].selectorText==g||e[i].selectorText==a)&&("undefined"!=typeof b&&b?jQuery.each(b.split(" "),function(a,b){e[i].style.removeProperty?e[i].style.removeProperty(b):e[i].style.removeAttribute&&e[i].style.removeAttribute(b)}):(tve_stylesheet.crossdelete(i),i--))}function tve_return_css_rule(a){selector='[data-tve-custom-colour="'+a+'"]';var b=tve_stylesheet.cssRules?tve_stylesheet.cssRules:tve_stylesheet.rules;for(tve_stylesheet.crossdelete=tve_stylesheet.deleteRule?tve_stylesheet.deleteRule:tve_stylesheet.removeRule,matching_rules=new Array,i=0;i<b.length;i++)-1!=b[i].selectorText.toLowerCase().indexOf(a)&&matching_rules.push(b[i].cssText);return matching_rules}function tve_extract_stylesheet_rules(){for(var a,b=tve_stylesheet.cssRules?tve_stylesheet.cssRules:tve_stylesheet.rules,c="",d=[],e=0;e<b.length;e++)a=b[e].selectorText.replace(":hover",""),-1===d.indexOf(b[e].selectorText)&&jQuery(a).length&&(c=c+b[e].cssText+"\n",d.push(b[e].selectorText));return c}function tve_extract_stylesheet_rules_filtered(a){if(!a||!a.length)return"";for(var b=tve_stylesheet.cssRules?tve_stylesheet.cssRules:tve_stylesheet.rules,c="",d=0;d<b.length;d++)for(var e,f=0;e=a[f++];)-1!==b[d].selectorText.indexOf(e)&&(c=c+b[d].cssText+"\n");return c}function tve_get_unique_css_identifier(a,b){return jQuery(a).attr("data-tve-custom-colour")&&b?jQuery(a).attr("data-tve-custom-colour"):(rand_id=Math.floor(1e8*Math.random()+1),jQuery(a).attr("data-tve-custom-colour",rand_id),rand_id)}function tve_remove_custom_colours(a){tve_remove_css_rule(a.tve_color_selector()),a.is("img")&&a.removeAttr("data-tve-custom-colour"),jQuery(a).find("[data-tve-custom-colour]").each(function(){var a=jQuery(this);tve_remove_css_rule(a.tve_color_selector()),a.removeAttr("data-tve-custom-colour")}),a.tve_remove_hover()}function escapeHTML(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function modify_selector_edit_mode(a){for(var b=a.split(","),c=0;c<b.length;c++)b[c]=b[c].replace(/^\s*|\s*$/g,""),b[c]=".edit_mode "+b[c];return b.join(",")}function replaceAll(a,b,c){return c.replace(new RegExp(escapeRegExp(a),"g"),b)}function escapeRegExp(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function tve_process_saved_template(a,b){if(b.find(".edit_mode").removeClass("edit_mode"),b.find(".tve_sc_icon").length&&!jQuery("#thrive_icon_pack").length&&tve_path_params.icon_pack_css&&jQuery('<link id="thrive_icon_pack" rel="stylesheet" type="text/css" href="'+tve_path_params.icon_pack_css+'">').appendTo("head"),!jQuery.trim(a))return b;var c=b.wrapAll("<div></div>").parent();a=jQuery.trim(a);for(var d=a.match(/[^{}]+(?=\})/g),e=a.match(/\[(.*?)\]([^\{]*)/g),f={},g=0;g<e.length;g++){var h=e[g].match(/\[data-tve-custom-colour=([^0-9]{1,1})(\d+)('|")\]/);if(h&&!(h.length<3)){var i="undefined"!=typeof f["code"+h[2]]?f["code"+h[2]]:tve_get_unique_css_identifier(c.find('[data-tve-custom-colour="'+h[2]+'"]'),!1),j=e[g].replace(h[2],i);tve_add_css_rule(j,d[g],0),f["code"+h[2]]=i}}if(b.hasClass("thrv_widget_menu")){var k=TVE_Editor_Page.thriveShrtcodeConfig(b.find(".thrive-shortcode-config"),"widget_menu"),l=k.get();jQuery.each(["ul_attr","top_link_attr","link_attr","trigger_attr"],function(a,b){l[b]&&f["code"+l[b]]&&(l[b]=f["code"+l[b]])}),k.save(l)}return b.unwrap()}function tve_change_shortcode_alignment(a,b){var c=get_shortcode_type_from_edit_mode(b);switch(c){case"button":b.removeClass("tve_leftBtn tve_centerBtn tve_rightBtn tve_fullwidthBtn").addClass(a);break;case"content_container":b.find("> .tve_content_inner").removeClass("tve_left tve_right tve_center").addClass(a.replace(/CC/,""));break;case"table":var d="tve_align_left tve_align_center tve_align_right tve_align_justify";
a.match(new RegExp("valign"))&&(d="tve_valign_top tve_valign_middle tve_valign_bottom"),b.find("th,td").removeClass(d).addClass(a.replace(/_table/,""));break;case"table_cell":var d="tve_align_left tve_align_center tve_align_right tve_align_justify";a.match(new RegExp("valign"))&&(d="tve_valign_top tve_valign_middle tve_valign_bottom"),b.removeClass(d).addClass(a);break;case"rating":b.children(".tve_rating_stars").removeClass("tve_leftBtn tve_centerBtn tve_rightBtn").addClass(a);break;case"lead_generation_input":case"lead_generation_dropdown":case"lead_generation_textarea":b.css("max-width","").css("width",""),"tve_reset_height"===a&&b.css("max-height","").css("height",""),load_button_values(b,c);break;case"lead_generation":b.removeClass("tve_leftBtn tve_centerBtn tve_rightBtn"),"tve_fullwidthBtn"===a?b.css("max-width",""):b.addClass(a),load_button_values(b,c);break;default:b.removeClass("tve_leftBtn tve_centerBtn tve_rightBtn tve_fullwidthBtn").addClass(a)}}function tve_change_shortcode_colour(a,b){if(element_type=get_shortcode_type_from_edit_mode(b),"text"==element_type){var c=this.parents(".tve_highlight_control").length?"background":"foreground";tve_change_colour(this,c)}else"tw_qs"===element_type?tve_remove_custom_colours(b):"widget_menu"===element_type?(tve_remove_custom_colours(b),b.tve_widget_menu().color_class(a)):(shortcode=get_element_from_wrapper(b,element_type),shortcode.removeClass(colours_class_selector).addClass(a),tve_remove_custom_colours(b),tve_after_apply_custom_color(shortcode,a));window.last_colour_used=a,TVE_Content_Builder.colors.refresh()}function get_element_from_wrapper(a,b){switch(b){case"button":return jQuery(a).find(".tve_btn");case"contentbox":return jQuery(a).find(".tve_cb").first();case"guarantee":return jQuery(a).find(".tve_fg");case"calltoaction":return jQuery(a).find(".tve_ca, .tve_btn");case"testimonial":return jQuery(a).find(".tve_ts");case"bullets":return jQuery(a).find(".tve_ul");case"tabs":return jQuery(a).find("> .tve_scT");case"pricingtable":return a;case"table":return a.find("table.tve_table").first();case"content_container":return a.find("> .tve_content_inner");case"lightbox":return a.parents(".tve_p_lb_content").first();case"icon":return a.find("span.tve_sc_icon").first()}return a}function get_shortcode_type_from_edit_mode(a){return a.hasClass("thrv_button_shortcode")?"button":a.hasClass("thrv_contentbox_shortcode")?"contentbox":a.hasClass("thrv_contents_table")?"contents_table":a.hasClass("thrv_guarantee_shortcode")?"guarantee":a.hasClass("thrv_calltoaction_shortcode")?"calltoaction":a.hasClass("thrv_testimonial_shortcode")?"testimonial":a.hasClass("thrv_bullets_shortcode")?"bullets":a.hasClass("thrv_tabs_shortcode")?"tabs":a.hasClass("thrv_toggle_shortcode")?"toggle":a.hasClass("tve_prt")?"pricingtable":a.hasClass("thrv_content_container_shortcode")?"content_container":a.hasClass("thrv_table")?"table":a.hasClass("tve_table_cell")?"table_cell":a.hasClass("tve_image")?"image":a.hasClass("thrv_icon")||a.hasClass("tve_sc_icon")?"icon":a.is(text_elements)?"text":a.hasClass("thrv_star_rating")?"rating":a.hasClass("thrv_tw_qs")?"tw_qs":a.hasClass("thrv_lead_generation")?"lead_generation":a.hasClass("tve_lg_input")?"lead_generation_input":a.hasClass("tve_lg_image_submit")?"lead_generation_image_submit":a.hasClass("tve_lg_submit")?"lead_generation_submit":a.hasClass("tve_lg_checkbox")?"lead_generation_checkbox":a.hasClass("tve_lg_dropdown")?"lead_generation_dropdown":a.hasClass("tve_lg_radio")?"lead_generation_radio":a.hasClass("tve_lg_textarea")?"lead_generation_textarea":a.hasClass("thrv_widget")?"widget":a.hasClass("tve_p_lb_control")?"lightbox":a.hasClass("thrv_widget_menu")?"widget_menu":void 0}function tve_wrap_element_tags(a,b,c){var d=jQuery(b+a.html()+c);a.replaceWith(d),TVE_Content_Builder.drag.bind_draggable(d)}function tve_save_post(a,b,c){var d=filter_content_pre_save(),e=tve_transform_more_tags(),f=tve_extract_stylesheet_rules(),g=window.tve_custom_colours,h=tve_get_custom_css();jQuery("#pre_save_filter_wrapper").html("");var i={action:tve_path_params.save_post_action,tve_content:d,tve_content_more:e,post_id:tve_path_params.post_id,security:tve_path_params.tve_ajax_nonce,update:a,inline_rules:f,custom_colours:g,tve_custom_css:h,tve_landing_page:tve_path_params.landing_page?tve_path_params.landing_page:"",custom_font_classes:[],tve_globals:{},tve_global_scripts:tve_path_params.tve_global_scripts?tve_path_params.tve_global_scripts:{},has_icons:0,page_events:tve_path_params.page_events};tve_path_params.custom_post_data&&jQuery.each(tve_path_params.custom_post_data,function(a,b){i[a]=b}),tve_path_params.tve_globals.js_sdk=[],TVE_Editor_Page.editor.find(".thrv_social").each(function(){jQuery.each(jQuery(this).tve_social().getRequiredSDKs(),function(a,b){tve_path_params.tve_globals.js_sdk.push(b)})}),tve_path_params.social_fb_app_id&&(i.social_fb_app_id=tve_path_params.social_fb_app_id),jQuery.each(tve_path_params.tve_globals,function(a,b){a&&(i.tve_globals[a]=b)}),custom_font_classes&&jQuery.each(custom_font_classes.split(" "),function(a,b){(TVE_Editor_Page.editor.find("."+b).length||TVE_Content_Builder.landing_fonts&&TVE_Content_Builder.landing_fonts.fontUsed(b))&&i.custom_font_classes.push(b)}),"undefined"!=typeof c&&jQuery.each(c,function(a,b){i[a]=b}),jQuery(".tve_sc_icon:not(.tve_sc_text)").length&&(i.has_icons=1),jQuery(".tve_post_grid_masonry").length&&(i.tve_has_masonry=1),TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,i,function(c){if(a)if("1"===c||parseInt(c)>1)parseInt(c)>1&&jQuery("#tve_revision_manager").tve_revision_manager({last_revision:parseInt(c)}),tve_add_notification(tve_path_params.translations.AllChangesSaved);else{var d=tve_path_params.translations.ChangesCouldNotBeSaved;switch(c){case"-2":d=tve_path_params.translations.NotSufficientPermissions;break;case"0":d=tve_path_params.translations.YouHaveBeenLoggedOut,tve_path_params.nonce_interval=tve_update_nonce(tve_path_params.nonce_interval);break;default:c&&(d=tve_path_params.translations.SomethingWentWrong)}tve_add_notification(d,!0,1e4)}"function"==typeof b?b():TVE_Editor_Page.overlay("close")}),TVE_Editor_Page.disableSaveWarning(),TVE_Editor_Page.enableSaveWarning(),tve_undoManager.clear()}function tve_update_nonce(a){clearInterval(a);var b=setInterval(function(){var a={action:"tve_logged_user_nonce"};jQuery.post(tve_path_params.ajax_url,a,function(a){"object"==typeof a&&a.nonce&&(clearInterval(b),tve_path_params.tve_ajax_nonce=a.nonce)},"json")},2e3);return b}function tve_save_post_extra(a,b,c){"undefined"==typeof b&&(b={}),b.action="tve_save_post",b.custom_action=a,b.post_id=tve_path_params.post_id,b.security=tve_path_params.tve_ajax_nonce,b.tve_globals=tve_path_params.tve_globals,b.tve_global_scripts=tve_path_params.tve_global_scripts,TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,b,function(a){parseInt(a)>1&&jQuery("#tve_revision_manager").tve_revision_manager({last_revision:parseInt(a)}),"function"==typeof c?c(a):TVE_Editor_Page.overlay("close")})}function tve_change_style_family(a){tve_save_post(!1);var b={action:"tve_change_style_family",style_family:a,post_id:tve_path_params.post_id,security:tve_path_params.tve_ajax_nonce},c=jQuery("#tve_editor").parent();jQuery("#tve_style_family_"+c.attr("id")+"-css").attr("href",tve_path_params.style_families[a]),tve_path_params.tve_loaded_stylesheet=a,c.removeClass("tve_flt tve_clsy tve_min").addClass(tve_path_params.style_classes[a]),jQuery.post(tve_path_params.ajax_url,b,function(a){})}function load_button_values(a,b){var c=jQuery("#"+b+"_menu");switch(b){case"button":handle_custom_classes(a),handle_custom_fonts(a.find("a.tve_btnLink"),c),jQuery("#button_cc_icons").prop("checked",0!=a.find(".thrv_cc_icons").length);var d=tve_handle_integer_or_float(a.find("a.tve_btnLink").css("font-size"));c.find(".tve_font_size").val(d),a.is(".tve_btn")||(a=get_element_from_wrapper(a,b)),jQuery("#buttonText").val(jQuery.trim(a.find("a").text())),jQuery("#buttonLink").val(a.find("a").attr("href")),"_blank"==a.find(".tve_btnLink").attr("target")?jQuery("#btn_link_new_window").prop("checked",!0):jQuery("#btn_link_new_window").prop("checked",!1),"nofollow"==a.find(".tve_btnLink").attr("rel")?jQuery("#btn_nofollow").prop("checked",!0):jQuery("#btn_nofollow").prop("checked",!1);for(var e=1;8>=e;e++)if(a.hasClass("tve_btn"+e)){tve_set_selected_dropdown(c.find("li#tve_btn"+e));break}jQuery.each("tve_smallBtn tve_normalBtn tve_bigBtn tve_hugeBtn".split(" "),function(b,d){return a.hasClass(d)?(tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),jQuery("#tve_icon_button_font_size").val(parseInt(a.find("i").first().css("font-size"))),jQuery("#tve_icon_button_font_size_slider").slider("value",parseInt(a.find("i").first().css("font-size"))),jQuery("#tve_image_button_size_input").val(parseInt(a.find("i").first().css("width"))),jQuery("#tve_button_image_size_slider").slider("value",parseInt(a.find("i").first().css("width")));break;case"calltoaction":jQuery("#call_to_action_url").val(a.find("a.tve_btnLink").attr("href")),"_blank"==a.find("a.tve_btnLink").attr("target")?jQuery("#cta_link_new_window").prop("checked",!0):jQuery("#cta_link_new_window").prop("checked",!1),"nofollow"==a.find("a.tve_btnLink").attr("rel")?jQuery("#cta_nofollow").prop("checked",!0):jQuery("#cta_nofollow").prop("checked",!1);break;case"img":jQuery(a).parent().is("a")?(c.find(".tve_quick_link_input").val(jQuery(a).parent().attr("href")),c.find(".lb_quick_link_target").prop("checked","_blank"==jQuery(a).parent().attr("target")?!0:!1),c.find(".lb_quick_link_no_follow").prop("checked","nofollow"==jQuery(a).parent().attr("rel")?!0:!1)):(c.find(".tve_quick_link_input").val(""),c.find(".quick_link_content_table").html(""),c.find(".lb_quick_link_target").prop("checked",tve_path_params.lb_ql_link_target),c.find(".lb_quick_link_no_follow").prop("checked",tve_path_params.lb_ql_no_follow));var f=a.tve_image(),g=a.css("width"),h=a.css("height"),i=!1,j=parseInt(a.css("borderLeftWidth"));if(g){var k=a.closest(".thrv_wrapper").parent().width(),l=parseInt(f.e.css("margin-left")),m=parseInt(f.e.css("margin-right"));k=isNaN(l)?k:k-l,k=isNaN(m)?k:k-m,g>k&&(g=k),jQuery("#image_width_input").val(g),jQuery("#tve_img_size_slider").slider("option","max",k).slider("value",parseInt(g))}a.attr("width",parseInt(g)),a.attr("height",parseInt(h)),jQuery("#image_border_width").val(isNaN(j)?"0":j),jQuery("#img_alt_att").val(a.attr("alt")),jQuery("#img_title_att").val(a.attr("title")),handle_custom_classes(a),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0),jQuery.each(img_styles.split(" "),function(a,b){return f.hasStyle(b)?(tve_set_selected_dropdown(c.find("li#"+b)),!1):void 0}),f.hasStyle("__none__")&&tve_set_selected_dropdown(c.find("li.img_style").last());break;case"text_inline_only":var d=tve_handle_integer_or_float(a.css("font-size"));c.find(".tve_font_size").val(d),jQuery(".element_id").val(a.attr("id")),handle_custom_fonts(a,c);break;case"text":var n=jQuery(".tve_active_hyperlink");n?(c.find(".tve_quick_link_input").val(jQuery(n).attr("href")),c.find(".lb_quick_link_target").prop("checked","_blank"==jQuery(n).attr("target")?!0:!1),c.find(".lb_quick_link_no_follow").prop("checked","nofollow"==jQuery(n).attr("rel")?!0:!1)):(c.find(".tve_quick_link_input").val(""),c.find(".quick_link_content_table").html(""),c.find(".lb_quick_link_target").prop("checked",tve_path_params.lb_ql_link_target),c.find(".lb_quick_link_no_follow").prop("checked",tve_path_params.lb_ql_no_follow));var d=tve_handle_integer_or_float(a.css("font-size"));c.find(".tve_font_size").val(d),c.find(".element_id").val(a.attr("id")),jQuery.each("p address pre blockquote h1 h2 h3 h4 h5 h6".split(" "),function(b,d){return a.is(d)?(tve_set_selected_dropdown(c.find('li.tve_block_change[data-tag="'+d+'"]')),!1):void 0}),handle_custom_classes(a),handle_custom_fonts(a,c);break;case"cc_icons":jQuery(".cc_checkbox").prop("checked",!1),a.find(".tve_cc_logo:visible").each(function(){for(cc_type=jQuery(this).attr("class"),cc_type_array=cc_type.split(" "),e=0;e<cc_type_array.length;e++)"tve_cc_logo"!=cc_type_array[e]&&"tve_no_edit"!=cc_type_array[e]&&(card_type=cc_type_array[e].substring(4),jQuery("#"+card_type).prop("checked",!0))});break;case"pricing_table":handle_custom_classes(a),TVE_Content_Builder.controls.pricing_table.highlight_btn(c.find(".tve_btn_highlight"),a);break;case"table":a=get_element_from_wrapper(a,"table");var j=parseInt(a.css("borderLeftWidth")),o=parseInt(a.find("td,th").first().css("paddingTop")),p=parseInt(a.find("td,th").first().height()),i=!1;jQuery("#table_border_width").val(isNaN(j)?"0":j),jQuery("#table_cell_padding").val(isNaN(o)?"5":o),jQuery("#table_outer_border").prop("checked",a.hasClass("tve_no_border")?!1:!0),jQuery("#table_inner_border").prop("checked",a.hasClass("tve_no_inner_border")?!1:!0);var q=!1;a.find("th,td").each(function(){var a=jQuery(this);return a.tve_rowspan()>1||a.tve_colspan()>1?(q=!0,!1):void 0}),jQuery("#table_make_sortable").prop("checked",!q&&a.hasClass("tve_make_sortable")).prop("disabled",q),jQuery("#table_row_height").val(isNaN(p)?0:p),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);break;case"table_cell":var j=parseInt(a.css("borderLeftWidth")),r=a.width(),s=a.height();jQuery("#table_cell_border_width").val(isNaN(j)?"0":j),jQuery("#table_cell_width").val(r),jQuery("#table_cell_height").val(s);break;case"page_section":jQuery("#tve_page_section_bg_fixed").prop("checked",a.find("> .out.pswr > .in.pdwbg").length?!0:!1),jQuery("#tve_page_section_auto_height").prop("checked",a.find("> .out.pswr > .in.pdfbg").length?!0:!1),jQuery("#tve_page_section_tmg").prop("checked",a.find("> .out.tmg").length?!0:!1),jQuery("#tve_page_section_bmg").prop("checked",a.find("> .out.bmg").length?!0:!1),c.find(".element_id").val(a.attr("id"));break;case"thrive_leads_shortcode":var t=a.tve_thrive_leads_shortcode();tve_set_selected_dropdown(c.find('li.tve-o-leads-shortcode[data-value="'+t.config().id+'"]'));break;case"thrive_optin":var t=a.tve_thrive_optin();jQuery("#tve_thrive_optin_text").val(t.config().text),tve_set_selected_dropdown(c.find('li.tve-o-optin[data-value="'+t.config().optin+'"]')),tve_set_selected_dropdown(c.find('li.tve-o-layout[data-value="'+t.config().layout+'"]')),tve_set_selected_dropdown(c.find('li.tve-o-color[data-value="'+t.config().color+'"]')),tve_set_selected_dropdown(c.find('li.tve-o-size[data-value="'+t.config().size+'"]'));break;case"content_container":handle_custom_classes(a,c),c.find(".element_id").val(a.attr("id")),a.is(".tve_content_inner")||(a=get_element_from_wrapper(a,b));var g=parseInt(a.css("width"));isNaN(g)||c.find("#content_container_width_input").val(g).trigger("change");break;case"content_reveal":var j=parseInt(a.attr("data-after")),u=jQuery("#content_reveal_menu .content_reveal_after");u.filter(".seconds").val(j%60),u.filter(".minutes").val(Math.floor(j/60)).trigger("change"),jQuery("#content_reveal_redirect_url").val(a.attr("data-redirect-url"));break;case"bullets":a=get_element_from_wrapper(a,b);for(var e=1;6>=e;e++)if(a.hasClass("tve_ul"+e)){tve_set_selected_dropdown(c.find("li#tve_ul"+e));break}break;case"feature_grid":for(var e=1;3>=e;e++)if(a.hasClass("tve_gr"+e)){tve_set_selected_dropdown(c.find("li#tve_gr"+e));break}break;case"countdown_timer_evergreen":var v=a.tve_countdown_timer_evergreen(),w=a.attr("data-norestart");c.find("#ct_day").val(v.get("day")),c.find("#ct_hour").val(v.get("hour")),c.find("#ct_min").val(v.get("min")),c.find("#ct_sec").val(v.get("sec")),c.find("#ct_text").val(v.get("text")),c.find("#ct_expday").val(v.get("expday")),c.find("#ct_exphour").val(v.get("exphour")),0==w||null==w?(c.find("#ct_no_restart").prop("checked",!1),c.find(".tve_countdown_time").show(0)):(c.find("#ct_no_restart").prop("checked",!0),c.find(".tve_countdown_time").hide(0)),c.find(".tve_input_translatable").each(function(){var b=jQuery(this),c=a.find(b.data("args")).text();b.val(c)});break;case"countdown_timer":var v=a.tve_countdown_timer();c.find("#ct_date").val(v.get("date")),c.find("#ct_hour").val(v.get("hour")),c.find("#ct_min").val(v.get("min")),c.find("#ct_text").val(v.get("text")),c.find(".tve_input_translatable").each(function(){var b=jQuery(this),c=a.find(b.data("args")).text();b.val(c)});break;case"thrive_posts_list":var x=a.tve_thrive_posts_list();c.find("#posts_list_no_posts").val(x.config().no_posts),c.find("#posts_list_filter").val(x.config().filter),c.find("#posts_list_category").val(x.config().category),c.find("#posts_list_thumbnails").prop("checked","off"!=x.config().thumbnails);break;case"thrive_custom_phone":var x=a.tve_thrive_custom_phone();c.find("#custom_phone_color").val(x.config().color),c.find("#custom_phone_no").val(x.config().phone_no),c.find("#custom_phone_text").val(x.config().phone_text),c.find("#custom_mobile_phone_text").val(x.config().mobile_phone_text);break;case"thrive_custommenu":var x=a.tve_thrive_custom_menus();c.find("#custom_menu_menu").val(x.config().menu),c.find("#custom_menu_thumbnails").prop("checked","off"!=x.config().thumbnails);break;case"responsive_video":var y=a.tve_responsive_video(),z=y.config("url"),b=y.config("type");"undefined"==typeof y.config("type")&&(b="youtube",y.set(b,"type")),c.find(".responsive_video_option").each(function(){var a=jQuery(this);-1!==a.attr("data-apply-to").indexOf(b)?a.css("display","block"):a.css("display","none")}),c.find("#responsive_video_type").val(b),c.find("#responsive_video_url").val(z),c.find("#responsive_video_start_min_time").val("undefined"==typeof y.config("start-time")?0:parseInt(y.config("start-time")/60)),c.find("#responsive_video_start_sec_time").val("undefined"==typeof y.config("start-time")?0:y.config("start-time")%60),c.find("#rv_option_rel").prop("checked","undefined"==typeof y.config("rel")?!1:"0"===y.config("rel")),c.find("#rv_option_modestbranding").prop("checked","undefined"==typeof y.config("modestbranding")?!1:"1"===y.config("modestbranding")),c.find("#rv_option_controls").prop("checked","undefined"==typeof y.config("controls")?!1:"0"===y.config("controls")),c.find("#rv_option_showinfo").prop("checked","undefined"==typeof y.config("showinfo")?!1:"0"===y.config("showinfo")),c.find("#rv_option_autoplay").prop("checked","undefined"==typeof y.config("autoplay")?!1:"1"===y.config("autoplay")),c.find("#rv_option_fs").prop("checked","undefined"==typeof y.config("fs")?!1:"0"===y.config("fs")),c.find("#rv_option_play_bar").prop("checked","undefined"==typeof y.config("play-bar")?!0:"1"===y.config("play-bar")),c.find("#rv_option_onload_controls").prop("checked","undefined"==typeof y.config("onload-controls")?!0:"1"===y.config("onload-controls"));break;case"contents_table":var A=a.tve_contents_table();c.find(".ct_heading").each(function(){var a=jQuery(this);a.prop("checked",A.config("headers").indexOf(a.val())>=0)}),c.find("#ct_columns").val(A.config("columns"));var B=parseInt(a.css("min-width")),C=a.css("max-width");c.find("#ct_min_width").val(B),c.find("#ct_max_width").val("none"!==C?parseInt(C):C);break;case"tabs":var D=a.tve_tabs().populateTabList();if(D.isVertical()){var g=a.find("ul").width();jQuery("#vtabs_width_input").val(g+"px"),jQuery("#s_vtabs_menu_width").slider("value",g)}var E=c.find("li.tve_selected_tab").eq(D.getDefaultSelected());tve_set_selected_dropdown(E,0===E.length);break;case"tw_qs":var F=a.tve_tw_qs(),G=F.config("use_custom_url");c.find("#qs_tw_via").val(F.config("via")),c.find("#qs_tw_use_custom").prop("checked",G?!0:!1).trigger("change"),c.find("#qs_tw_url").val(G?F.config("custom_url"):"");break;case"rating":var H=a.tve_rating();jQuery("#rating_value").val(H.get("value")),jQuery("#rating_max").val(H.get("max"));break;case"lead_generation_checkbox":handle_custom_classes(a);var g=parseInt(a.outerWidth()),I=parseInt(a.parent().width());c.find("#tve_lg_input").val(g+"px"),c.find("#tve_lg_checkbox_slider").slider("value",g).slider("option","max",I);var d=tve_handle_integer_or_float(a.find("label").css("font-size"));c.find(".tve_font_size").val(d);break;case"lead_generation_textarea":handle_custom_classes(a,c);var g=parseInt(a.css("width")),I=parseInt(a.parents(".thrv_lead_generation").first().css("width"));c.find("#tve_lg_textarea").val(g),c.find("#tve_lg_textarea_slider").slider("value",g).slider("option","max",I);var h=parseInt(a.css("height"));c.find("#tve_lg_textarea_height").val(h),c.find("#tve_lg_textarea_height_slider").slider("value",h);var d=tve_handle_integer_or_float(a.css("font-size"));c.find(".tve_font_size").val(d);var i=!1;c.find("#tl_textarea_border_width").val(parseInt(a.css("borderLeftWidth"))),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);break;case"lead_generation_radio":handle_custom_classes(a,c);for(var e=1;10>=e;e++)if(a.hasClass("tve_lg_column"+e)){tve_set_selected_dropdown(c.find('li[data-cls="tve_lg_column'+e+'"]'));break}var g=parseInt(a.width()),I=parseInt(a.parent().width());c.find("#tve_lg_input").val(g+"px"),c.find("#tve_lg_radio_slider").slider("value",g).slider("option","max",I);var d=tve_handle_integer_or_float(a.find("label").css("font-size"));c.find(".tve_font_size").val(d);break;case"lead_generation_dropdown":handle_custom_classes(a,c);var g=parseInt(a.css("width")),I=parseInt(a.parents(".thrv_lead_generation").first().css("width"));c.find("#tve_lg_dropdown").val(g),c.find("#tve_lg_dropdown_slider").slider("value",g).slider("option","max",I);var d=tve_handle_integer_or_float(a.css("font-size"));c.find(".tve_font_size").val(d);var i=!1;c.find("#tl_dropdown_border_width").val(parseInt(a.css("borderLeftWidth"))),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);break;case"lead_generation_input":handle_custom_classes(a,c);var g=parseInt(a.css("width")),I=parseInt(a.parents(".thrv_lead_generation").first().css("width"));c.find("#tve_lg_input").val(g),c.find("#tve_lg_input_slider").slider("value",g).slider("option","max",I);var i=!1;c.find("#tl_input_border_width").val(parseInt(a.css("borderLeftWidth"))),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);var d=tve_handle_integer_or_float(a.css("font-size"));c.find(".tve_font_size").val(d);break;case"lead_generation_submit":handle_custom_classes(a,c),handle_custom_fonts(a,c);var i=!1;c.find("#tl_button_border_width").val(parseInt(a.css("borderLeftWidth"))),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);var d=tve_handle_integer_or_float(a.css("font-size"));c.find(".tve_font_size").val(d),c.find("#lead_generation_button_text").val(a.text());var g=parseInt(a.outerWidth()),I=parseInt(a.parents(".thrv_lead_generation").first().width());c.find("#tve_lg_submit_width_input").val(g),c.find("#tve_lg_submit_button_slider").slider("value",g).slider("option","max",I);break;case"lead_generation_image_submit":handle_custom_classes(a,c);var J=parseInt(a.css("width"));c.find("#tve_lg_image_submit_width_input").val(J),c.find("#tve_lg_image_submit_width").slider("value",J);break;case"lead_generation":c.find(".tve_lg_custom_menu").hide();var d=tve_handle_integer_or_float(a.find('input[type="text"]').css("font-size"));c.find(".tve_font_size").val(d),tve_set_selected_dropdown(a.is(".thrv_lead_generation_horizontal")?c.find("#thrv_lead_generation_horizontal"):c.find("#thrv_lead_generation_vertical"));var K=c.find("#lead_generation_form_target");K.prop("checked",a.data("form-target")===K.val()),"custom-html"===a.attr("data-connection")?K.tve_css("display","block","important"):K.tve_css("display","none","important");var g=a.css("width");if(g){var k=a.closest(".thrv_wrapper").parent().width();c.find("#lead_generation_width_input").val(g),jQuery("#tve_lead_generation_size_slider").slider("option","max",k).slider("value",parseInt(g))}var L=parseInt(a.find(".tve_lg_2, .tve_lg_3, .tve_lg_input_container").outerWidth());L&&(c.find("#lead_generation_widths_input").val(L),jQuery("#tve_lead_generation_widths_slider").slider("value",L));var M={};a.find(".tve-lg-err-msg").length?M=JSON.parse(a.find(".tve-lg-err-msg").val()):(M={email:tve_path_params.translations.LeadGenerationEmail,phone:tve_path_params.translations.LeadGenerationPhone,required:tve_path_params.translations.LeadGenerationRequired},a.prepend('<input type="hidden" class="tve-lg-err-msg" value="" />'),a.find(".tve-lg-err-msg").val(JSON.stringify(M))),c.find("#tve_lg_email_error").val(M.email),c.find("#tve_lg_phone_error").val(M.phone),c.find("#tve_lg_required_error").val(M.required);break;case"contentbox":handle_custom_classes(a),c.find(".element_id").val(a.find(".tve_cb").first().attr("id"));var N=parseInt(a.find(".tve_cb").css("border-top-left-radius"));N=isNaN(N)?0:N,c.find("#border_radius_input").val(N),c.find("#tve_border_radius_slider").slider("value",N);break;case"lightbox":a=get_element_from_wrapper(a,b);var O=parseFloat(jQuery(".tve_p_lb_overlay").css("opacity")),i=!1,j=parseInt(a.css("borderLeftWidth")),P=parseInt(a.css("max-width"));parseInt(a.find("#tve-p-scroller").css("max-height"));O=isNaN(O)?80:100*O,jQuery("#lightbox_opacity_input").val(O).trigger("change"),jQuery("#lightbox_border_width").val(isNaN(j)?"0":j),jQuery("#lightbox_max_width").val(isNaN(P)?"0":P),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);break;case"landing_page":jQuery("#tve_lp_bg_fixed").prop("checked","fixed"==jQuery("body").css("background-attachment")),jQuery("#tve_strip_css").prop("checked","1"==tve_path_params.tve_globals.do_not_strip_css?!0:!1);break;case"landing_page_content":if(jQuery("#tve_lp_bg_fixed").prop("checked","fixed"==a.css("background-attachment")),jQuery("#tve_lp_auto_height").prop("checked",a.hasClass("tve_fh")),TVE_Content_Builder.landing_page&&TVE_Content_Builder.landing_page.content_width_selector){var Q=jQuery(TVE_Content_Builder.landing_page.content_width_selector()),g=parseInt(Q.css("max-width"));isNaN(g)||jQuery("#lp_content_width").val(g).trigger("change")}var N=parseInt(a.css("border-top-left-radius"));N=isNaN(N)?0:N,c.find("#border_radius_input").val(N),c.find("#tve_border_radius_slider").slider("value",N);break;case"post_grid":a.data("bound")||(a.on("editor.oncolorpickerchange",function(b,c,d){a.tve_post_grid().config().update(c,d.save_key)}),a.data("bound",1));var d=tve_handle_integer_or_float(a.find(".tve-post-grid-title").css("font-size"));c.find(".tve_font_size").val(d);var R=parseInt(a.find(".tve_post_grid_image_wrapper").first().css("height"));c.find(".tve_height").val(isNaN(R)?"":R);var S=a.tve_post_grid(),T=S.config().get("read-more-text");T=T.length?T:a.find(".tve_pg_more > a").first().text(),c.find("#tve-post-grid-read-more-text").val(T);break;case"widget_menu":var U=a.tve_widget_menu().config(),V=a.find(".tve_w_menu"),W=tve_handle_integer_or_float(V.css("font-size"));tve_set_selected_dropdown(c.find('.tve_menu_selector li[data-id="'+U.menu_id+'"]')),handle_custom_fonts(V,c),c.find(".tve_font_size").val(isNaN(W)?"":W),tve_set_selected_dropdown(c.find('.tve_menu_dir li[data-type="'+U.dir+'"]')),c.find(".tve_menu_title").val(U.title);var X=c.find(".menu-edit-link").attr("href").replace(/&menu=(\d*)/,"&menu="+U.menu_id);c.find(".menu-edit-link").attr("href",X);break;case"icon":a=get_element_from_wrapper(a,b),jQuery(a).parent().is("a")?(c.find(".tve_quick_link_input").val(jQuery(a).parent().attr("href")),c.find(".lb_quick_link_target").prop("checked","_blank"==jQuery(a).parent().attr("target")?!0:!1),c.find(".lb_quick_link_no_follow").prop("checked","nofollow"==jQuery(a).parent().attr("rel")?!0:!1)):(c.find(".tve_quick_link_input").val(""),c.find(".quick_link_content_table").html(""),c.find(".lb_quick_link_target").prop("checked",tve_path_params.lb_ql_link_target),c.find(".lb_quick_link_no_follow").prop("checked",tve_path_params.lb_ql_no_follow)),a.hasClass("tve_sc_text")&&jQuery("#tve_icon_text").val(a.text());var W=tve_handle_integer_or_float(a.css("font-size")),i=!1,N=parseInt(a.css("border-top-left-radius")),j=parseInt(a.css("borderLeftWidth")),Y=parseInt(a.css("paddingTop"));if(Y=isNaN(Y)?0:Y,W=isNaN(W)?0:W,N=isNaN(N)?0:N,j=isNaN(j)?0:j,j&&!a.data("border-width")&&(a.parent().css("border-width",j+"px"),a.css("border-width",""),a.data("border-width",!0)),a.tve_color_selector()&&a.css("border-top-color")&&!a.data("border-color")&&j&&(a.parent().css("border-color",a.css("border-top-color")),tve_remove_css_rule(a.tve_color_selector(),"border-color"),a.data("border-color",!0)),a.parent().css("borderLeftWidth")&&(j=parseInt(a.parent().css("borderLeftWidth"))),W){var k=a.closest(".thrv_wrapper").parent().width();jQuery("#icon_size_input").val(W),jQuery("#tve_icon_size_slider").slider("option","max",k).slider("value",W),jQuery("#icon_padding_input").val(Y).trigger("change"),c.find("#border_radius_input").val(N).trigger("change")}jQuery.each(["margin-top","margin-right","margin-bottom","margin-left"],function(b,c){var d=parseInt(a.css(c));isNaN(d)||0===d||a.parent().css(c,d+"px"),a.css(c,"")}),jQuery("#icon_border_width").val(isNaN(j)?"0":j),handle_custom_classes(a.parents(".thrv_icon").first()),jQuery.each(border_styles.split(" "),function(b,d){return a.hasClass(d)?(i=!0,a.removeClass(d),a.parent().addClass(d),tve_set_selected_dropdown(c.find("li#"+d)),!1):a.parent().hasClass(d)?(i=!0,tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0}),i||tve_set_selected_dropdown(c.find("li#tve_brdr_none"),!0);break;case"progress_bar":j=parseInt(a.css("borderLeftWidth")),handle_custom_classes(a),jQuery("#tve_data_element_label_p").val(a.find(".tve_data_element_label").text().trim()),jQuery("#tve_data_element_percentage").val(a.find(".tve_progress_bar_fill_wrapper").attr("data-fill"));var Z=tve_handle_integer_or_float(a.find(".tve_progress_bar").css("font-size")),$=tve_handle_integer_or_float(a.find(".tve_data_element_label").css("line-height"));jQuery("#tve_data_element_font_size").val(Z),jQuery("#tve_data_element_line_height").val($),c.find(".element_id").val(a.attr("id")),jQuery("#progress_bar_border_width").val(isNaN(j)?"0":j);break;case"fill_counter":j=parseInt(a.css("borderLeftWidth")),handle_custom_classes(a),jQuery("#tve_data_element_value_f").val(a.find(".tve_fill_text").text().trim()),jQuery("#tve_data_element_label_f").val(a.find(".tve_data_element_label").text().trim()),jQuery("#tve_data_element_unit_b_f").val(a.find(".tve_fill_text_before").text().trim()),jQuery("#tve_data_element_unit_a_f").val(a.find(".tve_fill_text_after").text().trim()),jQuery("#tve_data_element_percentage_f").val(a.find(".tve_fill_counter").attr("data-fill")/1.8);var _=tve_handle_integer_or_float(a.find(".tve_data_element_label").css("font-size")),aa=tve_handle_integer_or_float(a.find(".tve_fill_text_before").css("font-size")),ba=tve_handle_integer_or_float(a.find(".tve_fill_text").css("font-size"));jQuery("#tve_data_element_font_size_f").val(_),jQuery("#tve_data_unit_font_size_f").val(aa),jQuery("#tve_data_value_font_size_f").val(ba),c.find(".element_id").val(a.attr("id")),jQuery("#fill_counter_border_width").val(isNaN(j)?"0":j),jQuery.each("tve_smallfc tve_normalfc tve_bigfc".split(" "),function(b,d){return a.hasClass(d)?(tve_set_selected_dropdown(c.find("li#"+d)),!1):void 0});break;case"number_counter":handle_custom_classes(a);var ca=a.find(".tve_numberc_text").attr("data-counter-start");
jQuery("#tve_data_element_value_start").val(ca?ca:"0"),jQuery("#tve_data_element_value_n").val(a.find(".tve_numberc_text").text().trim()),jQuery("#tve_data_element_label_n").val(a.find(".tve_data_element_label").text().trim()),jQuery("#tve_data_element_unit_b_n").val(a.find(".tve_numberc_before").text().trim()),jQuery("#tve_data_element_unit_a_n").val(a.find(".tve_numberc_after").text().trim());var _=tve_handle_integer_or_float(a.find(".tve_numberc_before").css("font-size")),aa=tve_handle_integer_or_float(a.find(".tve_data_element_label").css("font-size")),ba=tve_handle_integer_or_float(a.find(".tve_numberc_text").css("font-size"));jQuery("#tve_data_unit_font_size_n").val(_),jQuery("#tve_data_element_font_size_n").val(aa),jQuery("#tve_data_value_font_size_n").val(ba),c.find(".element_id").val(a.attr("id"))}if(a.is(".edit_mode")&&(a=get_element_from_wrapper(a,b)),c.find("input.margin-control").each(function(){var b,c=jQuery(this),d=a,e=c.parents(".tve_option_separator").first().find(".css-selector").val();e&&0===e.indexOf("_parent::")?d=a.parents(e.replace("_parent::","")).first():e&&(d=a.find(e),d=0===d.length?a:d),b=parseInt(d.css(c.attr("data-target"))),isNaN(b)&&(b=0),this.value=b}),c.find("input.padding-control").each(function(){var b,c=jQuery(this),d=a,e=c.parents(".tve_option_separator").find(".css-padding-selector").val();e&&0===e.indexOf("_parent::")?d=a.parents(e.replace("_parent::","")).first():e&&(d=a.find(e),d=0===d.length?a:d),b=parseInt(d.css(c.attr("data-target"))),isNaN(b)&&(b=0),this.value=b}),c.find("#tve_line_height").length){var da=a;"post_grid"===b&&(da=a.find(".tve-post-grid-title").first());var ea,fa=da.css("line-height")?da.css("line-height"):"",ga=-1===fa.indexOf("px")?"em":"px",ha=da.attr("data-unit");void 0===ha&&(ha=ga),"px"===ha?ea=parseFloat(fa):"em"===ha&&(ea=parseFloat(fa)/parseFloat(da.css("font-size"))),isNaN(ea)&&(ea=20),ea=tve_handle_integer_or_float(ea),c.find("#tve_line_height").val(ea),tve_set_selected_dropdown(c.find("li#tve_line_height_"+ha))}c.find(".tve_shadow_control")&&TVE_Content_Builder.controls.shadow.on_menu_show(c,a),TVE_Content_Builder.apply_filters("load_button_values",b,a,c),jQuery(TVE_Content_Builder).trigger("menu_show_"+b,[a,c])}function tve_handle_integer_or_float(a){return a=parseFloat(a)%1!==0?parseFloat(a).toFixed(2):parseInt(a)}function handle_custom_classes(a,b){if(a.length&&(class_list=a.attr("class"),class_list)){class_list_array=class_list.split(" ");var c=new Array;for(i=0;i<class_list_array.length;i++)-1===class_list_array[i].indexOf("thrv_")&&-1===class_list_array[i].indexOf("tve_")&&-1===thrv_custom_classes.indexOf(class_list_array[i])&&-1===custom_font_classes.indexOf(class_list_array[i])&&c.push(class_list_array[i]);return b?void b.find(".element_class").val(c.join(" ")):void jQuery(".element_class").val(c.join(" "))}}function handle_custom_fonts(a,b){var c=!1;custom_font_classes&&jQuery.each(custom_font_classes.split(" "),function(d,e){a.hasClass(e)&&(c=!0,tve_set_selected_dropdown(b.find('li.tve_font_selector[data-cls="'+e+'"]')))}),c===!1&&tve_set_selected_dropdown(b.find("li.tve_font_selector").first(),!0)}function tve_transform_more_tags(){return jQuery("#pre_save_filter_wrapper .tve_more_tag").replaceWith("<!--tvemore-->"),jQuery("#pre_save_filter_wrapper").html()}function filter_content_pre_save(a){"undefined"==typeof a&&(a={});var b=jQuery("#pre_save_filter_wrapper"),c=TVE_Editor_Page.editor.children(".tve_content_save").length?TVE_Editor_Page.editor.children(".tve_content_save"):TVE_Editor_Page.editor,d=jQuery(c.html());return d.find(".tve_shortcode_rendered script").remove(),d.find(".tve_shortcode_overlay").remove(),a.keep_wp_shortcodes||d.find(".tve_shortcode_rendered").remove(),b.html("").append(d),b.find(".edit_mode, .tve_merge_cells, .tve_merge_selected").removeClass("edit_mode tve_merge_cells tve_merge_selected"),b.find(".tve_faqC").css("display","none"),b.find(".tve_oFaq").removeClass("tve_oFaq"),b.find(".tve_dropzone,.rangySelectionBoundary").remove(),b.find("."+custom_html_placeholder_class).remove(),b.find("[contenteditable]").removeAttr("contenteditable"),b.html(tve_multilineTrim(b.html())),b.find(".tve_shortcode_overlay").remove(),b.find(".thrive-shortcode-html").remove(),b.find(".init_done").removeClass("init_done"),a.keep_wp_shortcodes||b.find(".tve_shortcode_rendered").remove(),b.find(".tve_draggable").removeClass("tve_draggable"),b.find('*[draggable="true"]').removeAttr("draggable"),b.find(".tve_post_grid_wrapper,.tve_widget_container,.gr-textarea-btn_status,.gr-textarea-btn").remove(),b.find("*[data-gramm]").removeAttr("data-gramm").removeAttr("data-gramm_id").removeAttr("data-gramm_editor").filter(":empty").remove(),b.find(".thrv_toggle_shortcode").removeClass("tve_focus_element ui-sortable").children().removeClass("ui-sortable-handle"),b.html()}function hide_sub_menu(){jQuery(".active_sub_menu").trigger("tve.hide_sub_menu").hide().parent().css("bottom",""),tve_remove_text_boundaries()}function tve_open_lightbox(a){var b=a.attr("data-lb")?a.attr("data-lb"):a.attr("id"),c=a.hasClass("tve_lb_small"),d=jQuery.param({}),e=jQuery(".edit_mode"),f={},g=a.data(),h=g.url?g.url:tve_path_params.cpanel_dir+"/"+b+".php";if("undefined"!=typeof a&&a&&(d=a.find("input").serialize(),a.find("input").each(function(){f[jQuery(this).attr("name")]=this.value})),"lb_shortcode"==b)return tve_show_tinymce_popup("");if("tve_event_manager"==b)return TVE_Content_Builder.event_manager.default_data=d,TVE_Content_Builder.event_manager.open(jQuery(".edit_mode"),f.scope?f.scope:"");if(g.post_id=tve_path_params.post_id,"lb_icon"==b&&e.length){var i=e.find(".tve_sc_icon");g.current_icon=i.length?i.attr("data-tve-icon"):""}return("lb_custom_css"==b||"lb_custom_html"==b||"lb_full_html"==b||"lb_global_scripts"==b||"lb_google_map"==b||"lb_image_link"==b||"lb_landing_pages"==b||"lb_save_user_template"==b||"lb_table"==b||"lb_text_link"==b)&&(h=tve_path_params.ajax_url,g.action="tve_ajax_load",g.ajax_load=b),d+=(d?"&":"")+jQuery.param(g),tve_path_params.custom_post_data&&(d+=(d?"&":"")+jQuery.param(tve_path_params.custom_post_data)),g.wpapi&&(h=tve_path_params.ajax_url,d+=(d?"&":"")+jQuery.param({action:"tve_ajax_load",ajax_load:g.wpapi})),"lb_post_grid"!=b||a.parent().is(".active_delete")||jQuery(".edit_mode").is(".thrv_post_grid")?("lb_post_grid"==b&&jQuery(".tve_active_lightbox").find(".thrive-shortcode-config").length&&(d=jQuery(".tve_active_lightbox").tve_post_grid().getConfig(),g.wpapi&&(h=tve_path_params.ajax_url,d.ajax_load=g.wpapi,d.action="tve_ajax_load")),g.load&&TVE_Editor_Page.overlay(),"lb_lead_generation_code"==b?TVE_Content_Builder.auto_responder.init().dashboard():void jQuery.post(h,d,function(a){load_lightbox_content(a,c),tve_populate_lightbox(b);var d=jQuery(".tve_lightbox_frame");if(d.find(".tve_lightbox_buttons").hide(),"lb_widgets"===b){var e=jQuery(".thrv_widget.tve_active_lightbox");jQuery("<div>"+a+"</div>").tve_widgets({wrapper:e})}"lb_landing_pages"===b||"lb_lead_generation_code"===b||g.btnHide||d.find(".tve_lightbox_buttons").show(),g.btntext?d.find(".tve_save_lightbox").val(g.btntext):d.find(".tve_save_lightbox").val("Save"),"lb_icon"==b&&d.find(".tve_lightbox_buttons")[d.find(".icomoon-icon-list").length?"show":"hide"](),show_lightbox(),TVE_Editor_Page.overlay(!0)})):void 0}function load_lightbox_content(a,b){jQuery("#tve_lightbox_content").html(a),b?jQuery("#tve_lightbox_frame, #tve_lightbox_overlay").addClass("tve_link_lightbox"):jQuery("#tve_lightbox_frame, #tve_lightbox_overlay").removeClass("tve_link_lightbox")}function show_lightbox(){jQuery(".tve_lightbox_overlay").show(0),jQuery(".tve_lightbox_frame").show(0),jQuery("body, html").addClass("tve-hide-overflow")}function tve_get_lightbox_options(){return user_options=new Object,jQuery(".tve_lightbox_frame .tve_lightbox_content input, .tve_lightbox_frame .tve_lightbox_content select, .tve_lightbox_frame .tve_lightbox_content textarea").each(function(){var a=jQuery(this);void 0!==a.attr("name")&&("checkbox"==a.attr("type")?(checked=a.is(":checked"),user_options[a.attr("name")]=checked):user_options[a.attr("name")]=a.val())}),user_options}function tve_populate_lightbox(a){switch(a){case"lb_revision_manager":jQuery("#tve_lightbox_frame").addClass("revision_mananger_lightbox");break;case"lb_full_html":page_content=filter_content_pre_save({keep_wp_shortcodes:!0}),jQuery("textarea[name='tve_full_html']").val(tve_revert_script_tags(page_content));break;case"lb_image_link":element=jQuery(".edit_mode"),element.hasClass("thrv_icon")&&(element=element.find("span.tve_sc_icon").first()),jQuery(element).parent().is("a")&&(jQuery("#lb_link_location").val(jQuery(element).parent().attr("href")),"_blank"==jQuery(element).parent().attr("target")&&jQuery("#lb_link_target").prop("checked",!0),"nofollow"==jQuery(element).parent().attr("rel")&&jQuery("#lb_no_follow").prop("checked",!0));break;case"lb_custom_html":element=jQuery(".edit_mode"),0==element.length&&(element=jQuery(".tve_active_lightbox")),element.addClass("tve_active_lightbox"),element.find(".tve_iframe_cover").remove(),jQuery("#tve_custom_html").val(tve_revert_script_tags(element.html()));break;case"lb_custom_css":jQuery("textarea[name=tve_custom_css]").val(tve_get_custom_css(!0));break;case"lb_global_scripts":jQuery("#tve_global_scripts_head").val(tve_path_params.tve_global_scripts.head?tve_path_params.tve_global_scripts.head:""),jQuery("#tve_global_scripts_footer").val(tve_path_params.tve_global_scripts.footer?tve_path_params.tve_global_scripts.footer:""),jQuery("#tve_global_scripts_body").val(tve_path_params.tve_global_scripts.body?tve_path_params.tve_global_scripts.body:"");break;case"lb_post_grid":jQuery(".tve_post_grid_tabs_container").tve_post_grid().sortable().autocomplete()}}function tve_handle_lightbox_options(a){switch(a.tve_lb_type){case"custom_html":var b=jQuery(".tve_active_lightbox"),c=tve_convert_script_tags(a.tve_custom_html);b.html(c).removeClass(custom_html_placeholder_class+" code_placeholder").addClass("thrv_custom_html_shortcode"),0===b.height()&&0===b.find("img").length?b.append(custom_html_default_html):(b.find("."+custom_html_placeholder_class).remove(),b.find("iframe").length&&b.append(jQuery('<div class="tve_iframe_cover"></div>')));break;case"tve_post_grid":var d=jQuery(".tve_sortable_layout").sortable("toArray",{attribute:"data-layout"});a.layout=d,jQuery(".tve_active_lightbox, .edit_mode").tve_post_grid(a).display();break;case"tve_full_html":var b=TVE_Editor_Page.editor.children(".tve_content_save").length?TVE_Editor_Page.editor.children(".tve_content_save"):TVE_Editor_Page.editor;b.html(tve_convert_script_tags(a.tve_full_html)),TVE_Content_Builder.drag.refresh(!0);break;case"tve_google_map":google_map_code=a.tve_embed_code,jQuery(".tve_active_lightbox").replaceWith("<div class='tve-flexible-container thrv_wrapper'>"+a.tve_embed_code+"</div>");break;case"text_link":tve_add_hyperlink(a.lb_link,a.lb_link_target,a.lb_link_name,a.lb_no_follow);break;case"image_link":tve_add_image_hyperlink(a.lb_link,a.lb_link_target,a.lb_no_follow);break;case"user_template":if(!tve_add_user_template(jQuery("#template_name").val(),a))return!1;break;case"tve_custom_css":tve_add_custom_css(a.tve_custom_css);break;case"tve_table":var e=parseInt(a.tve_table_rows),f=parseInt(a.tve_table_cols);if(jQuery("#tve_table_rows_number,#tve_table_cols_number").removeClass("tve_field_error"),isNaN(e)||0>=e||e>15)return jQuery("#tve_table_rows_number").addClass("tve_field_error"),!1;if(isNaN(f)||0>=f||f>15)return jQuery("#tve_table_cols_number").addClass("tve_field_error"),!1;a.tve_table_rows=e,a.tve_table_cols=f,TVE_Content_Builder.drag.insert(tve_build_table(a),jQuery(".tve_active_lightbox").removeClass("table_placeholder"),!0);break;case"shortcode":var b=jQuery(".tve_active_lightbox"),g=b.find(".tve_shortcode_raw"),h=b.find(".tve_shortcode_rendered");0===g.length&&(b.empty(),g=jQuery('<div class="tve_shortcode_raw" style="display: none"></div>').appendTo(b),h=jQuery('<div class="tve_shortcode_rendered"></div>').appendTo(b)),tve_hide_tinymce_popup(),TVE_Editor_Page.overlay();var i={action:"tve_render_shortcode",security:tve_path_params.tve_ajax_nonce,content:tve_get_tinymce_content()};g.html("___TVE_SHORTCODE_RAW__"+i.content+"__TVE_SHORTCODE_RAW___"),jQuery.post(tve_path_params.ajax_url,i,function(a){b.removeClass("code_placeholder");try{h.attr("style",""),h.html(a)}catch(c){console.log(c)}(h.children().length&&0===h.outerHeight()||0===h.children().length)&&(h.attr("style","position: relative;"),h.append('<div class="tve_shortcode_overlay" style="width: 100%; height: 40px; background-color: rgba(0, 0, 0, 0.4); color: #fff; text-align: center;"><span style="display: inline-block; padding-top: 10px">No preview available. Please save and reload the page.</span></div>')),TVE_Editor_Page.overlay("close")});break;case"widgets":var b=jQuery(".tve_active_lightbox"),j=b.tve_widgets({wrapper:b});j.config.update(jQuery(".tve_widgets_list").val(),"widget"),j.config.update(a,"options"),j.displayWidget();break;case"sc_icon":var k=jQuery(".icomoon-icon.tve_selected"),l=jQuery(".tve_active_lightbox"),m=jQuery(".edit_mode");if(0==k.length)return tve_add_notification("You have to select an icon",!0),!1;if(m.length)return m=m.hasClass("thrv_button_shortcode")?m.find(".tve_left i").addClass("tve_sc_icon").css("width","").css("background-image","none"):m.find("span.tve_sc_icon"),m.removeClass(m.attr("data-tve-icon")).addClass(k.attr("data-cls")),m.attr("data-tve-icon",k.attr("data-cls")),!0;a.icon_class=k.attr("data-cls"),a.ajax_load="sc_icon",a.action="tve_ajax_load",jQuery.post(tve_path_params.ajax_url,a,function(a){TVE_Content_Builder.drag.insert(a,l)});break;case"global_scripts":tve_path_params.tve_global_scripts.head=a.head,tve_path_params.tve_global_scripts.footer=a.footer,tve_path_params.tve_global_scripts.body=a.body}return!0}function tve_multilineTrim(a){return"undefined"==a?!1:a.split("\n").map(jQuery.trim).filter(function(a){return""!=a}).join("\n")}function tve_add_image_hyperlink(a,b,c){var d,e=jQuery(".edit_mode"),f=b?"_blank":"_self";e.hasClass("thrv_icon")&&(e=e.find("span.tve_sc_icon").first()),d=e.parent(),d.is("a")||(e.wrapAll(jQuery('<a href="'+a+'"></a>')),d=e.parent()),d.attr({href:a,target:f,rel:c?"nofollow":""}),jQuery(".tve_link_btns").show()}function tve_add_hyperlink(a,b,c,d){window.linkSel&&rangy.restoreSelection(window.linkSel);var e=document.createElement("a"),f=rangy.getSelection();e.href=a,b&&(e.target="_blank"),c&&(e.name=c),d&&e.setAttribute("rel","nofollow"),window.linkSel&&f.toString().length||(e.innerHTML=tve_path_params.translations.ClickToReplaceTheAnchorText),window.linkSel?(tve_surroundSelectedText(e),rangy.removeMarkers(window.linkSel)):jQuery(".edit_mode").append(e),jQuery(e).click()}function tve_prepare_hyperlink(a){var b=jQuery(".tve_active_hyperlink");if(b.length){var c={};return a.lb_link&&(c.href=a.lb_link),c.target=a.lb_link_target?"_blank":"",c.rel=a.lb_no_follow?"nofollow":"",void b.attr(c)}""!=a.lb_link&&("image"==a.edited_element_type||"icon"==a.edited_element_type?tve_add_image_hyperlink(a.lb_link,a.lb_link_target,a.lb_no_follow):"text"==a.edited_element_type&&tve_add_hyperlink(a.lb_link,a.lb_link_target,"",a.lb_no_follow))}function tve_surroundSelectedText(a){var b=rangy.getSelection(),c=b.getRangeAt(0);a.appendChild(document.createTextNode(c.toString())),c.deleteContents(),c.insertNode(a),c.selectNodeContents(a),c.setStart(a.childNodes.item(0),0),rangy.getSelection().removeAllRanges(),rangy.getSelection().addRange(c)}function tve_add_user_template(a,b){if(!a)return tve_add_notification("Please enter a template name",!0),!1;var c,d;if(b.element){var e=jQuery(".tve_active_lightbox"),f=e.clone();f.find(".edit_mode, .tve_active_lightbox").removeClass("edit_mode tve_active_lightbox"),f.removeClass("edit_mode tve_active_lightbox");var g=e.tve_color_selector()?[e.tve_color_selector()]:[];e.find("[data-tve-custom-colour]").each(function(){g.push(jQuery(this).tve_color_selector())}),c=jQuery("<div></div>").append(f.removeClass("edit_mode tve_active_lightbox active_delete active_highlight active_duplicate")).html(),d=tve_extract_stylesheet_rules_filtered(g)}else c=TVE_Editor_Page.editor.html(),d=tve_extract_stylesheet_rules();a=encodeURIComponent(a);var h={action:"tve_save_user_template",template_name:a,template_content:c,dataType:"json",security:tve_path_params.tve_ajax_nonce,post_id:tve_path_params.post_id,custom_css:d};return TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,h,function(a){if(TVE_Editor_Page.overlay(!0),a.success){var b=jQuery("#user_template_list").empty().append(a.html);b.find("li.cp_draggable").each(function(){TVE_Content_Builder.drag.make_draggable(this)}),tve_add_notification(tve_path_params.translations.NewTemplateAdded)}else tve_add_notification(a.error,!0)},"json"),!0}function check_image_caption(a){return 0!=jQuery(a).parents(".tve_image_caption").length?!0:!1}function tve_menu_color(a){"light"==a?(jQuery("#tve_cpanel").removeClass("tve_is_dark"),jQuery(".tve_cpanel_onpage").removeClass("tve_is_dark")):(jQuery("#tve_cpanel").addClass("tve_is_dark"),jQuery(".tve_cpanel_onpage").addClass("tve_is_dark")),hide_sub_menu(),tve_save_cp_config("color",a)}function tve_menu_position(a){"right"==a?(jQuery("#tve_cpanel,body").removeClass("tve_cpanelFlip"),jQuery(".tve_wrap_inner").removeClass("tve_is_flipped")):(jQuery("#tve_cpanel,body").addClass("tve_cpanelFlip"),jQuery(".tve_wrap_inner").addClass("tve_is_flipped")),hide_sub_menu(),tve_save_cp_config("position",a)}function tve_save_cp_config(a,b){var c={action:"tve_editor_display_config",attribute:a,value:b,security:tve_path_params.tve_ajax_nonce};jQuery.post(tve_path_params.ajax_url,c,function(a){})}function tve_change_colour(a,b){"undefined"==typeof b&&(b="foreground");var c=a.find("a").css("background-color"),d=rangy.getSelection(),e="background"==b?"backgroundColor":"color",f="background"==b?"BackColor":"ForeColor";d.toString().length?(document.execCommand(f,!1,rgbToHex(c)),d.removeAllRanges()):(jQuery(".edit_mode font").contents().unwrap(),jQuery(".edit_mode").css(e,rgbToHex(c)))}function rgbToHex(a){if("#"===a.substr(0,1))return a;var b=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(a),c=parseInt(b[2],10).toString(16),d=parseInt(b[3],10).toString(16),e=parseInt(b[4],10).toString(16);return"#"+((1==c.length?"0"+c:c)+(1==d.length?"0"+d:d)+(1==e.length?"0"+e:e))}function tve_remove_text_boundaries(){window.textselection&&(rangy.removeMarkers(window.textselection),window.textselection=null)}function tve_check_submenu_position(a){var b=a.offset();if(void 0==b)return!1;var c=jQuery("body").outerHeight(),d=b.top+a.parent().outerHeight();600>c||(d>=c&&a.parent().css({top:"",bottom:"30px"}),b=a.offset(),b.top<32&&a.parent().css({top:"30px",bottom:""}))}function tve_init_sliders(){var a={css_width:{beforeSlide:function(a,b,c,d){return c.is("#tve_icon_button_font_size")&&0===b.length?("undefined"==typeof tve_timer&&(tve_timer=setTimeout(function(){tve_add_notification(tve_path_params.translations.YouAreTryingToChangeTheSizeOfIcon,!0,5e3),tve_timer=void 0},500)),!1):!0},onSlide:function(a,b,c,d){c.val(d),this._setValues(d+a.unit,b,a.cssProp)},onInputChange:function(a,b,c,d){var e=parseInt(c.val());e=isNaN(e)?0:e,e<a.min?e=a.min:e>a.max&&(e=a.max),c.val(e),d.slider("value",e),this._setValues(parseInt(c.val())+"px",b,a.cssProp)},_setValues:function(a,b,c){if(b.is(".tve_content_inner")&&b.css("max-width",""),b.css(c,a),check_image_caption(b)&&b.parents(".tve_image_caption").first().css(c,a),b.is("img")){var d=parseInt(b.css("width")),e=parseInt(b.css("height"));b.attr("width",isNaN(d)?"":d),b.attr("height",isNaN(e)?"":e)}}},content_reveal:{beforeSlide:function(a,b,c,d){return!0},onSlide:function(a,b,c,d){b.attr("data-after",d),c.filter(".seconds").val(d%60),c.filter(".minutes").val(Math.floor(d/60))},onInputChange:function(a,b,c,d){var e=parseInt(c.filter(".seconds").val()),f=parseInt(c.filter(".minutes").val());e=isNaN(e)?0:e,f=isNaN(f)?0:f;var g=60*f+e;g=g>a.max?a.max:g<a.min?a.min:g,this.onSlide(a,b,c,g),d.slider("value",g)}},css_opacity:{beforeSlide:function(a,b,c,d){return!0},onSlide:function(a,b,c,d){c.val(d),this._setValues(d,b,a.cssProp)},onInputChange:function(a,b,c,d){var e=parseFloat(c.val());e=isNaN(e)?0:e,e<a.min?e=a.min:e>a.max&&(e=a.max),c.val(e),d.slider("value",e),this._setValues(parseFloat(c.val()),b,a.cssProp)},_setValues:function(a,b,c){var d=parseFloat(a/100);b.css(c,d),b.hasClass("tve_p_lb_overlay")&&(tve_path_params.tve_globals.l_oo=d)}},void_handler:{beforeSlide:function(){return!1}}},b={tabs:function(a,b){a.parent().css("padding-left",b+"px")},icon:function(a,b){var c=parseInt(a.parent().css("border-top-width"));c=isNaN(c)?0:c,0==b?a.parent().css("border-radius","0px"):a.parent().css("border-radius",b+c+"px")},icon_size:function(a,b){a.css({width:parseInt(b)+"px",height:parseInt(b)+"px"})}};jQuery(".tve_slider_config").each(function(){var c=jQuery(this),d=c.find(".tve_slider_element"),e={min:parseInt(c.attr("data-min-value")),step:c.attr("data-step"),val:c.attr("data-value"),max:c.attr("data-max-value"),cssProp:c.attr("data-property")?c.attr("data-property"):"width",isChild:c.attr("data-no-child")?!1:!0,unit:c.attr("data-unit")?c.attr("data-unit"):"px"},f=c.attr("data-handler")?c.attr("data-handler"):"css_width",g=c.attr("data-selector")?c.attr("data-selector"):!1,h=c.attr("data-callback"),i=c.find(c.attr("data-input-selector"));"available"===e.max&&(e.max=TVE_Editor_Page.editor.width()),h=h&&0===h.indexOf("function:")?tve_parse_ctrl_string(h,!0):h&&"function"==typeof b[h]?[b,b[h]]:!1,d.slider({value:e.val,min:e.min,max:e.max,step:e.step?parseInt(e.step):1,slide:function(b,c){var d;if(g&&0===g.indexOf("function:")){var j=tve_parse_ctrl_string(g);j&&(d=jQuery(j()))}else d=e.isChild?g?jQuery(".edit_mode").find(g).first():jQuery(".edit_mode"):jQuery(g);a[f].beforeSlide(e,d,i,c.value)&&a[f].onSlide(e,d,i,c.value),h&&h.length>1&&h[1].call(h[0],d,c.value)}}),i.change(function(){if(jQuery(".edit_mode").length){var b;if(g&&0===g.indexOf("function:")){var c=tve_parse_ctrl_string(g);c&&(b=jQuery(c()))}else b=e.isChild?g?jQuery(".edit_mode").find(g):jQuery(".edit_mode"):jQuery(g);a[f].onInputChange(e,b,i,d),h&&h.length>1&&h[1].call(h[0],b,parseInt(i.val()))}}).change()})}function tve_add_custom_css(a){var b=jQuery("style#tve_head_custom_css");0===b.length&&(b=jQuery('<style type="text/css" id="tve_head_custom_css"></style>').appendTo(jQuery("head"))),b.text(a)}function tve_get_custom_css(a){var b=jQuery("style#tve_head_custom_css");return 0===b.length?"undefined"!=typeof a&&a?"/** Insert your custom CSS rules here. **/":"":b.text()}function tve_convert_script_tags(a){var b=jQuery('<div class="tve_escaped_js">'+a+"</div>");return 0===b.find("script").length?b.html():(b.find("script").each(function(){var a=jQuery(this),b="[tcb-script",c=jQuery('<code class="tve_js_placeholder"></code>');jQuery.each(this.attributes,function(){b+=" "+this.name+'="'+this.value+'"'}),b+="]"+a.text()+"[/tcb-script]",c.text(b),a.replaceWith(c)}),b.html())}function tve_revert_script_tags(a){if(!jQuery.trim(a))return"";var b=jQuery('<div class="tve_escaped_js">'+a+"</div>");return b.find(".tve_custom_html_placeholder,.tve_click").remove(),b.find(".tve_shortcode_overlay").remove(),0===b.find("code.tve_js_placeholder").length?jQuery.trim(b.html()):(b.find("code.tve_js_placeholder").each(function(){var a=jQuery(this),b=new RegExp("^\\[tcb-script([^\\]]*?)\\]([\\s\\S]*?)\\[/tcb-script\\]$","g"),c=a.text().replace(b,"<script$1>$2</script>"),d=jQuery(c);d.removeAttr("class className"),a.replaceWith(d)}),jQuery.trim(b.html()))}function tve_build_table_row(a,b){var c='<tr class="tve_table_row">',d=1==a?"th":"td",e=1==a?"Header":"Cell";a>1&&a--;for(var f=1;b>=f;f++)c+="<"+d+' class="tve_table_cell"><p> '+e+" "+a+" / "+f+"</p></"+d+">";return c+="</tr>"}function tve_build_table(a){var b='<table data-rows="'+a.tve_table_rows+'" data-cols="'+a.tve_table_cols+'" class="tve_table tve_no_inner_border tve_no_border tve_table_'+a.tve_table_style+'">';b+="<thead>"+tve_build_table_row(1,a.tve_table_cols)+"</thead>",b+="<tbody>";for(var c=2;c<=a.tve_table_rows;c++)b+=tve_build_table_row(c,a.tve_table_cols);return b+="</tbody></table>"}function tve_restore_rangy_selection(a,b){setTimeout(function(){rangy.restoreSelection(window[a]),delete window[a],"function"==typeof b&&b()},10)}function tve_event_change(a,b,c,d){function e(){var a=rangy.getSelection(),d=tve_handle_integer_or_float(g),e=d>=70?"rfs":"";if(e+=d>=30?" rft":"",a.toString().length){var f=document.createElement("span");for(f.style.fontSize=d+"px",f.className="tve_custom_font_size"+(e?" "+e:""),tve_surroundSelectedText(f),f=jQuery(f);f.parent().is(".tve_custom_font_size");)f.unwrap();f.parent().find("span.tve_custom_font_size:empty").remove()}else if("button"===c)b.find("a.tve_btnLink").css({"font-size":d+"px","line-height":d+"px"}).removeClass("rft rfs").addClass(e);else if(b.is("li"))b.parent("ul,ol").css("font-size",d+"px").removeClass("rft rfs").addClass(e);else if("widget_menu"===c)b.tve_widget_menu().font_size(d,e);else{var h=b.find(".tve_custom_font_size");h.length&&b.text()==h.text()&&h.css("font-size",d+"px").removeClass("rft rfs").addClass(e),b.css("font-size",d+"px").removeClass("rft rfs").addClass(e)}}b=get_element_from_wrapper(b,c);var f=a.attr("data-size")?!0:!1,g=a.val(),h=a.attr("id"),i=a.attr("data-suffix")?a.attr("data-suffix"):"",j=a.attr("data-css-property"),k=a.is(":checked");if(f&&(g=tve_handle_integer_or_float(g),isNaN(g)))return void tve_add_notification(tve_path_params.translations.OnlyNumbersAreAccepted,!0,4e3);if(("text"===c||"text_inline_only"===c||"button"===c||"widget_menu"===c)&&a.is(".tve_font_size")){if(g>200||6>g)return void tve_add_notification(tve_path_params.translations.FontSizeShouldBeBetween,!0,4e3);window.textSel?tve_restore_rangy_selection("textSel",e):e()}var l=TVE_Editor_Page.editor.width();switch(h){case"tl_input_border_width":b.find('input[type="text"]').css("border-width",a.val()+"px");break;case"tl_textarea_border_width":b.find("textarea").css("border-width",a.val()+"px");break;case"tl_dropdown_border_width":b.find("select").css("border-width",a.val()+"px");break;case"tl_button_border_width":b.find("button").css("border-width",a.val()+"px");break;case"tve-post-grid-read-more-text":if(b.is(".thrv_post_grid")){var m=b.tve_post_grid();b.find(".tve_pg_more a").html(g),m.config().update(g,"read-more-text")}break;case"tve_lg_email_error":case"tve_lg_phone_error":case"tve_lg_required_error":var n=b.find(".tve-lg-err-msg");if(n.length){var o=JSON.parse(n.val()),p=h.replace("tve_lg_","").replace("_error","");o[p]=g,n.val(JSON.stringify(o))}break;case"table_border_width":g>l/b.tve_cols()/4&&(g=parseInt(l/b.tve_cols()/4),a.val(g)),b.css("border-width",g+""+i),b.find("> tbody > tr > td,> thead > tr > th").css("border-width",g+""+i);break;case"page_section_border_width":b.find(".out").first().css("border-width",g+""+i);break;case"image_border_width":b.css("border-width",g+""+i);break;case"table_cell_padding":g>l/b.tve_cols()/2&&(g=parseInt(l/b.tve_cols()/2),a.val(g)),b.find("> tbody > tr > td,> thead > tr > th").css("padding",g+""+i);break;case"table_cell_border_width":b.css("border-width",g+i),jQuery("input#table_inner_border").prop("checked",!0).trigger("change");break;case"table_cell_width":var q=parseInt(b.index())+1;b.parents(".tve_table").first().find("> tbody > tr > td:nth-child("+q+"), > thead > tr > th:nth-child("+q+")").css("width",""),b.css("width",g+i);break;case"table_cell_height":b.parent().find("> th, > td").css("height",""),b.css("height",g+i);break;case"table_row_height":b.find("> tbody > tr > td, > thead > tr > th").css("height",""),b.find("> thead > tr > th:first-child, > tbody > tr > td:first-child").css("height",g+i);break;case"tve_margin_top":case"tve_margin_right":case"tve_margin_bottom":case"tve_margin_left":var r=a.parents(".tve_option_separator").first().find(".css-selector").val();r&&0===r.indexOf("_parent::")?b=b.parents(r.replace("_parent::","")).first():r&&(b=b.find(r)),b.tve_css(a.attr("data-target"),g+"px","important");break;case"tve_padding_top":case"tve_padding_right":case"tve_padding_bottom":case"tve_padding_left":var r=a.parents(".tve_option_separator").first().find(".css-padding-selector").val();r&&0===r.indexOf("_parent::")?b=b.parents(r.replace("_parent::","")).first():r&&(b=b.find(r)),b.tve_css(a.attr("data-target"),g+"px","important");break;case"tve_thrive_optin_text":b.tve_thrive_optin().text(g);break;case"ct_day":case"ct_hour":case"ct_min":case"ct_sec":case"ct_text":case"ct_expday":case"ct_exphour":b.hasClass("tve_countdown_timer_evergreen")?b.tve_countdown_timer_evergreen().set(a.attr("id").replace("ct_",""),g):b.tve_countdown_timer().set(a.attr("id").replace("ct_",""),g);break;case"posts_list_no_posts":case"posts_list_filter":case"posts_list_category":b.tve_thrive_posts_list().set(g,a.attr("id").replace("posts_list_",""));break;case"custom_phone_no":case"custom_phone_text":case"custom_mobile_phone_text":case"custom_phone_color":b.tve_thrive_custom_phone().set(g,a.attr("id").replace("custom_",""));break;case"custom_menu_menu":b.tve_thrive_custom_menus().set(g,a.attr("id").replace("custom_menu_",""));break;case"content_reveal_redirect_url":g.length?TCB_Front.isValidUrl(g)?b.attr("data-redirect-url",g):tve_add_notification(tve_path_params.translations.RedirectionUrlInvalid,!0,5e3):b.attr("data-redirect-url",g);break;case"responsive_video_type":case"responsive_video_url":var s=b.tve_responsive_video().set(g,a.attr("id").replace("responsive_video_",""));a.is("#responsive_video_type")&&(a.parents(".tve_menu").find(".responsive_video_option").each(function(){var a=jQuery(this);-1!==a.attr("data-apply-to").indexOf(g)?a.css("display","block"):a.css("display","none")}),jQuery("#responsive_video_url").val(""),s.set("","url"));break;case"ct_max_width":var t=parseInt(g);if(isNaN(t)&&"none"!==g)return void tve_add_notification(tve_path_params.translations.OnlyDigitsAccepted,!0,4e3);100>t&&(tve_add_notification(tve_path_params.translations.MaxWidthCannotBeSmaller,!0,4e3),g="none"),b.css("max-width","none"===g?g:t+"px");break;case"ct_min_width":var t=parseInt(g);if(isNaN(t))return void tve_add_notification(tve_path_params.translations.OnlyDigitsAreAccepted,!0,4e3);if(0>t)return void tve_add_notification(tve_path_params.translations.MinWidthLowerZero,!0,4e3);b.css("min-width",t+"px");break;case"ct_columns":b.tve_contents_table().config("columns",a.val());break;case"qs_tw_via":b.tve_tw_qs().config("via",g);break;case"rating_value":case"rating_max":"rating_max"==h&&g>20&&(g=20,a.val(20)),b.tve_rating().set(a.attr("id").replace("rating_",""),g);break;case"lead_generation_button_text":g.length>=1&&b.find("button").text(g);break;case"img_alt_att":b.attr("alt",g);break;case"img_title_att":b.attr("title",g);break;case"tve_line_height":var u="em"==a.parents(".tve_menu").first().find(".line-height-unit").text().toLowerCase()?"em":"px";if(b.attr("data-unit",u),b.is("ul,ol"))return void b.find("li").css("line-height",g+u);if(b.is(".thrv_post_grid")){var v=b.tve_post_grid();return b.find(".tve-post-grid-title").css("line-height",g+u,"!important"),v.config().update(g+u,"text-line-height"),void v.after_render()}b.css("line-height",g+u),window.textSel&&tve_restore_rangy_selection("textSel");break;case"lightbox_border_width":b.add(b.find(".tve_p_lb_close")).css("border-width",g+""+i),tve_path_params.tve_globals.l_cbw=g+""+i;break;case"lightbox_max_width":b.css("max-width",g+""+i),tve_path_params.tve_globals.l_cmw=g+""+i;break;case"table_outer_border":b.addClass("tve_no_border")&&k&&b.removeClass("tve_no_border");var w=jQuery("#table_inner_border").is(":checked");if(!b||k||w){var g=jQuery("#table_border_width").val();b.find("> tbody > tr > td,> thead > tr > th").css("border-width",g+"px")}else b.find("> tbody > tr > td,> thead > tr > th").css("border-width","");break;case"table_inner_border":b.addClass("tve_no_inner_border")&&k&&b.removeClass("tve_no_inner_border");
var w=jQuery("#table_outer_border").is(":checked");if(!b||k||w){var g=jQuery("#table_border_width").val();b.find("> tbody > tr > td,> thead > tr > th").css("border-width",g+"px")}else b.find("> tbody > tr > td,> thead > tr > th").css("border-width","");break;case"table_make_sortable":a.is(":checked")?b.addClass("tve_make_sortable"):b.removeClass("tve_make_sortable");break;case"tve_page_section_bg_fixed":b.tve_page_section().bgAttachment(k);break;case"tve_page_section_auto_height":b.tve_page_section().bgAutoHeight(k);break;case"tve_page_section_tmg":case"tve_page_section_bmg":var x=b.find("> .out"),y=a.attr("id").replace("tve_page_section_","");k?x.addClass(y):x.removeClass(y);break;case"posts_list_thumbnails":b.tve_thrive_posts_list().set(k?"on":"off","thumbnails");break;case"custom_menu_thumbnails":b.tve_thrive_custom_menus().set(k?"on":"off","thumbnails");break;case"rv_option_rel":b.tve_responsive_video().set(k?"0":"1","rel");break;case"rv_option_modestbranding":b.tve_responsive_video().set(k?"1":"0","modestbranding");break;case"rv_option_controls":b.tve_responsive_video().set(k?"0":"1","controls");break;case"rv_option_showinfo":b.tve_responsive_video().set(k?"0":"1","showinfo");break;case"rv_option_autoplay":b.tve_responsive_video().set(k?"1":"0","autoplay");break;case"rv_option_fs":b.tve_responsive_video().set(k?"0":"1","fs");break;case"ct_heading1":case"ct_heading2":case"ct_heading3":case"ct_heading4":case"ct_heading5":case"ct_heading6":var z=b.tve_contents_table();3===z.config("headers").length&&k===!0?(tve_add_notification(tve_path_params.translations.OnlyThreeHeadingsSelected,!0,3e3),a.prop("checked",!1)):z.updateHeaders(a.val());break;case"lead_generation_form_target":b.tve_lead_generation().config("form-target",k?a.val():"");break;case"tve_landing_page_user_filter":tve_landing_pages_load({template:k?tve_path_params.landing_page:""});break;case"tve_lp_bg_fixed":b.tve_lp().bgAttachment(k);break;case"tve_lp_auto_height":b.tve_lp().bgCover(k);break;default:if(a.is("[type=checkbox]")&&a.hasClass("tve_landing_page_tag"))tve_landing_pages_filter();else if(a.hasClass("tve_css_applier")){if(!j)return;"icon"==c?(b.parent().css(j,g+""+i),a.parents(".tve_menu").first().find("#border_radius_input").trigger("change")):b.css(j,g+""+i)}else if(a.is(".tve_font_size")&&"lead_generation_radio"===c){var A=b.find(".tve_lg_radio label");A.tve_css("font-size",a.val()+"px","important")}else if(a.is(".tve_font_size")&&"lead_generation_checkbox"===c){var A=b.find(".tve_lg_checkbox label");A.tve_css("font-size",a.val()+"px","important")}else if(a.is(".tve_font_size")&&a.is(".tve_font_size")&&"lead_generation_textarea"===c){var A=b.find(".tve_lg_input_container textarea");A.tve_css("font-size",a.val()+"px","important")}else if(a.is(".tve_font_size")&&"lead_generation_dropdown"===c){var A=b.find(".tve_lg_input_container select");A.tve_css("font-size",a.val()+"px","important")}else if(a.is(".tve_font_size")&&"lead_generation_submit"===c){var B=b.find(".tve_lg_submit button");B.css("font-size",a.val()+"px")}else if(a.is(".tve_font_size")&&"lead_generation_input"===c){var A=b.find('.tve_lg_input_container input[type="text"]');A.tve_css("font-size",a.val()+"px","important")}else if(a.is(".tve_font_size")&&"lead_generation"===c){var A=b.find('input[type="text"],select,textarea,button,label');A.tve_css("font-size",a.val()+"px","important")}else tve_try_call_control(a,b,d,"change");if(a.is(".tve_font_size")&&isNaN(g))return void tve_add_notification(tve_path_params.translations.OnlyNumbersAreAccepted,!0,4e3)}}function tve_event_click(a,b,c,d){var e=b;b=get_element_from_wrapper(b,c);var f=a.attr("id");switch(f){case"tve_lg_change_image":thrive_open_media(null,"load","tve_lg_img_submit",b.find(".tve_lg_image_submit"));break;case"tve_lead_pick_img":thrive_open_media(null,"load","tve_lg_img_submit",jQuery(d.target).parents(".tve_lg_input_container").first());break;case"tve_convert_submit_image":return b.tve_lead_generation().convertButtonToImage(),!1;case"tve_convert_image_submit":b.tve_lead_generation().convertImageToButton();break;case"tve_table_reset_cell_border":b.removeClass(border_styles).css("border-width","");break;case"tve_table_manage_cells":TVE_CellManager.init(b.is(".tve_table")?b:b.parents(".tve_table").first());break;case"tve_table_clear_alternating":b.find("> tbody").attr("data-tve-custom-colour","");break;case"tve_page_section_clear_shadow":b.tve_page_section().clearShadow();break;case"tve_page_section_clear_bg_color":b.tve_page_section().clearBgColor();break;case"tve_page_section_clear_bg_pattern":b.tve_page_section().clearBgPattern();break;case"tve_page_section_clear_bg_image":b.tve_page_section().clearBgImage();break;case"tve_page_section_s_light":case"tve_page_section_s_dark":return b.find(".in").removeClass("lightSec darkSec").addClass(f.replace("tve_page_section_s_","")+"Sec"),tve_set_selected_dropdown(a),!1;case"tve_page_section_bg_image":thrive_open_media(null,"load","page_section_background",b.tve_page_section().ensureCompliant());break;case"tve_page_section_p_default":case"tve_page_section_p_top":case"tve_page_section_p_bot":return b.tve_page_section().position(f.replace("tve_page_section_p_","")),tve_set_selected_dropdown(a),!1;case"tve_margin_clear":var g=a.parents(".tve_option_separator").first().find(".css-selector").val(),h=b;g&&0===g.indexOf("_parent::")?h=b.parents(g.replace("_parent::","")).first():g&&(h=b.find(g)),h.tve_css("margin",""),"icon"==c&&b.tve_css("margin",""),("lead_generation_textarea"===c||"lead_generation_input"===c||"lead_generation_dropdown"===c||"lead_generation_checkbox"===c||"lead_generation_radio"===c||"lead_generation_submit"===c||"lead_generation_image_submit"===c)&&(e=h),load_button_values(e,c);break;case"tve_padding_clear":var g=a.parents(".tve_option_separator").first().find(".css-padding-selector").val(),h=b;g&&0===g.indexOf("_parent::")?h=b.parents(g.replace("_parent::","")).first():g&&(h=b.find(g)),h.tve_css("padding",""),("lead_generation_textarea"===c||"lead_generation_input"===c||"lead_generation_dropdown"===c||"lead_generation_checkbox"===c||"lead_generation_radio"===c||"lead_generation_submit"===c||"lead_generation_image_submit"===c)&&(b=h),load_button_values(b,c);break;case"tve_changeImageBtn":thrive_open_media(a,"load","icon_element",b);break;case"countdown_timer_align_left":case"countdown_timer_align_center":case"countdown_timer_align_right":case"countdown_timer_align_none":b.tve_countdown_timer().align(a.data("align"));break;case"tve_update_contents_table":b.tve_contents_table().update();break;case"add_tab":b.parent().tve_tabs().addTab();break;case"default_tab":b.parent().tve_tabs().setDefaultSelected(a.index()),tve_set_selected_dropdown(a);break;case"tve_shortcode_edit":var i=b.find("> .tve_shortcode_raw").html();b.addClass("tve_active_lightbox"),tve_show_tinymce_popup(i.replace("___TVE_SHORTCODE_RAW__","").replace("__TVE_SHORTCODE_RAW___",""));break;case"img_left_align":case"img_right_align":case"img_center_align":case"img_no_align":b.tve_image().align("align"+f.replace("img_","").replace("_align",""));break;case"tve_landing_page_disable":if(!confirm(tve_path_params.translations.DeleteContentInLandingPage))return!1;TVE_Content_Builder.controls.lb_close(),tve_save_post(!1,function(){tve_save_post_extra("landing_page",{tve_landing_page:""},function(){window.onbeforeunload=null,location.reload()})});break;case"tve_landing_page_select":var j=jQuery("#tve_landing_page_selector").find(".tve_landing_page_template.tve_cell_selected:visible input.lp_code");if(!j.length){tve_add_notification(tve_path_params.translations.SelectTemplate,!0,5e3);break}TVE_Content_Builder.controls.lb_close(),tve_landing_page_select(j.val());break;case"tve_landing_page_reset":if(!confirm(tve_path_params.translations.ClearContentOfLandingPage))break;tve_landing_page_reset();break;case"tve_landing_page_save":var k=a.parent().find("input#tve_landing_page_name").val();if(!k){tve_add_notification(tve_path_params.translations.EnterTemplateName,!0,5e3);break}tve_save_post(!1,function(){jQuery("#tve_landing_page_msg").removeClass("tve_warning").addClass("tve_success").html("Page template successfully saved"),tve_landing_pages_load({template:jQuery("#tve_landing_page_user_filter:checked").length?tve_path_params.landing_page:""})},{tve_landing_page_save:k});break;case"tve_landing_page_delete":var j=jQuery("#tve_landing_page_selector").find(".tve_landing_page_template.tve_cell_selected:visible input.lp_code");if(!j.length){tve_add_notification(tve_path_params.translations.SelectSavedTemplate,!0,5e3);break}if(!confirm(tve_path_params.translations.DeleteSavedTemplate))break;tve_landing_page_delete(j.val());break;case"tve_clear_font_size":if(b.find(".tve_custom_font_size").each(function(){var a=jQuery(this),b=a.text();a.before(b),a.remove()}),"button"===c){b.find("a.tve_btnLink").css("font-size","").css("line-height","");var l=tve_handle_integer_or_float(b.find("a.tve_btnLink").css("font-size"));a.parents(".tve_menu").first().find(".tve_font_size").val(l);break}if(b.is("li"))b.parent().css("font-size","");else{if(b.is(".thrv_post_grid")){b.find(".tve-post-grid-title").css("font-size","");var m=a.parents(".tve_menu").first().find(".tve_font_size"),l=tve_handle_integer_or_float(b.find(".tve-post-grid-title").css("font-size"));m.val(l),b.tve_post_grid().config().update(m.val(),"font-size"),b.tve_post_grid().after_render();break}if("lead_generation_checkbox"===c)b.find(".tve_lg_checkbox label").css("font-size","");else if("lead_generation_radio"===c)b.find(".tve_lg_radio label").css("font-size","");else if("lead_generation_textarea"===c)b.find(".tve_lg_input_container textarea").css("font-size","");else if("lead_generation_dropdown"===c)b.find(".tve_lg_input_container select").css("font-size","");else if("lead_generation_input"===c)b.find('.tve_lg_input_container input[type="text"]').css("font-size","");else if("lead_generation_submit"===c)b.find(".tve_lg_submit button").css("font-size","");else{if("lead_generation"===c){b.find('input[type="text"], button, select, textarea, label').css("font-size",""),load_button_values(b,c);break}if(b.is(".thrv_social_custom")){b.find(".tve_social_items").css("font-size","");var l=tve_handle_integer_or_float(b.find(".tve_social_custom").css("font-size"));a.parents(".tve_menu").first().find(".tve_font_size").val(l);break}}}b.css("font-size","");var l=tve_handle_integer_or_float(b.css("font-size"));a.parents(".tve_menu").first().find(".tve_font_size").val(l);break;case"tve_clear_custom_font":if("button"===c){b.find("a.tve_btnLink").removeClass(custom_font_classes).find(".tve_btn_txt, .tve_btn_text").removeClass(custom_font_classes),handle_custom_fonts(b.find("a.tve_btnLink"),a.parents(".tve_menu").first());break}if("lead_generation_submit"===c){var n=b.find("button");n.removeClass(custom_font_classes),handle_custom_fonts(n,a.parent().parent()),load_button_values(n,c);break}if("post_grid"===c){b.find(".tve-post-grid-title").removeClass(custom_font_classes),b.tve_post_grid().config().update("","custom-font-class"),b.tve_post_grid().after_render(),handle_custom_fonts(b.find(".tve-post-grid-title"),a.parents(".tve_menu").first());break}if("widget_menu"===c){b.tve_widget_menu().clear_font(),tve_set_selected_dropdown(a.parents(".tve_menu").find(".tve_font_list li").first(),!0);break}b.removeClass(custom_font_classes),b.find("span.bold_text, span.italic_text, span.underline_text, span.strikethrough_text").removeClass(custom_font_classes),handle_custom_fonts(b,a.parents(".tve_menu").first());break;case"tve_clear_line_height":b.css("line-height",""),b.find("> li").css("line-height",""),b.is(".thrv_post_grid")&&(b.find(".tve-post-grid-title ").css("line-height",""),b.tve_post_grid().config().update("","text-line-height"),b.tve_post_grid().after_render()),load_button_values(b,c);break;case"text_bullet":tve_wrap_element_tags(b,"<ul class='thrv_wrapper'><li>","</li></ul>");break;case"text_numbered_bullet":tve_wrap_element_tags(jQuery(".edit_mode"),"<ol class='thrv_wrapper'><li class='edit_mode'>","</ol></ul>"),convert_element_into_edit_mode(jQuery(".edit_mode"),d);break;case"tve_lightbox_bg_image":thrive_open_media(null,"load","lightbox_content_background",b);break;case"tve_lightbox_clear_bg_color":b.tve_lightbox().clearBgColor();break;case"tve_lightbox_clear_bg_pattern":b.tve_lightbox().clearBgPattern();break;case"tve_lightbox_clear_bg_image":b.tve_lightbox().clearBgImage();break;case"tve_lp_settings":hide_sub_menu();var o=jQuery(".tve_wrap_all");d.target=o,d.currentTarget=o,tve_editor_init(d,o);break;case"tve_lp_bg_image":thrive_open_media(null,"load","lp_background",b);break;case"tve_lp_clear_bg_color":b.tve_lp().clearBgColor();break;case"tve_lp_clear_bg_pattern":b.tve_lp().clearBgPattern();break;case"tve_lp_clear_bg_image":b.tve_lp().clearBgImage();break;default:if(a.hasClass("img_style")){b.tve_image().style(f),tve_set_selected_dropdown(a);break}if(a.hasClass("tve_landing_page_template"))a.parent().find(".tve_cell_selected").removeClass("tve_cell_selected"),a.addClass("tve_cell_selected");else if(a.is(".tve_scT li")){var p=a.parents(".tve_scT").first(),q=p.find("> .tve_scTC").eq(a.index());"tve_saved_landing_pages"===a.attr("id")&&tve_landing_pages_load(),p.find("> ul .tve_tS").removeClass("tve_tS"),p.find("> .tve_scTC").hide(),a.addClass("tve_tS"),q.show()}else if(a.hasClass("tve_font_selector")){if("button"===c){var r=tve_handle_integer_or_float(a.parents(".tve_menu").find("input.tve_font_size").val());b.find("a.tve_btnLink").removeClass(custom_font_classes).addClass(a.attr("data-cls")).css("font-size",r+"px").find(".tve_btn_txt, .tve_btn_text").removeClass(custom_font_classes).addClass(a.attr("data-cls"))}else if("post_grid"===c)b.find(".tve-post-grid-title").removeClass(custom_font_classes).addClass(a.attr("data-cls")),b.tve_post_grid().config().update(a.attr("data-cls"),"custom-font-class"),b.tve_post_grid().after_render();else if("widget_menu"===c)b.tve_widget_menu().font(a.attr("data-cls"));else if("lead_generation_submit"===c){var n=b.find(".tve_lg_submit button");n.removeClass(custom_font_classes).addClass(a.attr("data-cls")),load_button_values(n,c)}else b.removeClass(custom_font_classes).addClass(a.attr("data-cls")),b.find("span.bold_text, span.italic_text, span.underline_text, span.strikethrough_text").removeClass(custom_font_classes).addClass(a.attr("data-cls"));tve_set_selected_dropdown(a)}else if(a.hasClass("tve_line_height_unit"))a.find(">span").remove(),tve_set_selected_dropdown(a),a.parents(".tve_menu").first().find("#tve_line_height").trigger("change");else if(a.hasClass("tve_icon_align"))b.parent().removeClass("alignleft alignright aligncenter").addClass(a.attr("data-cls"));else{if(!a.hasClass("tve_fill_counter_align"))return"lead_generation_image_submit"===c?tve_try_call_control(a,b.find(".tve_lg_image_submit"),d,"click"):tve_try_call_control(a,b,d,"click");b.removeClass("alignleft alignright aligncenter").addClass(a.attr("data-cls"))}}return!0}function tve_event_mousedown(a,b,c,d){switch(b=get_element_from_wrapper(b,c),a.attr("id")){default:return tve_try_call_control(a,b,d,"mousedown")}}function tve_try_call_control(a,b,c,d){var e=a.attr("data-ctrl-"+d),f=a.attr("data-args-"+d);if(e=e?e:a.attr("data-ctrl"),!e)return a.attr("data-plugin")&&b[a.attr("data-plugin")]()[a.attr("data-fn")](a),!0;var g=tve_parse_ctrl_string(e,!0);return"function"!=typeof g[1]?!0:(f=f?f:a.attr("data-args"),f=f?f.split(","):[],f.push(a,b,c),g[1].apply(g[0],f)!==!1)}function tve_after_apply_custom_color(a,b){a.hasClass("tve_table")&&(a.removeClass("tve_no_border tve_brdr_none"),load_button_values(a.parents(".edit_mode").first(),"table"))}function tve_set_selected_dropdown(a,b){if("undefined"==typeof b&&(b=!1),a.length){var c=a.parents(".tve_option_separator").find("span").first();c.html(b?c.attr("data-default"):a.text())}}function tve_show_tinymce_popup(a){jQuery("body").addClass("mce_open"),jQuery(".tve_mce_holder_overlay").show(),jQuery("#tve_mce_holder").show(),"undefined"!=typeof tinymce&&(!tinymce.activeEditor||tinymce.activeEditor.isHidden()?jQuery("#tve_tinymce_tpl").val(a):tinymce.activeEditor.setContent(a))}function tve_hide_tinymce_popup(){jQuery("body").removeClass("mce_open"),jQuery(".tve_mce_holder_overlay").hide(),jQuery("#tve_mce_holder").hide()}function tve_landing_page_select(a){tve_save_post(!1,function(){tve_save_post_extra("landing_page",{tve_landing_page:a},function(){window.onbeforeunload=null,location.reload()})})}function tve_landing_page_reset(){TVE_Editor_Page.overlay(),tve_save_post_extra("landing_page_reset",{},function(){window.onbeforeunload=null,location.reload()})}function tve_landing_page_save(a){TVE_Editor_Page.overlay(),tve_save_post_extra("landing_page_save",{name:a},function(){TVE_Editor_Page.overlay("close")})}function tve_landing_pages_load(a){"undefined"==typeof a&&(a={}),a.action="tve_landing_pages_load",a.security=tve_path_params.tve_ajax_nonce,TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,a,function(a){jQuery("#tve_user_landing_pages").html(a),TVE_Editor_Page.overlay("close")})}function tve_landing_pages_filter(){var a="";jQuery(".tve_landing_page_filters:visible input.tve_change:checked").each(function(){a+=(a?",.":".")+this.value});var b=jQuery("#tve_default_landing_pages");return a?void b.find(".tve_grid_cell").hide().filter(a).show():void b.find(".tve_grid_cell").show()}function tve_landing_page_delete(a){tve_save_post_extra("landing_page_delete",{tve_landing_page:a},function(a){jQuery("#tve_user_landing_pages").html(a),TVE_Editor_Page.overlay("close")})}function tve_get_tinymce_content(){return"undefined"==typeof tinymce?"":!tinymce.activeEditor||tinymce.activeEditor.isHidden()?jQuery("#tve_tinymce_tpl").val():tinymce.activeEditor.getContent()}function tve_parse_ctrl_string(a,b){if(TVE_Content_Builder.global_func_cache||(TVE_Content_Builder.global_func_cache={}),"undefined"!=typeof TVE_Content_Builder.global_func_cache[a])return"undefined"==typeof b?TVE_Content_Builder.global_func_cache[a][1]:TVE_Content_Builder.global_func_cache[a];a=a.replace("function:","");var c=a.split("."),d=c.shift(),e=TVE_Content_Builder,f=window;if(c.length)for(f=e,e="undefined"!=typeof e[d]?e[d]:null;c.length&&e;)d=c.shift(),f=e,e="undefined"!=typeof e[d]?e[d]:null;else e=window[d];return null===e?!1:(TVE_Content_Builder.global_func_cache[a]=[f,e],"undefined"==typeof b?e:[f,e])}function tve_upgrade_element(a){var b=get_element_from_wrapper(jQuery(".edit_mode"),a);switch(a){case"button":if(!b.hasClass("tve_nb")&&(b.addClass("tve_nb"),b.find("div.tve_left").length)){var c=b.find("div.tve_left").html()+'<span class="tve_btn_divider"></span>',d=jQuery.trim(b.find("a").text());b.find("div.tve_left").replaceWith(jQuery('<span class="tve_left tve_btn_im"></span>').html(c)),b.find("a").contents().filter(function(){return 3===this.nodeType}).remove(),b.find("a").append('<span class="tve_btn_txt">'+d+"</span>")}}}function tve_signum(a){return"number"==typeof a?a?0>a?-1:1:a===a?0:NaN:NaN}var TVE_Content_Builder=TVE_Content_Builder||{};TVE_Content_Builder.validator={validators:{required:function(a){return a.val()?!0:tve_path_params.translations.RequiredValue}},isValid:function(a){var b,c=!0;return jQuery(a).find(".tve_ctrl_validate").each(function(){b=TVE_Content_Builder.validator.validateElement(jQuery(this)),c=c&&b}),c||tve_add_notification(tve_path_params.translations.CorrectTheMarkedErrors,!0),c},validateElement:function(a){var b,c=a.attr("data-validators"),d=!0;if(!c)return callback(!0);c=c.split(";");for(var e,f=0;e=c[f++];)this.validators[e]&&(b=this.validators[e](a),b!==!0?(a.addClass("tve_ctrl_error"),a.attr("title",b),d=!1):(a.removeClass("tve_ctrl_error"),a.removeAttr("title")));return d},addRule:function(a,b){this.validators[a]=b}},TVE_Content_Builder.add_filter=function(a,b){this.filter_callbacks||(this.filter_callbacks={}),this.filter_callbacks[a]||(this.filter_callbacks[a]=[]),this.filter_callbacks[a].push(b)},TVE_Content_Builder.apply_filters=function(a,b){if(arguments.length<1)return"undefined"!=typeof b?b:null;if(this.has_filter(a))for(var c,d=Array.prototype.slice.call(arguments,1),e=0;c=this.filter_callbacks[a][e++];)jQuery.isFunction(c)&&(b=c.apply(window,d));return b},TVE_Content_Builder.has_filter=function(a){return this.filter_callbacks&&this.filter_callbacks[a]&&this.filter_callbacks[a].length},TVE_Content_Builder.link_compliant=function(a){return 0===a.indexOf("#")||a.match(/^http(s)?/)||a.match(/^\/\//)||(a="http://"+a),a},TVE_Content_Builder.max_width_px=function(a){var b,c=a.css("max-width");return c?b="100%"===c?a.parent().width():parseInt(c):null},editable_elements="p,h1,h2,h3,h4,h5,h6,address,pre,img,th,td,li,blockquote,.thrv_wrapper,.tve_ts_o span,span.tve_ts_copy-aut, .tve_ts_copy-aut span .tve_btnLink span, .tve_ct_title, .thrv_tw_qs_button span span, .tve_editable, .tve_ca .tve_btnLink > span",block_editing_elements=".thrive_leads_shortcode *, .thrive-shortcode-html, .thrive-shortcode-html *, .tve_custom_html_placeholder, .tve_custom_html_placeholder *, .thrv_custom_html_shortcode *, .thrv_post_grid *, .tve_no_edit, .tve_more_tag, .table_placeholder, .table_placeholder *, .image_placeholder, .image_placeholder *, .borderless_placeholder, .borderless_placeholder *, .ui-datepicker-header *,.tve_wp_shortcode *, #tve_mce_holder *, .code_placeholder, .thrv_widget *, .tve_ts_o img, .thrv_widget_menu ul *",block_clear_focus=".edit_mode, .edit_mode:not(.tve_p_lb_control,.tve_lp_content,.tve_wrap_all) *, .tve_secondLayer, .tve_secondLayer *, .tve_lightbox_content, .tve_lightbox_content *, .ui-datepicker-header *, .media-modal *, #tve_mce_holder *";var text_elements="p,h1,h2,h3,h4,h5,h6,span,li,blockquote,th:not(.tve_table_cell),td:not(.tve_table_cell),address,pre";text_elements_inline_only=".tve_cb_cnt h3, .tve_fg h1, .tve_fg h3, .tve_ca h3, .tve_ca h1, .tve_tS, .tve_grt h3, .tve_ts span, .tve_btnLink > span, .tve_ct_title, .thrv_tw_qs_button span span, .thrv_tw_quote p, .thrv_widget_menu .tve_menu_title",text_element_no_formatting=".tve_no_edit",selection_loss_tags="font, b, i, u, span",elements_no_left_menu=".tve_gri .image_placeholder, .table_placeholder",left_menu_hover_items=".thrv_wrapper:not(.thrv_paste_content), .tve_faq, p:not(.tve_more_tag), h1, h2, h3, h4, h5, h6",right_menu_hover_items="p, h1, h2, h3, h4, h5, h6, address, pre, .thrv_wrapper, blockquote, .tve_clearfix li, .thrv_wrapper p, ol, ul:not(.tve_scT > ul, .thrv_bullets_shortcode ul), ol li, ul li, .tve_faq, .tve_table_cell, .tve_p_lb_control, .thrv_feature_grid .tve_gri > .tve_image,.tve_element_hover",elements_with_no_menu_icons=".tve_table_cell, .thrv_tw_quote p, .tve_p_lb_control, .tve_editor_main_content, .tve_lp_content, .tve_no_icons, .thrv_widget_menu .tve_menu_title, .tve_lg_input_container .thrv_icon, .thrive-shortcode-html, .thrive-shortcode-html *",elements_no_highlight=".thrive-shortcode-html *, .thrive_leads_shortcode *",elements_without_delete_button=".thrv_toggle_shortcode h4, .thrv_testimonial_shortcode img, .tve_colm, .thrv_post_grid *, .thrv_custom_html_shortcode *, .tve_table_cell, .tve_rating_stars > span, .tve_rating_stars, .tve_wp_shortcode *, .thrv_widget *, .thrv_widget_menu ul *",contains_nested_elements=["UL","OL"],block_tags=["ADDRESS","BLOCKQUOTE","P","H1","H2","H3","H4","H5","H6","OL","UL","PRE"],window.last_colour_used="tve_red",window.tve_custom_colours=[],window.tve_custom_colours=tve_path_params.tve_colour_picker_colours,thrv_custom_classes=["edit_light","edit_dark","edit_mode","tve_image","alignleft","aligncenter","alignright","rfs","rft"],custom_html_placeholder_class="tve_custom_html_placeholder",custom_html_default_html='<div class="tve_shortcode_overlay" style="width: 100%; height: 40px; background-color: rgba(0, 0, 0, 0.4); color: #fff; text-align: center;"><span style="display: inline-block; padding-top: 10px">No preview available.</span></div>',border_styles="tve_brdr_none tve_brdr_dotted tve_brdr_dashed tve_brdr_solid tve_brdr_double tve_brdr_groove tve_brdr_ridge tve_brdr_inset tve_brdr_outset",img_styles="img_style_dark_frame img_style_framed img_style_lifted_style1 img_style_lifted_style2 img_style_polaroid img_style_rounded_corners img_style_circle img_style_caption_overlay",thrv_custom_classes=thrv_custom_classes.concat(img_styles.split(" "));var last_mouse_down=null,colours_class_selector=[],tve_undoManager,custom_font_classes="";jQuery.each(tve_path_params.custom_fonts,function(){custom_font_classes+=(custom_font_classes?" ":"")+this.font_class}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d,e=b?b:0;if(!this)throw new TypeError;if(d=this.length,0===d||e>=d)return-1;for(0>e&&(e=d-Math.abs(e)),c=e;d>c;c++)if(this[c]===a)return c;return-1}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" "+tve_path_params.translations.NullOrNotDefined);var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" "+tve_path_params.translations.NotFunction);for(arguments.length>1&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),String.prototype.sanitize_for_hash=function(){if(!this||!this.length)return"";var a=new RegExp("([^a-zA-Z0-9-_/!@\\?])","g"),b=this.replace(a,"-");return b.replace(new RegExp("(-+)","g"),"-")},jQuery(document).ready(function(){editable_elements=TVE_Content_Builder.apply_filters("editable_elements",editable_elements),elements_no_left_menu=TVE_Content_Builder.apply_filters("elements_no_left_menu",elements_no_left_menu),elements_with_no_menu_icons=TVE_Content_Builder.apply_filters("elements_no_left_menu",elements_with_no_menu_icons),TVE_Editor_Page.onDOMReady(),TVE_Editor_Page.initEditorActions(),TVE_Editor_Page.overlay();var a={post_id:tve_path_params.post_id,admin_url:tve_path_params.admin_url,style_families:tve_path_params.style_families,loaded_style:tve_path_params.loaded_style,editor_dir:tve_path_params.editor_dir,preview_url:tve_path_params.preview_url,is_thrive_theme:tve_path_params.is_thrive_theme,current_theme_name:tve_path_params.current_theme_name,display_options:tve_path_params.cpanel_display_options,thrive_optins:tve_path_params.thrive_optins?tve_path_params.thrive_optins:[],thrive_optin_colors:tve_path_params.thrive_optin_colors?tve_path_params.thrive_optin_colors:[],wp_timezone:tve_path_params.wp_timezone,wp_timezone_offset:tve_path_params.wp_timezone_offset,posts_categories:tve_path_params.posts_categories,custom_menus:tve_path_params.custom_menus,landing_page:tve_path_params.landing_page?tve_path_params.landing_page:"",landing_page_lightbox:tve_path_params.landing_page_lightbox,landing_page_config:tve_path_params.landing_page_config,font_settings_url:tve_path_params.font_settings_url,post_type:tve_path_params.post_type,menus:tve_path_params.menus,page_top_buttons:tve_path_params.page_top_buttons?tve_path_params.page_top_buttons:[],action:"tve_ajax_load",ajax_load:"control_panel"};tve_path_params.custom_post_data&&jQuery.each(tve_path_params.custom_post_data,function(b,c){a[b]=c}),jQuery.ajaxSetup({xhrFields:{withCredentials:!0}}),jQuery.post(tve_path_params.ajax_url,a,function(a){var b=jQuery("html").css("margin-top");b=parseInt(b),jQuery("body").prepend(a).addClass("tve_editor_page "+tve_path_params.extra_body_class),jQuery("#tve_cpanel_onpage").draggable({handle:".tve_options_headline .tve-ic-move",axis:"y",start:function(a,c){jQuery("#wpadminbar").length&&"relative"==jQuery("body").css("position")&&c.helper.css("margin-top",parseInt(c.helper.css("margin-top"))-(isNaN(b)?0:b))}}),TVE_Content_Builder.drag.init(),jQuery("#tve_update_content").on("click",function(){tve_save_post(!0)}),TVE_Content_Builder.controls.dropdown_menus();for(var c,d=0;c=tve_path_params.shortcode_colours[d++];)jQuery(".tve_cpanel_onpage .tve_"+c+":not(.tve_bullets_menu)").click(function(a){var b=jQuery(this);tve_set_window_content_before_action(),tve_change_shortcode_colour.call(b,b.attr("class"),jQuery(".edit_mode")),tve_set_window_content_after_action(),a.preventDefault()}),colours_class_selector[d]="tve_"+c;colours_class_selector=colours_class_selector.join(" "),jQuery(".btn_alignment").click(function(){alignment=jQuery(this).attr("id"),tve_change_shortcode_alignment(alignment,jQuery(".edit_mode"))}),tve_init_sliders(),tve_undoManager=new UndoManager(5,jQuery("#tve_undo_manager").click(function(){jQuery(this).hasClass("tve-disabled")||"enabled"===TVE_Editor_Page.STATE&&tve_undoManager.undo()}),jQuery("#tve_redo_manager").click(function(){jQuery(this).hasClass("tve-disabled")||"enabled"===TVE_Editor_Page.STATE&&tve_undoManager.redo()})),tve_undoManager.setCallback(function(a){void 0!==a&&a.length?window.onbeforeunload=function(){return tve_path_params.translations.LeavePageUnsavedChanges}:window.onbeforeunload=null}),TVE_Editor_Page.bindListeners(".tve_menu, #tve_cpanel, #tve_lightbox_frame, #tve_mce_holder, .tve_event_root, #tve_social_sort"),jQuery(".tve_datepicker").each(function(){var a=jQuery(this),b=null;switch(this.id){case"ct_date":b=function(a){jQuery(".edit_mode").tve_countdown_timer().set("date",a.val())}}a.datepicker({dateFormat:"yy-mm-dd",onSelect:function(){"function"==typeof b&&b(a)}}).attr("readonly","readonly")}),TVE_Content_Builder.apply_filters("main_ajax_callback"),TVE_Editor_Page.overlay(!0)})});var clearFocus=function(a){if("disabled"===TVE_Editor_Page.STATE)return!1;var b=jQuery(a.target);if(b.hasClass("tve_no_hide"))return!0;if(!b.is(block_clear_focus)||1===a.forceExit||b.is("#tve_submenu_close")){var c=rangy.getSelection(),d=!1;if(c.rangeCount>0&&c.toString().length){var e=c.getRangeAt(0),f=e.commonAncestorContainer;3==f.nodeType&&(f=f.parentNode),last_mouse_down===f&&(d=!0)}if(1!==a.forceExit&&!b.is("#tve_submenu_close")&&(d||c.toString().length&&b.hasClass("edit_mode")))return!1;c.toString().length&&c.removeAllRanges();var g=jQuery(".edit_mode");g.parent().is("a")&&g.parent().data("remove-draggable")&&(g.parent().removeAttr("draggable"),g.parent().data("remove-draggable",0)),g.off(".editHyperlinks"),g.parent().is(".thrv_tw_quote")&&g.text().length>140&&tve_add_notification(tve_path_params.translations.TweetLimitAcceptsMax,!0,4e3),g.is(".tve_landing_fonts")&&g.removeClass("tve_landing_fonts"),tve_hide_hyperlink_options(),a.stopPropagation&&a.stopPropagation(),tve_refresh(!1),jQuery(document).off(".clearFocus"),TVE_Editor_Page.restoreMenu(),TVE_Editor_Page.CPANEL_OPEN=!1}else b.is(block_clear_focus)&&!b.hasClass("tve_active_hyperlink")&&b.children(".tve_active_hyperlink").length&&tve_hide_hyperlink_options()};jQuery.getComputedStyle=function(a,b){return window.getComputedStyle?window.getComputedStyle(a,b):a.currentStyle?a.currentStyle:null};var tve_stylesheet=null,TVE_Editor_Page={STATE:"enabled",CPANEL_OPEN:!1,SHIFT_KEY:!1,editor:null,event:null,winWidth:null,htmlOffset:null,last_mce_id:"tve_reusable_tinymce",save_notification_timeout:null,onDOMReady:function(){this.winWidth=jQuery(window).width();var a=jQuery("body").addClass("wp-admin-bar");jQuery(document).on("mousedown",".upload_image",function(a){a.preventDefault(),thrive_open_media(jQuery(this),"load","image_element")}).on("mousedown",".upload_image_cpanel",function(a){a.preventDefault(),thrive_open_media(jQuery(".edit_mode"),"save","image_element")}).on("mouseleave","#delete_icon, #duplicate_icon",function(a){jQuery(".active_delete, .active_duplicate").removeClass("active_delete active_duplicate"),jQuery("#duplicate_icon, #delete_icon").hide(),a.stopPropagation()}),jQuery("html").addClass("tve-html-editor").on("click","#delete_icon",function(a){element=jQuery(".active_delete"),tve_set_window_content_before_action(),remove_element(element,element.parent()),tve_set_window_content_after_action(),
hide_menu_icons(),a.stopPropagation(),a.preventDefault()}).on("click","#duplicate_icon",function(a){element=jQuery(".active_duplicate"),tve_set_window_content_before_action(),duplicate_element(element),tve_set_window_content_after_action(),hide_menu_icons(),a.stopPropagation()}),activate_editmode_keyboard_listener(),add_element_menu_icons(),jQuery(this).bind("editor.oncolorpickerchange",jQuery.proxy(this.onColorpickerChange,this)),jQuery(this).bind("editor.onundo",jQuery.proxy(this.onUndoAction,this)),a.on("mousedown",".wp-picker-container",function(a){window.textselection||(window.textselection=rangy.saveSelection())}),rangy.init(),jQuery(document).on("keydown",function(a){if(a.shiftKey&&!TVE_Editor_Page.SHIFT_KEY&&(TVE_Editor_Page.SHIFT_KEY=!0,jQuery(TVE_Editor_Page).trigger("editor.shiftpressed")),a.ctrlKey&&!a.altKey&&83==a.which)return tve_save_post(!0),!1;if("enabled"!==TVE_Editor_Page.STATE)return!0;if(a.ctrlKey&&!a.altKey)90==a.which?tve_undoManager.undo():89==a.which&&tve_undoManager.redo();else if(a.altKey&&TVE_Editor_Page.CPANEL_OPEN){var b=[109,189,45,109,173],c=[61,187,107,43];-1!==jQuery.inArray(a.which,b)?TVE_Editor_Page.minimizeMenu():-1!==jQuery.inArray(a.which,c)&&TVE_Editor_Page.restoreMenu()}else if(27==a.which)a.forceExit=1,clearFocus(a);else if(38==a.which){var d=jQuery("input:focus");if(!d.is(".margin-control")&&!d.is(".padding-control")&&!d.is(".tve_font_size"))return!0;d.val(parseInt(d.val())+1).change()}else if(40==a.which){var d=jQuery("input:focus"),e=parseInt(d.val())-1;if(!d.is(".margin-control")&&!d.is(".padding-control")&&!d.is(".tve_font_size"))return!0;d.val(0>e?0:e).change()}}),jQuery(document).on("keyup",function(a){TVE_Editor_Page.SHIFT_KEY=!1,jQuery(TVE_Editor_Page).trigger("editor.shiftreleased")})},initEditorActions:function(){tve_stylesheet=function(){var a=jQuery(".tve_custom_style");a.length||(a=jQuery('<style type="text/css" class="tve_custom_style"></style>').appendTo(jQuery("head")));var b=a[0];return b.styleSheet?b.styleSheet.cssText=b.styleSheet.cssText+"":b.appendChild(document.createTextNode("")),b.sheet}(),this.editor=jQuery("#tve_editor"),this.editor.on("paste",".edit_mode",function(a){tve_set_window_content_before_action();var b=rangy.saveSelection(),c=jQuery(".edit_mode"),d=jQuery("<div contenteditable></div>");d.css("position","absolute").css("left","-8000px").css("top",c.offset().top+"px").attr("id","pasteHelper").appendTo("body"),d.focus(),setTimeout(function(){jQuery(".edit_mode").focus();var a=rangy.getSelection();rangy.restoreSelection(b),a.deleteFromDocument();var e=a.getRangeAt(0),f=tve_filter_paste(d),g=document.createElement("div");g.innerHTML=f;for(var h,i,j=document.createDocumentFragment(),k=!1;h=g.firstChild;)3!==h.nodeType&&(k=!0),i=j.appendChild(h);if(k){var l=jQuery();jQuery.each(j.childNodes,function(){l=3===this.nodeType?l.add(jQuery("<p></p>").html(this.nodeValue)):l.add(this)}),l=jQuery('<div class="thrv_paste_content thrv_wrapper"></div>').append(l),rangy.tve_get_selection_node().after(l),TVE_Content_Builder.drag.ensure_dropzones(l),TVE_Content_Builder.drag.bind_draggable(l),c.is(text_elements)&&!c.html().length&&c.remove(),clearFocus({forceExit:1}),hide_control_panel_menu()}else e.insertNode(j),e.collapseAfter(i);rangy.getSelection().setSingleRange(e),d.remove(),tve_set_window_content_after_action(!0)})}),jQuery(".thrv_post_grid").tve_post_grid().after_render().masonry(),tve_refresh(!0),this.bind();var a=jQuery(".thrv_countdown_timer");a.length&&a.addClass("init_done").each(function(){jQuery(this).hasClass("tve_countdown_timer_evergreen")?jQuery(this).tve_countdown_timer_evergreen().update():jQuery(this).tve_countdown_timer().update()}),this.bindListeners("#tve_editor"),TVE_Content_Builder.drag.editorActions(),this.enableSaveWarning()},bindListeners:function(a){jQuery(a).on("change",".tve_change",function(a){var b=jQuery(this),c="";b.parents(".tve_menu").length&&(c=b.parents(".tve_menu").first().parent().attr("id").replace("_menu","")),b.attr("data-skip-undo")||tve_set_window_content_before_action(),b.data("type",c),tve_event_change(b,jQuery(".edit_mode"),c,a),b.attr("data-skip-undo")||tve_set_window_content_after_action()}).on("click",".tve_click",function(a){var b=jQuery(this),c="";b.parents(".tve_menu").length&&(c=b.parents(".tve_menu").first().parent().attr("id").replace("_menu","")),b.attr("data-skip-undo")||tve_set_window_content_before_action(),b.data("type",c);var d=tve_event_click(b,jQuery(".edit_mode"),c,a);b.attr("data-skip-undo")||tve_set_window_content_after_action(),d&&a.stopPropagation()}).on("mousedown",".tve_mousedown",function(a){var b=jQuery(this),c="";b.parents(".tve_menu").length&&(c=b.parents(".tve_menu").first().parent().attr("id").replace("_menu","")),b.data("type",c),b.attr("data-skip-undo")||tve_set_window_content_before_action(),tve_event_mousedown(b,jQuery(".edit_mode"),c,a),b.attr("data-skip-undo")||tve_set_window_content_after_action()}).on("keyup",".tve_keyup",function(a){var b=jQuery(this),c="";b.parents(".tve_menu").length&&(c=b.parents(".tve_menu").first().parent().attr("id").replace("_menu","")),b.data("type",c),tve_try_call_control(b,jQuery,a,"keyup")})},disable:function(){this.STATE="disabled"},enable:function(){this.STATE="enabled",jQuery(this).trigger("editor.onenable")},bind:function(){var a=this;this.editor.on("mousedown",editable_elements,function(a){jQuery(a.target).is("input, textarea, select")&&a.preventDefault()}),this.editor.on("click",editable_elements,function(b){b.preventDefault(),"enabled"===a.STATE&&a.CPANEL_OPEN===!1&&tve_editor_init(b,jQuery(this))}),this.editor.on("mousedown",function(a){last_mouse_down=a.target});var b=function(a){if(a.ctrlKey){var b="";switch(a.keyCode){case 66:b="bold_text";break;case 73:b="italic_text";break;case 85:b="underline_text"}""!==b&&(tve_set_window_content_before_action(),TVE_Content_Builder.controls.rangy_cls(null,null,a,b),a.preventDefault(),a.stopPropagation(),tve_set_window_content_after_action())}};return this.editor.on("keydown",".edit_mode",b),this},onColorpickerChange:function(a,b,c,d){if("undefined"!=typeof b){var e=get_element_from_wrapper(jQuery(".edit_mode"),b);switch(b){case"page_section":var f=e.tve_page_section();"background-color"==c&&f.clearBgImage().clearBgPattern(),f.transferShadow();break;case"responsive_video":var g=e.tve_responsive_video(),h=d.color_value.replace("#","");g.set(h,"color")}}},onUndoAction:function(){var a=jQuery(".edit_mode");jQuery(".tve_cpanel_onpage:visible").length?load_button_values(a,get_shortcode_type_from_edit_mode(a)):a.removeClass("edit_mode"),TVE_Content_Builder.drag.refresh(!0)},getPositionOffset:function(a){if(null!==this.htmlOffset)return this.htmlOffset;for(var b,c=a.parent(),d=0,e=!1;!c.is("html");){if(b=c.css("position"),b&&"static"!=b){d+=c.offset().top,e=!0;break}c=c.parent()}return e||(d+=c.offset().top),this.htmlOffset=d,d},overlay:function(a){var b=jQuery("#tve_page_loader");return"undefined"!=typeof a?void b.removeClass("tve-open"):void b.addClass("tve-open")},thriveShrtcodeConfig:function(a,b){var c="__CONFIG_"+b+"__";return{update:function(a,b){var c=this.get();c[b]=a,this.save(c)},save:function(b){a.html(c+JSON.stringify(b)+c)},get:function(){var b=new RegExp(c,"g");return JSON.parse(a.html().replace(b,""))}}},minimizeMenu:function(){jQuery(".tve_cpanel_onpage").addClass("tve_m_minimized")},restoreMenu:function(){jQuery(".tve_cpanel_onpage").removeClass("tve_m_minimized")},getViewPort:function(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{width:e,height:f}},mouseClickAt:function(){var a=this.event.clientX||this.event.pageX,b=this.event.clientY||this.event.pageY;return{x:a,y:b}},enableSaveWarning:function(){var a=this;tve_path_params.tve_display_save_notification=parseInt(tve_path_params.tve_display_save_notification),tve_path_params.tve_display_save_notification&&!this.save_notification_timeout&&(this.save_notification_timeout=setInterval(function(){tve_add_notification('<div class="tve_icm tve-ic-close"></div><p><strong>Reminder</strong></p><br/><p>You have not saved your work for 10 minutes.</p><p>We recommend you perform a save to make sure you don\'t lose any work !</p></br><a id="tve-stop-saving-warning" style="display: block; text-align: right" href="javascript:void(0)">Stop reminding me for this work only !</a>',-1,6e3),jQuery("#tve-stop-saving-warning").click(function(){jQuery("#tve_notification_box").fadeOut(200),a.disableSaveWarning(),tve_path_params.tve_display_save_notification=0}),jQuery("#tve_notification_box .tve-ic-close").click(function(){jQuery(this).parent().fadeOut(200)})},6e5))},disableSaveWarning:function(){tve_path_params.tve_display_save_notification=parseInt(tve_path_params.tve_display_save_notification),tve_path_params.tve_display_save_notification&&(clearInterval(this.save_notification_timeout),this.save_notification_timeout=null)}},TVE_CellManager={table:null,buttons:null,drag:{mouse_down:!1,start_element:null,current_element:null,is_head:!1},mouse_move_cells:"> thead > tr > th:not(.tve_merge_disabled), > tbody > tr > td:not(.tve_merge_disabled)",head_cells:"> thead > tr > th",body_cells:"> tbody > tr > td",head:null,body:null,grid:null,init:function(a){jQuery(".edit_mode").removeClass("edit_mode"),"undefined"!=typeof a&&(this.table=a,tve_add_notification("Hold down the left mouse button on a cell and drag it across the highlighted table to select multiple cells!",!1,5e3)),this.head=this.table.find("> thead"),this.body=this.table.find("> tbody"),this.table.addClass("edit_mode tve_merge_cells").find("th, th *, td, td *").disableSelection(),this.buttons||(this.buttons=jQuery("#tve_table_merge_actions")),hide_control_panel_menu(),TVE_Editor_Page.disable(),this.showActionButtons(),this.bind(),this.table.tve_rows(0);var b=new TVE_Table_Grid(this.head,!0),c=new TVE_Table_Grid(this.body,!0);(isNaN(this.table.tve_cols())||isNaN(this.table.tve_rows()))&&(this.table.tve_rows(b.getRowCount()+c.getRowCount()),this.table.tve_cols(Math.max(b.getColCount(),c.getColCount())))},showActionButtons:function(){var a=this.table.offset(),b=a.top,c=this;this.buttons.css({left:a.left+"px",width:this.table.outerWidth()}).find(".btn_table_action").unbind("click").click(jQuery.proxy(this.onActionClick,this)),jQuery.when(this.buttons.show()).done(function(){c.buttons.css("top",b-c.buttons.outerHeight()-TVE_Editor_Page.getPositionOffset(c.buttons)+"px")})},onActionClick:function(a){switch(a.currentTarget.id){case"tve_merge_cells_cancel":return this.cancel();case"tve_merge_cells_merge":return this.merge();case"tve_merge_cells_split":return this.split();case"tve_table_add_row":return this.addRow();case"tve_table_add_column":return this.addColumn();case"tve_table_remove_row":return this.removeRow();case"tve_table_remove_col":return this.removeColumn();case"tve_table_insert_col_after":return this.insertColumn("after");case"tve_table_insert_col_before":return this.insertColumn("before");case"tve_table_insert_row_after":return this.insertRow("after");case"tve_table_insert_row_before":return this.insertRow("before")}},bind:function(){this.table.off().on("mousedown",this.head_cells+", "+this.body_cells,jQuery.proxy(this.mouseDown,this)),this.table.on("mousemove",this.mouse_move_cells,jQuery.proxy(this.mouseOver,this)),this.table.on("mouseup",this.head_cells+", "+this.body_cells,jQuery.proxy(this.mouseUp,this)),jQuery(TVE_Editor_Page).bind("editor.onenable",jQuery.proxy(this.cancel,this))},mouseDown:function(a){var b=jQuery(a.currentTarget);this.reset(),this.drag.mouse_down=!0,this.drag.start_element=b.addClass("tve_merge_selected"),b.is("td")?(this.table.find(this.head_cells).addClass("tve_merge_disabled"),this.drag.is_head=!1):(this.table.find(this.body_cells).addClass("tve_merge_disabled"),this.drag.is_head=!0),this.grid=new TVE_Table_Grid(this.drag.is_head?this.head:this.body,!1),this.grid.setStartCell(this.drag.start_element)},mouseUp:function(a){this.drag.mouse_down=!1,!this.table.data("selected-cells")&&this.grid&&this.table.data("selected-cells",this.grid.getRange(this.drag.start_element,jQuery(a.currentTarget))),this.table.find(".tve_merge_disabled").removeClass("tve_merge_disabled")},mouseOver:function(a){if(!this.drag.mouse_down)return!1;this.table.find("td,th").removeClass("tve_merge_selected"),this.drag.current_element=jQuery(a.currentTarget);var b=this.grid.getRange(this.drag.start_element,this.drag.current_element);this.table.data("selected-cells",b),jQuery.each(b,function(){this.cell.addClass("tve_merge_selected")})},reset:function(){this.table.find(".tve_merge_selected").removeClass("tve_merge_selected"),this.table.find(".tve_merge_disabled").removeClass("tve_merge_disabled"),this.table.data("selected-cells",null).data("selected-colspan",null).data("selected-rowspan",null),this.drag={mouse_down:!1,start_element:null,current_element:null,is_head:!1}},cancel:function(){return this.buttons.hide(),this.reset(),this.table.removeClass("edit_mode tve_merge_cells tve_table_light").off().find("th, th *, td, td *").enableSelection(),jQuery(TVE_Editor_Page).unbind("editor.onenable"),TVE_Editor_Page.enable(),this},merge:function(){if(this.table.data("selected-cells")){var a=jQuery(),b="",c=jQuery();jQuery.each(this.table.data("selected-cells"),function(d){0==d?a=this.cell:(c=c.add(this.cell),b+=this.cell.html())}),this.cancel(),tve_set_window_content_before_action();var d=jQuery("<div></div>").appendTo(a);a.attr({rowspan:this.grid.selection_rowspan,colspan:this.grid.selection_colspan}),(this.grid.selection_rowspan>1||this.grid.selection_colspan>1)&&(jQuery("#table_make_sortable").prop("checked",!1).prop("disabled",!0),this.table.removeClass("tve_make_sortable")),TVE_Content_Builder.drag.insert(b,d),c.remove(),tve_set_window_content_after_action(),this.init()}},split:function(){if(this.table.data("selected-cells")){var a=this.table.data("selected-cells"),b=this.grid;this.cancel(),tve_set_window_content_before_action(),jQuery.each(a,function(){return 1==this.colspan&&1==this.rowspan?!0:void b.split(this)}),tve_set_window_content_after_action(),this.init()}},addRow:function(){var a,b=this.table.tve_rows(),c=this.table.tve_cols();this.table.tve_rows(b+1),0!==c&&(a=0===b?new TVE_Table_Grid(this.head):new TVE_Table_Grid(this.body),this.cancel(),tve_set_window_content_before_action(),a.insertRow(a.grid.length-1,"after",c),tve_set_window_content_after_action(),this.alternateColors(),this.init())},addColumn:function(){var a=this.table.tve_rows(),b=this.table.tve_cols();this.table.tve_cols(b+1),0!==a&&(this.cancel(),tve_set_window_content_before_action(),this.table.find("> thead > tr").length&&new TVE_Table_Grid(this.head).insertColumn(b-1,"after",this.table.find("> thead > tr").length),this.table.find("> tbody > tr").length&&new TVE_Table_Grid(this.body).insertColumn(b-1,"after",a-this.table.find("> thead > tr").length),tve_set_window_content_after_action(),this.init())},removeColumn:function(){if(this.drag.start_element){var a=this.drag.start_element,b=this.drag.is_head;this.cancel(),tve_set_window_content_before_action();var c=this.grid.selection_start.col,d=this.grid.removeColumn(a);b?new TVE_Table_Grid(this.body).removeColumn(null,c,d):new TVE_Table_Grid(this.head).removeColumn(null,c,d),this.table.tve_cols(this.table.tve_cols()-d),tve_set_window_content_after_action(),this.init()}},removeRow:function(){if(this.drag.start_element){var a=this.drag.start_element,b=new TVE_Table_Grid(a.parent().parent());this.cancel(),tve_set_window_content_before_action();var c=b.removeRow(a);this.table.tve_rows(this.table.tve_rows()-c),a.is("th")&&(jQuery("#table_make_sortable").prop("checked",!1).prop("disabled",!0),this.table.removeClass("tve_make_sortable")),tve_set_window_content_after_action(),this.alternateColors(),this.init()}},insertColumn:function(a){if(this.drag.start_element&&(this.table.tve_cols(this.table.tve_cols()+1),0!=this.table.tve_rows())){var b=this.grid["before"==a?"selection_start":"selection_end"].col;this.cancel(),tve_set_window_content_before_action(),this.table.find("> thead > tr").length&&new TVE_Table_Grid(this.table.find("> thead")).insertColumn(b,a,this.table.find("> thead > tr").length),this.table.find("> tbody > tr").length&&new TVE_Table_Grid(this.table.find("> tbody")).insertColumn(b,a,this.table.tve_rows()-this.table.find("> thead > tr").length),tve_set_window_content_after_action(),this.init()}},insertRow:function(a){if(this.drag.start_element&&(this.table.tve_rows(this.table.tve_rows()+1),0!=this.table.tve_cols())){var b=this.grid["before"==a?"selection_start":"selection_end"];this.cancel(),tve_set_window_content_before_action(),this.grid.insertRow(b.row,a,this.table.tve_cols(),b.col),tve_set_window_content_after_action(),this.init()}},alternateColors:function(){if(this.table.hasClass("tve_table_alternating")){var a=this.body.find("tr.tve_odd").first().attr("data-tve-custom-colour"),b=this.body.find("tr.tve_even").first().attr("data-tve-custom-colour");this.body.find("tr").each(function(c,d){var e=jQuery(d);e.removeClass("tve_odd tve_even"),e.addClass(c%2===0?"tve_odd":"tve_even"),a&&c%2===0&&e.attr("data-tve-custom-colour",a),b&&c%2!==0&&e.attr("data-tve-custom-colour",b)})}}};TVE_Table_Grid=function(a,b){var c=[],d=jQuery;a.find("> tr").each(function(a){d(this).find("> td, > th").each(function(b){var e,f,g,h,i=d(this);if(c[a])for(;c[a][b];)b++;for(g=i.tve_rowspan(),h=i.tve_colspan(),f=a;a+g>f;f++)for(c[f]||(c[f]=[]),e=b;b+h>e;e++)c[f][e]={cell:i,rowspan:g,colspan:h,exists:f==a&&e==b,processed:!1,real_row:a,real_col:b}})}),this.grid=c,this.startPos=null,this.selection_colspan=1,this.selection_rowspan=1,this.container=a,this.is_head=a.is("thead"),this.selection_start={row:null,col:null},this.selection_end={row:null,col:null},"undefined"!=typeof b&&b&&(a.parent().tve_rows(parseInt(a.parent().tve_rows())+this.grid.length),this.grid[0]&&this.grid[0].length&&a.parent().tve_cols(this.grid[0].length))},TVE_Table_Grid.prototype.getRange=function(a,b){var c=this.startPos,d=this.getCellPosition(b);if(!c||!d)return jQuery();for(var e,f,g,h=Math.min(c.x,d.x),i=Math.max(c.x,d.x),j=Math.min(c.y,d.y),k=Math.max(c.y,d.y),l=k,m=i,n=0,o=!1,n=0;g=this.grid[n++];)for(var f,e=0;f=g[e++];)f.processed=!1;do{for(o=!1,n=h;m>=n;)f=this.grid[n][j],n+=f.rowspan,f.processed||f.exists||f.colspan>1&&(j=f.real_col,o=!0,f.processed=!0);for(e=j;l>=e;)f=this.grid[h][e],e+=f.colspan,f.processed||f.exists||f.rowspan>1&&(h=f.real_row,o=!0,f.processed=!0);for(n=h;m>=n;n++)for(e=j;l>=e;e++)f=this.grid[n][e],f.exists&&!f.processed&&(f.colspan>1&&f.colspan-1+e>l&&(l=e+f.colspan-1,o=!0,f.processed=!0),f.rowspan>1&&f.rowspan-1+n>m&&(m=n+f.rowspan-1,o=!0,f.processed=!0))}while(o);var p=[];for(n=h;m>=n;n++)for(e=j;l>=e;e++)this.grid[n][e]&&this.grid[n][e].exists&&p.push(this.grid[n][e]);return this.selection_rowspan=m-h+1,this.selection_colspan=l-j+1,this.selection_start.row=h,this.selection_start.col=j,this.selection_end.row=m,this.selection_end.col=l,p},TVE_Table_Grid.prototype.getCellPosition=function(a){for(var b=0,c=this.grid.length;c>b;b++)for(var d=0,e=this.grid[b].length;e>d;d++)if(this.grid[b][d].cell[0]===a[0])return{x:b,y:d};return null},TVE_Table_Grid.prototype.setStartCell=function(a){this.startPos=this.getCellPosition(a)},TVE_Table_Grid.prototype.split=function(a){var b=null;a.cell.attr("colspan",1).attr("rowspan",1);for(var c=1;c<a.colspan;c++)b=a.cell.clone().html(""),a.cell.after(b),TVE_Content_Builder.drag.ensure_dropzones(b),TVE_Content_Builder.drag.bind_draggable(b);if(1!=a.rowspan)for(var d=a.cell.parent(),e=a.real_row+1;e<a.real_row+a.rowspan;e++)if(d=d.next("tr"),0!=d.find("> td, > th").length){for(var f=a.real_col-1;f>=0;f--)if(this.grid[e][f].real_row==e){for(var g=0;g<a.colspan;g++)b=a.cell.clone().html("<p>Cell content</p>"),this.grid[e][f].cell.after(b),TVE_Content_Builder.drag.ensure_dropzones(b),TVE_Content_Builder.drag.bind_draggable(b);break}if(0==a.real_col||-1==f)for(var g=0;g<a.colspan;g++)b=a.cell.clone().html("<p>Cell content</p>"),d.prepend(b),TVE_Content_Builder.drag.ensure_dropzones(b),TVE_Content_Builder.drag.bind_draggable(b)}else for(var g=0;g<a.colspan;g++)b=a.cell.clone().html("<p>Cell content</p>"),d.append(b),TVE_Content_Builder.drag.ensure_dropzones(b),TVE_Content_Builder.drag.bind_draggable(b)},TVE_Table_Grid.prototype.removeColumn=function(a,b,c){a&&(c=a.tve_colspan(),b=this.getCellPosition(a).y);for(var d,e=0;d=this.grid[e++];)for(var f=b;b+c>f;f++){var g=d[f];1==g.colspan||a&&g.cell[0]===a[0]?g.cell.remove():g.real_col>=b&&g.real_col+g.colspan<=b+c?g.cell.remove():g.colspan>1?g.real_col<=b?g.real_col+g.colspan>=b+c?g.cell.attr("colspan",g.colspan-c):g.cell.attr("colspan",Math.abs(b-g.real_col)):g.cell.attr("colspan",g.real_col+g.colspan-b-c):g.cell.remove()}return c},TVE_Table_Grid.prototype.removeRow=function(a){for(var b=a.tve_rowspan(),c=this.getCellPosition(a),d=jQuery(),e=c.x;e<=c.x+b-1;e++)for(var f=0;f<this.grid[c.x].length;f++){var g=this.grid[e][f];if(f!=c.y&&1!=g.cell.tve_rowspan())if(g.exists)if(g.cell.tve_rowspan()+e<=c.x+b);else{var h=c.x+b-e,i=g.cell.clone().attr("rowspan",g.cell.tve_rowspan()-h);g.cell.attr("rowspan",h);var j=a.parent().next(),k=c.x+b;if(j.length>0){0==j.find("> td, > th").length&&j.append(i);for(var l=g.real_col-1;l>=0;l--)if(this.grid[k][l].real_row==k){this.grid[k][l].cell.after(i);break}(0==g.real_col||-1==l)&&j.prepend(i)}}else g.cell.attr("rowspan",g.cell.tve_rowspan()-1),f+=g.cell.tve_colspan()-1;else d=d.add(this.container.find("> tr:nth-child("+(e+1)+")"))}return d.remove(),b},TVE_Table_Grid.prototype.insertColumn=function(a,b,c){for(var d=this.is_head?'<th class="tve_table_cell"><p>Cell content</p></th>':'<td class="tve_table_cell"><p>Cell content</p></td>',e=this.grid[0]&&this.grid[0].length,f=jQuery(),g=0;c>g;g++){var h,i=e?this.grid[g][a]:null;if(i){var j=i.cell.clone().attr("colspan","1").attr("rowspan","1").html("<p>Cell content</p>"),h=this.getRealRow(g),k=!1;if(a!=this.grid[0].length-1||"after"!=b)if(0!=a||"before"!=b)if(i.colspan>1&&("after"==b&&i.real_col+i.colspan-1>a?(i.cell.attr("colspan",i.colspan+1),k=!0):"before"==b&&i.real_col<a&&(i.cell.attr("colspan",i.colspan+1),k=!0)),k)g+=i.rowspan-1;else{i="after"==b?this.getLastRealCell(g,a):this.getNextRealCell(g,a);var l=b;if(null===i&&(i="after"==b?this.getNextRealCell(g,a):this.getLastRealCell(g,a),l="after"==b?"before":"after"),null===i){h.append(j),f=f.add(j);continue}i.cell[l](j),f=f.add(j)}else h.prepend(j),f=f.add(j);else h.append(j),f=f.add(j)}else h=this.container.find("> tr:nth-child("+(g+1)+")"),h=h.length?h:jQuery('<tr class="tve_table_row"></tr>').appendTo(this.container),f=f.add(jQuery(d)),h.append(f.last())}TVE_Content_Builder.drag.bind_draggable(f),TVE_Content_Builder.drag.ensure_dropzones(f)},TVE_Table_Grid.prototype.insertRow=function(a,b,c){var d=this.is_head?'<th class="tve_table_cell"><p>Cell content</p></th>':'<td class="tve_table_cell"><p>Cell content</p></td>',e=jQuery('<tr class="tve_table_row"></tr>');if(-1===a){for(var f=0;c>f;f++)e.append(jQuery(d));return void this.container.append(e)}for(var g=this.getRealRow(a),h=jQuery(),i=0;c>i;i++){var j=this.grid[a][i],k=!1;j.rowspan>1&&("after"==b&&j.real_row+j.rowspan-1>a?(j.cell.attr("rowspan",j.rowspan+1),k=!0):"before"==b&&j.real_row<a&&(j.cell.attr("rowspan",j.rowspan+1),k=!0)),k||(h=h.add(this.grid[a][i].cell.clone().html("<p>Cell content</p>").attr({rowspan:1,colspan:1})))}g[b](e.append(h)),TVE_Content_Builder.drag.bind_draggable(e),TVE_Content_Builder.drag.ensure_dropzones(e)},TVE_Table_Grid.prototype.getRealRow=function(a){if(!this.grid[a])return jQuery();for(var b,c=0;b=this.grid[a][c++];)if(b.real_row==a)return b.cell.parent();return this.container.find("tr:nth-child("+ ++a+")")},TVE_Table_Grid.prototype.getLastRealCell=function(a,b){if(!this.grid[a])return null;for(var c=b;c>=0;c--)if(this.grid[a][c].real_row==a&&this.grid[a][c].real_col==c)return this.grid[a][c];return null},TVE_Table_Grid.prototype.getNextRealCell=function(a,b){if(!this.grid[a])return null;for(var c=b,d=this.grid[a].length;d>c;c++)if(this.grid[a][c].real_row==a&&this.grid[a][c].real_col==c)return this.grid[a][c];return null},TVE_Table_Grid.prototype.getRowCount=function(){return this.grid.length},TVE_Table_Grid.prototype.getColCount=function(){return this.grid[0]?this.grid[0].length:0},jQuery.expr[":"].contains=jQuery.expr.createPseudo(function(a){return function(b){return jQuery(b).text().toUpperCase().indexOf(a.toUpperCase())>=0}}),jQuery.fn.extend({tve_rowspan:function(){return this.attr("rowspan")?parseInt(this.attr("rowspan")):1},tve_colspan:function(){return this.attr("colspan")?parseInt(this.attr("colspan")):1},tve_rows:function(){return 0===arguments.length?parseInt(this.attr("data-rows")):this.attr("data-rows",arguments[0])},tve_cols:function(){return 0===arguments.length?parseInt(this.attr("data-cols")):this.attr("data-cols",arguments[0])},tve_color_selector:function(a){return"undefined"!=typeof a?a?this.attr("data-tve-custom-colour",a):this.removeAttr("data-tve-custom-colour"):this.attr("data-tve-custom-colour")},tve_remove_hover:function(){for(var a=0;10>a;a++)this.removeAttr("data-hover-"+a)},tve_css:function(a,b,c){if(b.length&&!c||!this[0]||!this[0].style.setProperty||!this[0].style.removeProperty)return this.css(a,b);var d={margin:["margin-left","margin-right","margin-top","margin-bottom"],padding:["padding-left","padding-right","padding-top","padding-bottom"]};return this.each(function(){var e=this;b.length?this.style.setProperty(a,b,c):d[a]?jQuery.each(d[a],function(a,b){e.style.removeProperty(b)}):this.style.removeProperty(a)})},tve_page_section:function(){var a=this,b=this.find("> .out"),c=b.find("> .in");return{ensureCompliant:function(){return c.find("> .cck").length||c.children().wrapAll('<div class="cck clearfix"></div>'),a},setBgPattern:function(a){this.clearBgImage().clearBgColor(),b.css({"background-image":"url('"+a+"')","background-repeat":"repeat"})},setBgImage:function(a){this.clearBgImage(),c.addClass("pddbg").css({"box-sizing":"border-box","background-image":"url('"+a.url+"')","background-repeat":"","max-width":TVE_Editor_Page.winWidth+"px"}),b.addClass("pswr"),this.transferShadow(),c.attr({"data-width":a.width,"data-height":a.height})},clearBgImage:function(){return c.removeClass("pddbg").css({"background-image":"","background-repeat":"","max-width":"","-moz-box-shadow":"","-webkit-box-shadow":"","box-shadow":"","box-sizing":""}),b.removeClass("pswr"),this},clearShadow:function(){return tve_remove_css_rule(b.tve_color_selector(),"box-shadow -moz-box-shadow -webkit-box-shadow"),b.add(c).css({"-moz-box-shadow":"","-webkit-box-shadow":"","box-shadow":""}),this},clearBgPattern:function(){return b.removeClass("pattern1 pattern2 pattern3"),b.css({"background-image":"","background-repeat":""}),this},clearBgColor:function(){return b.tve_color_selector()&&tve_remove_css_rule(b.tve_color_selector(),"background-color"),b.css("background-color",""),this},transferShadow:function(){var d=a.find(".out.pswr > .in");d.length?d.css({"-moz-box-shadow":b.css("-moz-box-shadow"),"-webkit-box-shadow":b.css("-webkit-box-shadow"),"box-shadow":b.css("box-shadow")}):c.css({"-moz-box-shadow":"","-webkit-box-shadow":"","box-shadow":""})},bgAttachment:function(b){if(c.removeClass("pdwbg"),b){var d=a.find(".out.pswr > .in");d.length&&c.addClass("pdwbg")}},bgAutoHeight:function(a){if(c.removeClass("pdfbg").css({"box-sizing":"",height:"","min-height":"",width:""}),a){var b=parseInt(c.attr("data-width")),d=parseInt(c.attr("data-height"));if(isNaN(b)||isNaN(d))return;var e=c.parent().width(),f=e*d/b;b>=e?c.css("min-height",f+"px"):c.css({"min-height":d+"px"}),c.addClass("pdfbg").css({"box-sizing":"border-box"})}},position:function(a){a="bot"===a?"bottom":a,b.removeClass("top bot bottom"),"default"!=a&&b.addClass(a)}}},tve_thrive_leads_shortcode:function(){var a=this,b=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"leads_shortcode");return{fetch:function(c){try{var d=b.get()}catch(e){var d={}}d.thrive_leads_shortcode_id=c,d.nowrap=1,d.action="tve_ajax_load",d.ajax_load="sc_thrive_leads_shortcode",TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,d,function(b){a.html(b),TVE_Editor_Page.overlay("close")})},config:function(){try{return b.get()}catch(a){return{}}}}},tve_thrive_optin:function(){var a=this,b=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"optin"),c=a.find("> .thrive-shortcode-html > .scon"),d=a.find("input[type=text],select").length,e=a.find(".btn");return{fetch:function(c){var d=b.get();d.optin=c,d.nowrap=1,d.action="tve_ajax_load",d.ajax_load="sc_thrive_optin",TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,d,function(b){a.html(b),TVE_Editor_Page.overlay("close")})},color:function(a){jQuery.each(tve_path_params.thrive_optin_colors,function(a){e.removeClass(a)}),e.addClass(a),b.update(a,"color")},size:function(a){e.removeClass("small medium big").addClass(a),b.update(a,"size")},layout:function(a){c.removeClass("wide otit o1 o2 o3"),"horizontal"==a&&(c.addClass("wide o"+d),d>=3&&c.addClass("otit")),b.update(a,"layout")},text:function(a){e.find("input").val(a),b.update(a,"text")},config:function(){return b.get()}}},tve_countdown_timer:function(){var a=this,b=function(a,b){if(a.empty(),99>=b)a.prepend('<span class="part-1">'+b%10+"</span>"),a.prepend('<span class="part-2">'+Math.floor(b/10)+"</span>");else for(var c=0;b;)c++,a.prepend('<span class="part-'+c+'">'+b%10+"</span>"),b=Math.floor(b/10)};return{set:function(b,c){a.attr("data-"+b,c),this.update()},get:function(b){return"_all"==b?this.get("date")+"T"+this.get("hour")+":"+this.get("min")+":00"+this.get("timezone"):a.attr("data-"+b)},update:function(){var c=new Date,d=new Date(this.get("_all"));a.find(".tve_t_text").hide().html(this.get("text")),a.find(".tve_t_part").show();var e,f=0,g=0,h=0,i=0;d>c&&(f=Math.floor((d.getTime()-c.getTime())/1e3),g=Math.floor(f/60),h=Math.floor(g/60),i=Math.floor(h/24),e=2,f%=60,g%=60,h%=24,i>99&&(e=i.toString().length)),b(a.find(".tve_t_sec .t-digits"),f),b(a.find(".tve_t_min .t-digits"),g),b(a.find(".tve_t_hour .t-digits"),h),b(a.find(".tve_t_day .t-digits"),i),d>c?a.find(".tve_t_day .t-digits").css("min-width",e*a.find(".tve_t_sec .t-digits > span").first().outerWidth()+"px"):a.find(".tve_t_day .t-digits").css("min-width","")},align:function(b){var c=a.children(".sc_timer_content");switch(c.css("margin-top",c.css("margin-top")),c.css("margin-bottom",c.css("margin-bottom")),b){case"left":c.removeClass("alignleft alignright aligncenter").addClass("alignleft");break;case"center":c.removeClass("alignleft alignright").addClass("tve_block_center");break;case"right":c.removeClass("alignleft alignright aligncenter").addClass("alignright");break;case"none":c.removeClass("alignleft alignright aligncenter").css("width","auto")}}}},tve_countdown_timer_evergreen:function(){var a=jQuery(this),b=a.tve_countdown_timer();return setValues=function(a,b){if(a.empty(),99>=b)a.prepend('<span class="part-1">'+b%10+"</span>"),a.prepend('<span class="part-2">'+Math.floor(b/10)+"</span>");else for(var c=0;b;)c++,a.prepend('<span class="part-'+c+'">'+b%10+"</span>"),b=Math.floor(b/10)},b.update=function(){var b=new Date,c=new Date;c.setTime(b.getTime()+24*parseInt(this.get("day"))*3600*1e3+3600*parseInt(this.get("hour"))*1e3+60*parseInt(this.get("min"))*1e3+1e3*parseInt(this.get("sec"))),a.find(".tve_t_text").hide().html(this.get("text")),a.find(".tve_t_part").show(),a.attr("data-id",_.uniqueId("evergreen_"));var d,e=0,f=0,g=0,h=0;return c>b&&(e=Math.floor((c.getTime()-b.getTime())/1e3),f=Math.floor(e/60),g=Math.floor(f/60),h=Math.floor(g/24),d=2,e%=60,f%=60,g%=24,h>99&&(d=h.toString().length)),setValues(a.find(".tve_t_sec .t-digits"),e),setValues(a.find(".tve_t_min .t-digits"),f),setValues(a.find(".tve_t_hour .t-digits"),g),setValues(a.find(".tve_t_day .t-digits"),h),c>b?a.find(".tve_t_day .t-digits").css("min-width",d*a.find(".tve_t_sec .t-digits > span").first().outerWidth()+"px"):a.find(".tve_t_day .t-digits").css("min-width",""),
this},b},tve_thrive_posts_list:function(){var a=this,b=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"posts_list");return{fetch:function(){var c=b.get();c.nowrap=1,c.action="tve_ajax_load",c.ajax_load="sc_thrive_posts_list",TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,c,function(b){a.html(b),TVE_Editor_Page.overlay("close")})},set:function(a,c){b.update(a,c),this.fetch()},config:function(){return b.get()}}},tve_thrive_custom_phone:function(){var a=this,b=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"custom_phone");return{fetch:function(){var c=b.get();c.nowrap=1,c.action="tve_ajax_load",c.ajax_load="sc_thrive_custom_phone",TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,c,function(b){a.html(b),TVE_Editor_Page.overlay("close")})},set:function(a,c){b.update(a,c),this.fetch()},config:function(){return b.get()}}},tve_thrive_custom_menus:function(){var a=this,b=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"custom_menu");return{fetch:function(){var c=b.get();c.nowrap=1,c.action="tve_ajax_load",c.ajax_load="sc_thrive_custom_menu",TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,c,function(b){a.html(b),TVE_Editor_Page.overlay("close")})},set:function(a,c){b.update(a,c),this.fetch()},config:function(){return b.get()}}},tve_tw_qs:function(){var a=this;return{config:function(a,b){if("undefined"==typeof a||0===a.length)throw"Invalid option";return"undefined"==typeof b?this.get(a):this.set(a,b)},set:function(b,c){return a.attr("data-"+b,c),this},get:function(b){return a.attr("data-"+b)}}},tve_contents_table:function(){var a=this,b={options:new Array,$container:null,init:function(){return this.config("columns",a.attr("data-columns")),this.initHeaders(),this.$container=a.find(".tve_contents_table"),this},set:function(a,b){return this.options[a]=b,this.saveConfig(a,b),this},get:function(a){return this.options[a]},saveConfig:function(b,c){a.attr("data-"+b,c)},updateHeaders:function(a){for(var b=0;b<this.options.headers.length;b++)if(this.options.headers[b]===a)return this.options.headers.splice(b,1),this.config("headers",this.options.headers.sort()),this;return this.options.headers.push(a),this.config("headers",this.options.headers.sort()),this},initHeaders:function(){return"undefined"==typeof a.data("headers")?this.config("headers",["h1","h2","h3"]):0===a.attr("data-headers").length?this.config("headers",[]):this.config("headers",a.attr("data-headers").split(",")),this},config:function(a,b){if("undefined"==typeof a||0===a.length)throw"Invalid option";return"undefined"==typeof b?this.get(a):this.set(a,b)},update:function(){var b=this;this.$container.find("a").remove(),this.options.headers.length&&(a.find(".tve_ct_content").html(""),jQuery("#tve_editor, #tve_editor .tve_editor_main_content").find(this.config("headers").join(",")).each(function(){var c=jQuery(this),d=c.attr("id")?c.attr("id"):b.generateNewID(),e=jQuery('<div class="'+b.getCssClass(c)+'" ><a href="#'+d+'">'+c.text()+"</a></div>");c.is(":visible")&&a.find(".tve_ct_content").append(e),c.attr("id",d)}),a.find(".tve_ct_title").text(this.config("title")),this.splitInColumns())},generateNewID:function(){for(var a=1,b="tab-con-"+a;jQuery("#"+b).length>0;)b="tab-con-"+ ++a;return b},getCssClass:function(a){return"tve_ct_level"+this.config("headers").indexOf(a[0].nodeName.toLowerCase())},splitInColumns:function(){a.find(".tve_ct_content").children(".leftCol, .rightCol").remove();for(var b=a.find(".tve_ct_content .tve_ct_level0").length,c=0,d=new Array,e=0;e<this.config("columns");e++){var f=jQuery('<div class="ct_column sep"></div>');d.push(f)}if(d.push(d.pop().removeClass("sep")),a.find(".tve_ct_content .ct_column").remove(),!(1>=b)){var g=0;a.find(".tve_ct_content").children(".tve_ct_level0, .tve_ct_level1, .tve_ct_level2").each(function(a){var e=jQuery(this);e.is(".tve_ct_level0")&&(g=Math.floor(c*d.length/b)),d[g].append(function(){return e}),e.is(".tve_ct_level0")&&c++}),a.find(".tve_ct_content").html("");for(var f,e=0;f=d[e++];)f.css("width",100/d.length+"%"),a.find(".tve_ct_content").append(f);var h=0;a.find(".ct_column").each(function(){var a=jQuery(this);a.height()>h&&(h=a.height())}),a.find(".ct_column").css("min-height",h+"px")}}};return b.init()},tve_responsive_video:function(){var a=this;return{fetch:function(){if(this.config("url")){var b=this.config("embeded-url")+this.queryString(this.config("type"));a.find("iframe").attr("src",b).attr("data-src",b),a.find(".tve_responsive_video_container").css("display","block"),a.find(".tve_green_button").remove(),a.removeClass("responsive_video_placeholder"),a.find(".no-video").remove()}else a.find("iframe").attr("src",""),a.find(".video_overlay").html('<h3 class="no-video" style="text-align: center">Insert a video URL</h3>');return this},set:function(b,c){return"url"===c?(a.attr("data-url",b),a.attr("data-embeded-url",this.embededUrl(b)),this.fetch()):(a.attr("data-"+c,b),this.fetch())},embededUrl:function(a){var b="";switch(this.config("type")){case"youtube":if(-1!==a.indexOf("embed"))return a;b="https://www.youtube.com/embed/";var c=a.split("?").pop().split("&").shift().split("=")[1];-1!==a.indexOf("youtu.be")&&(c=a.split("/").pop(),c=-1!==c.indexOf("?")?c.split("?").shift():c),b+=c;break;case"vimeo":b="https://player.vimeo.com/video/"+a.split("/").pop();break;case"wistia":b="//fast.wistia.net/embed/iframe/"+a.split("/").pop()}return b},queryString:function(a){var b,c="?";switch(a){case"youtube":b=new Array("rel="+("undefined"==typeof this.config("rel")?"1":this.config("rel")),"modestbranding="+("undefined"==typeof this.config("modestbranding")?"0":this.config("modestbranding")),"controls="+("undefined"==typeof this.config("controls")?"1":this.config("controls")),"showinfo="+("undefined"==typeof this.config("showinfo")?"1":this.config("showinfo")),"fs="+("undefined"==typeof this.config("fs")?"1":this.config("fs")),"wmode=transparent"),"undefined"!=typeof this.config("start-time")&&"0"!=this.config("start-time")&&b.push("start="+this.config("start-time")),c+=b.join("&");break;case"wistia":b=new Array("chromeless="+("undefined"==typeof this.config("controls")?"false":"0"===this.config("controls")),"controlsVisibleOnLoad="+("undefined"==typeof this.config("onload-controls")?"true":"1"===this.config("onload-controls")),"playbar="+("undefined"==typeof this.config("play-bar")?"true":"1"===this.config("play-bar")),"fullscreenButton="+("undefined"==typeof this.config("fs")?"true":"1"===this.config("fs")),"playerColor="+("undefined"==typeof this.config("color")?"ff0000":this.config("color")),"videoFoam=true"),"undefined"!=typeof this.config("start-time")&&"0"!=this.config("start-time")&&b.push("time="+this.config("start-time")),c+=b.join("&");break;case"vimeo":b=new Array("badge="+("undefined"==typeof this.config("modestbranding")?"1":this.config("modestbranding")),"title="+("undefined"==typeof this.config("showinfo")?"0":this.config("showinfo")),"color="+("undefined"==typeof this.config("color")?"ff0000":this.config("color"))),c+=b.join("&");break;default:c=""}return c},config:function(b){return a.attr("data-"+b)}}},tve_tabs:function(){var a=this,b=a.find("> .tve_scT"),c=function(a){return b.find("> .tve_scTC").eq(a.index())};return{isVertical:function(){return b.hasClass("tve_vtabs")},show:function(a){b.find("> ul li").eq(a).click()},addTab:function(){var a=b.find("> ul li").length+1,c=b.find("> ul li:not(.tve_tS)").first().attr("data-tve-custom-colour"),d='<li data-tve-custom-colour="'+c+'"><span>New Tab</span></li>',e=b.find("> div").first().attr("data-tve-custom-colour"),f=jQuery('<div class="tve_scTC" style="display: none;" data-tve-custom-colour="'+e+'"><p>Tab '+a+"</p></div>");b.find("> ul").append(d),b.append(f),TVE_Content_Builder.drag.ensure_dropzones(f.find("p")),TVE_Content_Builder.drag.bind_draggable(f),this.isVertical()&&this.resize()},removeTab:function(d){if(c(d).remove(),d.remove(),0!==a.find("li").length){this.setDefaultSelected(),this.isVertical()&&this.resize(),this.populateTabList();var e=parseInt(this.getDefaultSelected());e>=b.find("> ul li").length&&this.setDefaultSelected(e-1)}},resize:function(){b.find(".tve_scTC").css("min-height",b.find("> ul").outerHeight()+40+"px")},populateTabList:function(){var a=jQuery("ul#tve_tabs_selected").empty();return b.find("> ul li").each(function(){a.append(jQuery('<li class="tve_btn_text tve_click tve_selected_tab" id="default_tab">'+jQuery(this).text()+"</li>"))}),this},getDefaultSelected:function(){var a=b.attr("data-selected");return a||(a=0,this.setDefaultSelected(0)),a},setDefaultSelected:function(a){"undefined"==typeof a&&(a=this.getDefaultSelected()),b.attr("data-selected",a),this.show(a)}}},tve_rating:function(){var a=this,b=a.children(".tve_rating_stars").first(),c=b.children("span").first(),d=24;return{set:function(a,c){b.attr("data-"+a,c),this.draw()},get:function(a){return b.attr("data-"+a)},draw:function(){var a=parseFloat(this.get("value")),e=parseInt(this.get("max"));isNaN(a)&&(a=0),isNaN(e)&&(e=5),a>e&&(a=e,this.set("value",a)),b.css("width",e*d+"px"),c.css("width",a*d+"px"),b.attr("title",a+" / "+e)}}},tve_revision_manager:function(a){var b=jQuery.extend({last_revision:1},a);return this.show(),this.find("a").each(function(){var a=jQuery(this);a.attr("href",tve_path_params.admin_url+"revision.php?revision="+b.last_revision)})},tve_image:function(){var a={e:null,i:null,init:function(a){return this.e=a,this.i=a,this.i.parents(".thrv_feature_grid .tve_gri").length,this.ensureCompliant()},ensureCompliant:function(){var a=this.e,b=["alignleft","aligncenter","alignright"],c=["margin","margin-top","margin-left","margin-right","margin-bottom"];a.parent().is("a")&&(a=a.parent()),a.parent().is(".tve_image_frame")||a.wrapAll('<span class="tve_image_frame"></span>'),a=a.parent(),a.parent().is(".tve_image_caption")||a.wrapAll('<div class="tve_image_caption thrv_wrapper"></div>'),this.e=a.parent();for(var d,e=this.e.parent(),f=0;d=b[f++];)this.i.hasClass(d)&&(this.i.removeClass(d),this.e.addClass(d),e.is(".tve_gri")&&e.addClass(d));for(f=0;d=c[f++];)this.i.css(d)&&!this.e.parent().is(".tve_gri")&&"0px"!=this.i.css(d)&&(this.e.css(d,this.i.css(d)),this.i.css(d,""));return this.checkCaption(),this},hasStyle:function(a){if("__none__"!==a)return this.e.hasClass(a);var b=this,c=!1;return jQuery.each(img_styles.split(" "),function(a,d){b.e.hasClass(d)&&(c=!0)}),!c},align:function(a){this.e.removeClass("alignleft aligncenter alignright").addClass(a.replace("alignno","")),"aligncenter"==a&&this.e.css({"margin-left":"","margin-right":""});var b=this.e.parent();b.is(".tve_gri")&&b.removeClass("alignleft aligncenter alignright").addClass(a.replace("alignno",""))},style:function(a){this.e.removeClass(img_styles).addClass(a),this.checkCaption()},attach:function(a){a.alt&&this.i.attr("alt",a.alt),a.caption?(0===this.e.find(".wp-caption-text").length&&this.e.append('<p class="wp-caption-text"></p>'),this.e.find(".wp-caption-text").html(a.caption)):this.e.find(".wp-caption-text").remove(),this.i.css("width")||(this.i.css("width",a.width+"px"),this.e.css("width",a.width+"px")),this.i.attr("src",a.url).removeClass("tve_active_image"),this.checkCaption()},checkCaption:function(){this.hasCaption()&&this.hasStyle("__none__")?this.e.addClass("wp-caption"):this.e.removeClass("wp-caption")},hasCaption:function(){return this.e.find(".wp-caption-text").length&&this.e.find(".wp-caption-text").text().length}};return a.init(this)},tve_widgets:function(a){function b(a,b){if(!a.length)return d.optionsContianer.html(""),void TVE_Editor_Page.overlay("close");var c={action:"tve_widget_options",widget:a,security:tve_path_params.tve_ajax_nonce,options:b};TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,c,function(a){d.optionsContianer.html(a),TVE_Editor_Page.overlay("close")})}function c(a){var c={action:"tve_widgets_list",security:tve_path_params.tve_ajax_nonce};TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,c,function(c){jQuery(".tve_widgets_list").append(c),jQuery(".tve_widgets_list").val(a),b(a,e.get().options)})}var d=jQuery.extend({wrapper:null,optionsContianer:jQuery("#options_container")},a),e=TVE_Editor_Page.thriveShrtcodeConfig(d.wrapper.find(".tve_config"),"widget"),f={config:e,wrapper:this,displayWidget:function(){if(!this.config.get().widget.length)return void jQuery(".tve_widget_container",d.wrapper).html("");var a={action:"tve_display_widget",security:tve_path_params.tve_ajax_nonce,options:this.config.get().options,widget:this.config.get().widget};TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,a,function(a){jQuery(".tve_widget_container",d.wrapper).html(a),d.wrapper.removeClass("code_placeholder"),d.wrapper.find("#lb_widgets").remove(),TVE_Editor_Page.overlay("close")})}};return this.find(".tve_widgets_list").length?(jQuery(".tve_widgets_list").change(function(){b(jQuery(this).val(),new Array)}).val(e.get().widget),c(e.get().widget),this):f},tve_lightbox:function(){var a=this.is(".tve_p_lb_content")?this:this.parents(".tve_p_lb_content").first();return{setBgPattern:function(b){this.clearBgImage().clearBgColor().set_option("l_cpat",b),a.css({"background-image":"url('"+b+"')","background-repeat":"repeat"})},setBgImage:function(b){this.clearBgImage().set_option("l_cimg",b.url),a.css({"background-image":"url('"+b.url+"')","background-repeat":"","background-size":"cover"})},clearBgImage:function(){return this.set_option("l_cimg",""),a.css({"background-image":"","background-repeat":"","background-size":""}),this},clearBgPattern:function(){return this.set_option("l_ccls","").set_option("l_cpat",""),a.css({"background-image":"","background-repeat":"","background-size":""}),this},clearBgColor:function(){return this.set_option("l_ccls",""),a.tve_color_selector()&&tve_remove_css_rule(a.tve_color_selector(),"background-color"),a.css("background-color",""),this},set_option:function(a,b){return tve_path_params.tve_globals[a]=b,this}}},tve_lp:function(){var a=this;return this.hasClass("tve_wrap_all")&&(a=this.parents("body")),{setBgPattern:function(b){this.clearBgImage().clearBgColor().set_option("lp_bgp",b),a.css({"background-image":"url('"+b+"')","background-repeat":"repeat","background-size":"auto",height:""})},setBgImage:function(b){this.clearBgPattern(),this.set_option("lp_bgi",b.url),a.css({"background-image":"url('"+b.url+"')","background-repeat":"no-repeat","background-size":"cover"}).attr({"data-width":b.width,"data-height":b.height}),a.hasClass("tve_fh")&&this.bgCover(!0)},clearBgImage:function(){return this.set_option("lp_bgi","none"),a.css({"background-image":"none","background-repeat":"",height:""}).removeClass("tve-lp-fixed"),this},clearBgPattern:function(){return this.set_option("lp_bgp",""),this.set_option("lp_bgi","none"),a.css({"background-image":"none","background-repeat":""}),this},clearBgColor:function(){return this.set_option("lp_bg","#ffffff"),a.tve_color_selector()&&tve_remove_css_rule(a.tve_color_selector(),"background-color"),a.css("background-color","#ffffff"),this},bgAttachment:function(b){a.css("background-attachment",b?"fixed":"scroll"),this.set_option("lp_bga",b?"fixed":"scroll"),b?a.addClass("tve-lp-fixed"):a.removeClass("tve-lp-fixed")},bgCover:function(b){if(a.css("height","").removeClass("tve_fh"),a.hasClass("tve_lp_content")&&b){var c=parseInt(a.attr("data-width")),d=parseInt(a.attr("data-height")),e=a.outerWidth(),f="";if(isNaN(c)||isNaN(d))return;if(c>e){var g=c/d;f=parseInt(e/g)}else f=d;a.css({height:f+"px"}).addClass("tve_fh")}},set_option:function(b,c){return a.is("body")&&(tve_path_params.tve_globals[b]=c),this}}},tve_post_grid:function(a){var b=jQuery.extend({},a),c=this;if(c.find(".thrive-shortcode-config").length)var d=TVE_Editor_Page.thriveShrtcodeConfig(c.find(".thrive-shortcode-config"),"post_grid");return{sortable:function(){return c.find(".tve_sortable_layout").sortable(),this},autocomplete:function(){function a(a){return a.split(/,\s*/)}function b(b){return a(b).pop()}var d={security:tve_path_params.tve_ajax_nonce};return c.find(".tve_post_grid_autocomplete").autocomplete({source:function(a,c){d.term=b(a.term),jQuery.ajax({url:tve_path_params.ajax_url,dataType:"json",type:"post",data:d,success:function(a){c(a)},error:function(){}})},focus:function(){return!1},search:function(a,b){d.action=jQuery(this).data("action")},select:function(b,c){var d=a(this.value);return d.pop(),d.push(c.item.value),d.push(""),this.value=d.join(","),!1}}),this},display:function(){var a=b;return d?a.currentConfig=this.getConfig():a.wrap=1,a.security=tve_path_params.tve_ajax_nonce,a.action="tve_do_post_grid_shortcode",a.exclude=tve_path_params.post_id,TVE_Editor_Page.overlay(),jQuery.ajax({url:tve_path_params.ajax_url,type:"post",data:a,success:function(a){c.removeClass("image_placeholder"),TVE_Editor_Page.overlay("close"),d?$newElement=c.empty().append(a):$newElement=TVE_Content_Builder.drag.insert(a,c,!1),clearFocus({forceExit:1}),hide_control_panel_menu(),$newElement.tve_post_grid().after_render().masonry()}}),this},after_render:function(){return c.find(".tve_post_grid_masonry").length?(this.masonry(),this):(c.find(".tve_pg_row").css("height",""),c.find(".tve_pg_row").each(function(){var a=0,b=jQuery(this);b.find(".tve_post").each(function(){var b=jQuery(this),c=parseInt(b.outerHeight());c>a&&(a=c),b.css("height","100%")}),b.css("height",a-1+"px")}),this)},masonry:function(){return c.find(".tve_post_grid_masonry").length&&c.find(".tve_post_grid_masonry").masonry(),this},config:function(){return d},getConfig:function(){return d.get()}}},tve_widget_menu:function(){var a=this.is(".tve_w_menu")?this.parents(".thrv_widget_menu"):this,b=a.find(".tve_w_menu"),c=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"widget_menu");return c.update(a.find(".tve_menu_title").text(),"title"),a.data("colorpicker-bound")||(a.on("editor.oncolorpickerchange",function(b,d,e){c=TVE_Editor_Page.thriveShrtcodeConfig(a.find(".thrive-shortcode-config"),"widget_menu"),c.update(d,e.save_key)}),a.data("colorpicker-bound",!0)),{fetch:function(){var d=jQuery("#widget_menu_menu").find(".menu-edit-link").attr("href").replace(/&menu=(\d*)/,"&menu="+c.get().menu_id);jQuery("#widget_menu_menu").find(".menu-edit-link").attr("href",d);var e=c.get();e.nowrap=1,e.action="tve_ajax_load",e.ajax_load="sc_widget_menu",TVE_Editor_Page.overlay(),jQuery.post(tve_path_params.ajax_url,e,function(c){var d=a.find(".tve_menu_title").clone();a.html(c),a.prepend(d),b=a.find(".tve_w_menu"),TVE_Editor_Page.overlay("close")})},color_class:function(a){for(var c,d=0;c=tve_path_params.shortcode_colours[d++];)b.removeClass("tve_"+c);b.addClass(a),this.set(a,"color")},font:function(a){b.add(b.find("li")).removeClass(custom_font_classes).addClass(a),this.set(a,"font_class")},direction:function(c){b.removeClass("tve_horizontal tve_vertical").addClass(c),a.attr("data-tve-style",c),TVE_Content_Builder.colors.refresh(!0);var d=b.find("li li a"),e=b.find("> li > a");"tve_vertical"===c?(b.find("ul").css({display:"",opacity:""}),e.tve_color_selector()&&d.tve_color_selector(e.tve_color_selector())):"tve_horizontal"===c&&(d.tve_color_selector(""),TVE_Content_Builder.colors.apply()),this.set(c,"dir")},clear_font:function(){b.removeClass(custom_font_classes),this.set("","font_class")},font_size:function(a,c){b.css("font-size",a+"px").removeClass("rft rfs").addClass(c),this.set(a+"px","font_size"),this.set(c,"custom_class")},title:function(b){b=jQuery.trim(b),a.find(".tve_menu_title").text(b),this.set(b,"title")},set:function(a,b,d){c.update(a,b),"undefined"!=typeof d&&this.fetch()},config:function(){return c.get()}}}});