/*! Thrive Content Builder - 2015-10-08
* http://www.thrivethemes.com/
* Copyright (c) 2015 Thrive Themes */
var TVE_Content_Builder=TVE_Content_Builder||{};!function(a){tve_path_params.tve_globals.landing_fonts=tve_path_params.tve_globals.landing_fonts||{};var b={$main_menu:null,initElement:function(a,b,c){tve_refresh(!1);var d=jQuery(".tve_wrap_all");d.addClass("tve_landing_fonts"),c.target=d,c.currentTarget=d,tve_editor_init(c,d)},addToGlobals:function(a,b,c){tve_path_params.tve_globals.landing_fonts[a]=tve_path_params.tve_globals.landing_fonts[a]||{},tve_path_params.tve_globals.landing_fonts[a][b]=c},removeFromGlobals:function(a,b){tve_path_params.tve_globals.landing_fonts[a]&&tve_path_params.tve_globals.landing_fonts[a][b]&&delete tve_path_params.tve_globals.landing_fonts[a][b]},getSelectorMenu:function(a){return this.$main_menu?this.$main_menu.find('ul.tve_menu[data-selector="'+a+'"]'):null},setFontFamily:function(a){tve_set_selected_dropdown(a);var b=a.data("selector"),c=a.data("font-family"),d=a.data("cls");this.addToGlobals(b,"font-family",c),tve_path_params.tve_globals.landing_fonts[b].css_class=d,this.add_css_rule(b,"font-family: "+c)},clearFontFamily:function(a){var b=a.data("selector"),c=this.getSelectorMenu(b);this.remove_css_rule(b,"font-family"),this.removeFromGlobals(b,"font-family"),delete tve_path_params.tve_globals.landing_fonts[b].css_class,tve_set_selected_dropdown(c.find(".tve_font_list li").first(),!0)},setFontSize:function(a){var b=a.data("selector"),c=tve_handle_integer_or_float(a.val()),d=this.getSelectorMenu(b).find('.tve_landing_fonts_size_unit[data-selector="'+b+'"]').text();this.add_css_rule(b,"font-size:"+c+d),this.addToGlobals(b,"font-size",c+d+"")},setFontSizeUnit:function(a){var b=a.data("selector"),c=tve_handle_integer_or_float(this.getSelectorMenu(b).find('input.tve_landing_fonts_size[data-selector="'+b+'"]').val()),d=-1!==a.text().indexOf("em")?"em":"px";tve_set_selected_dropdown(a),this.add_css_rule(b,"font-size:"+c+d),this.addToGlobals(b,"font-size",c+d+"")},setFontLineHeight:function(a){var b=a.data("selector"),c=tve_handle_integer_or_float(a.val()),d=this.getSelectorMenu(b).find('.tve_landing_fonts_line_height_unit[data-selector="'+b+'"]').text();this.add_css_rule(b,"line-height:"+c+d),this.addToGlobals(b,"line-height",c+d+"")},setFontLineHeightUnit:function(a){var b=a.data("selector"),c=tve_handle_integer_or_float(this.getSelectorMenu(b).find('input.tve_landing_fonts_line_height[data-selector="'+b+'"]').val()),d=-1!==a.text().indexOf("em")?"em":"px";tve_set_selected_dropdown(a),this.add_css_rule(b,"line-height:"+c+d),this.addToGlobals(b,"line-height",c+d+"")},remove_css_rule:function(a,b){tve_remove_css_rule("#tve_editor "+a,b),"p"===a&&tve_remove_css_rule("#tve_editor li",b)},add_css_rule:function(a,b){tve_add_css_rule("#tve_editor "+a,b,0),"p"===a&&tve_add_css_rule("#tve_editor li",b,0)},onMenuLoad:function(b,c){this.$main_menu=c,a.each(tve_path_params.tve_globals.landing_fonts,function(a,b){var d=c.find('.tve_menu[data-selector="'+a+'"]');if(b["font-family"]){var e=d.find('.tve_font_list li[data-font-family="'+b["font-family"]+'"]');tve_set_selected_dropdown(e)}if(b["font-size"]){var f=tve_handle_integer_or_float(b["font-size"]),g=-1!==b["font-size"].indexOf("px")?"px":"em",h=d.find("li.tve_landing_fonts_size_"+g+"[data-selector='"+a+"']");d.find('input.tve_landing_fonts_size[data-selector="'+a+'"]').val(f),tve_set_selected_dropdown(h)}if(b["line-height"]){var i=tve_handle_integer_or_float(b["line-height"]),g=-1!==b["line-height"].indexOf("px")?"px":"em",h=d.find("li.tve_landing_fonts_line_height_"+g+"[data-selector='"+a+"']");d.find('input.tve_landing_fonts_line_height[data-selector="'+a+'"]').val(i),tve_set_selected_dropdown(h)}})},fontUsed:function(b){var c=!1;return a.each(tve_path_params.tve_globals.landing_fonts,function(a,d){return d.css_class===b?void(c=!0):void 0}),c},colorChanged:function(a){if(a.force_selector){var b=a.force_selector.replace("#tve_editor ","");this.add_css_rule(b,"color: "+a.color_value),this.addToGlobals(b,"color",a.color_value)}}};TVE_Content_Builder.landing_fonts=b,a(TVE_Content_Builder).on("menu_show_landing_fonts",function(a,c,d){b.onMenuLoad(c,d)}),a(TVE_Editor_Page).on("editor.beforecolorpickerchange_landing_fonts",function(a,c){b.colorChanged(c)}),TVE_Content_Builder.add_filter("get_static_color_landing_fonts",function(b,c){var d=c.replace("#tve_editor ","");if(tve_path_params.tve_globals.landing_fonts[d]&&tve_path_params.tve_globals.landing_fonts[d].color)b=tve_path_params.tve_globals.landing_fonts[d].color;else if(b=a(c).css("color"),!b){var e=a("<"+d+"></"+d+">").appendTo(TVE_Editor_Page.editor);b=e.css("color"),e.remove()}return b})}(jQuery);