/*! Thrive Leads - The ultimate Lead Capture solution for wordpress - 2015-12-02
* https://thrivethemes.com 
* Copyright (c) 2015 * Thrive Themes */
!function(a){a(document).ready(function(){a(".manager-collapse-table-list-item").on("click",function(){a(this).toggleClass("tve-manager-expanded"),a(this).next(".tve-manager-content").slideToggle()}),a(".tve-manager-download-button").on("click",function(){var b=a(this),c=b.parent().find(".tve-manager-source option:selected").val(),d=b.parent().find(".tve-manager-type option:selected").val(),e=a("<tr>").append("<td>"+b.parent().find(".tve-manager-source option:selected").text()+"</td>").append("<td>Now</td>").append('<td class="tve-status">Pending</td>').append('<td class="tve-action" style="text-align: right">'+a(".tve-pending-spinner").parent().html()+"</td>"),f={start_date:a(".tve-contacts-start-date").val(),end_date:a(".tve-contacts-end-date").val(),source:a(".tve-contacts-source").val()};a(".tve-downloads-table tbody").prepend(e),a.ajax({method:"POST",url:ajaxurl,dataType:"json",data:{action:"thrive_leads_backend_ajax",route:"contacts",actionType:"download",source:c,type:d,params:f}}).done(function(b){e.find(".tve-status").html(b.response),e.find(".tve-action").empty().append(a("<a>",{href:b.link,"class":"tve-btn tve-btn-green tve-btn-medium tve-download",html:"Download"})).append(a("<a>",{"data-id":b.id,"class":"tve-btn tve-btn-red tve-btn-medium tve-delete-download",html:"Delete"}))}).fail(function(a){500==a.status&&(e.find(".tve-status").html('<span class="tve-error">'+a.statusText+"</span>"),e.find(".tve-action").html("You might have a memory limit on your server. Please contact your host!"))})}),a(document).on("click",".tve-delete-download",function(){var b=a(this).attr("data-id"),c=a(this),d=c.parents("tr");c.parent().html(a(".tve-pending-spinner").parent().html()),a.ajax({method:"POST",url:ajaxurl,data:{id:b,action:"thrive_leads_backend_ajax",route:"contacts",actionType:"delete-download"}}).done(function(a){d.remove()})}),a(".tve-contacts-start-date").datepicker({dateFormat:"yy-mm-dd",onSelect:function(b){a(".tve-contacts-start-date").val(b)}}),a(".tve-contacts-end-date").datepicker({dateFormat:"yy-mm-dd",onSelect:function(b){a(".tve-contacts-end-date").val(b)}}),a(".tve-contacts-source").change(function(){a(".tve-contacts-source").val(a(this).val())}),a(".tve-contacts-per-page").change(function(){a(".tve-contacts-per-page").val(a(this).val())}),a("#ui-datepicker-div").hide(),a(".tve-icon-trash-o").click(function(){return confirm("Are you sure you want to delete this contact?")}),a(".tve-email").click(function(){var b=a(this).attr("data-contact-id"),c={id:"tve-email-lb",width:"600",height:"220"},d=a("#tve-email-address");""!=d.attr("data-default-value")?d.val(d.attr("data-default-value")):d.val(""),a("#tve-contact-id").val(b),a("#tve-email-response").html("").removeClass(),open_tb("Send Contact Information by Email",c)}),a(".tve-send-email").click(function(){var b={id:a("#tve-contact-id").val(),save_email:a("#tve-save-email").is(":checked")?1:0,email_address:a("#tve-email-address").val()},c=a("#tve-email-response");return""==b.email_address?void c.html("Invalid Email.").removeClass().addClass("tve-error"):void a.ajax({method:"POST",url:ajaxurl,dataType:"json",data:{action:"thrive_leads_backend_ajax",route:"contacts",actionType:"send-email",data:b}}).done(function(a){c.html(a.response).removeClass().addClass("tve-"+a.type)})})})}(jQuery);var open_tb=function(a,b){if(b.url)var c=b.url;else var d=b.width?b.width:600,e=b.height?b.height:500,c="#TB_inline?width="+d+"&height="+e+"&inlineId="+b.id+"&modal=1";tb_show(a,c)};